2025-08-22 07:22:08.833 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 07:22:08.928 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 07:22:09.045 +02:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 07:22:09.174 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 07:22:09.187 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 07:22:09.193 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 07:22:09.312 +02:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 07:22:09.324 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 07:22:09.355 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 07:22:09.539 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 07:22:09.696 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 07:22:09.699 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 07:22:09.700 +02:00 [INF] Hosting environment: Development
2025-08-22 07:22:09.701 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 07:23:11.591 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 07:23:11.620 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-22 07:23:11.643 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:11.667 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 77.1445ms
2025-08-22 07:23:11.693 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 07:23:11.718 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:11.812 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 07:23:11.857 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 07:23:11.960 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 07:23:11.973 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 07:23:11.997 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 07:23:12.000 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 07:23:12.328 +02:00 [INF] Received HTTP response headers after 325.3357ms - 200
2025-08-22 07:23:12.331 +02:00 [INF] End processing HTTP request after 335.1295ms - 200
2025-08-22 07:23:12.756 +02:00 [INF] Executed DbCommand (89ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 07:23:13.019 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 07:23:13.078 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 07:23:13.089 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 07:23:13.116 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 07:23:13.180 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 07:23:13.190 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 1322.2017ms
2025-08-22 07:23:13.192 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 07:23:13.221 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 1527.0838ms
2025-08-22 07:23:15.587 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 07:23:15.594 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:15.598 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 9.6394ms
2025-08-22 07:23:15.605 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 07:23:15.620 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 07:23:15.628 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 07:23:15.629 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:15.635 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 07:23:15.642 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 07:23:15.652 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 07:23:15.652 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:15.665 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:15.684 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 78.474ms
2025-08-22 07:23:15.704 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:15.742 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:15.771 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:15.787 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 166.106ms
2025-08-22 07:23:15.799 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 170.2099ms
2025-08-22 07:23:15.820 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 184.6519ms
2025-08-22 07:23:15.820 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 07:23:15.822 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 180.0133ms
2025-08-22 07:23:15.895 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:15.923 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:23:15.938 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:16.146 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 07:23:16.146 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 07:23:16.147 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:16.181 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:23:16.181 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:23:16.182 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:23:16.638 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:23:16.644 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:23:16.655 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:23:16.655 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:23:16.657 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 337.8881ms
2025-08-22 07:23:16.660 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 07:23:16.664 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 07:23:16.673 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:16.684 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 861.7869ms
2025-08-22 07:23:16.745 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 07:23:16.756 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:23:16.820 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:23:16.839 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:23:16.848 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 81.1378ms
2025-08-22 07:23:16.856 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 07:23:16.864 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 203.4148ms
2025-08-22 07:23:16.992 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:16.992 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:16.997 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 07:23:17.019 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 745.0518ms
2025-08-22 07:23:17.021 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 07:23:17.022 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 07:23:17.035 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:17.038 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 1385.9312ms
2025-08-22 07:23:17.044 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 07:23:17.065 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:23:17.079 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:17.129 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:23:17.224 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 889.4503ms
2025-08-22 07:23:17.235 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:23:17.237 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:17.249 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:17.255 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 1332.2598ms
2025-08-22 07:23:17.268 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:17.280 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:23:17.491 +02:00 [INF] Executed DbCommand (402ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:23:17.493 +02:00 [INF] Executed DbCommand (187ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:23:17.586 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:17.588 +02:00 [INF] Executed DbCommand (94ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:17.594 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 07:23:17.597 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 520.4554ms
2025-08-22 07:23:17.601 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 07:23:17.603 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 582.6688ms
2025-08-22 07:23:17.641 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:17.680 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:23:17.695 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 405.8419ms
2025-08-22 07:23:17.710 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:17.711 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:23:17.717 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 482.0956ms
2025-08-22 07:23:17.739 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:17.767 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:17.773 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:23:17.891 +02:00 [INF] Executed DbCommand (95ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:23:17.979 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:17.995 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:18.001 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:23:18.003 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 218.7925ms
2025-08-22 07:23:18.004 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:18.004 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:23:18.006 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 296.0086ms
2025-08-22 07:23:18.008 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:18.012 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:18.014 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:23:18.049 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:23:18.097 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:18.183 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:18.196 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:23:18.214 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 196.4497ms
2025-08-22 07:23:18.221 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:23:18.220 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:18.236 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:18.248 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 242.8405ms
2025-08-22 07:23:18.260 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:18.272 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:23:18.376 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:23:18.484 +02:00 [INF] Executed DbCommand (89ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:18.546 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:18.566 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:23:18.573 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 288.3084ms
2025-08-22 07:23:18.583 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:23:18.586 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:18.595 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:18.602 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 380.695ms
2025-08-22 07:23:18.610 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:18.628 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:23:18.725 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:23:18.786 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:18.817 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:18.826 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:23:18.829 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 183.619ms
2025-08-22 07:23:18.831 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:23:18.835 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 251.386ms
2025-08-22 07:23:42.521 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 07:23:42.524 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:42.525 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 3.4421ms
2025-08-22 07:23:42.529 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 07:23:42.534 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:42.535 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 07:23:42.538 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 07:23:42.552 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0782508109
2025-08-22 07:23:42.557 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0782508109; proxy=none
2025-08-22 07:23:42.567 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 07:23:42.570 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 07:23:42.867 +02:00 [INF] Received HTTP response headers after 291.8687ms - 200
2025-08-22 07:23:42.868 +02:00 [INF] End processing HTTP request after 301.8872ms - 200
2025-08-22 07:23:42.878 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 07:23:42.911 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 07:23:42.924 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 07:23:42.936 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 07:23:42.941 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 401.6119ms
2025-08-22 07:23:42.946 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 07:23:42.948 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 418.3823ms
2025-08-22 07:23:44.977 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 07:23:44.978 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 07:23:44.986 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:44.996 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:44.997 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 18.9456ms
2025-08-22 07:23:45.007 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 28.3898ms
2025-08-22 07:23:45.040 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 07:23:45.095 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:45.121 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 07:23:45.175 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 07:23:45.321 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 07:23:45.412 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 07:23:45.471 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:45.602 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 07:23:45.650 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 07:23:45.666 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 07:23:45.696 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 506.35ms
2025-08-22 07:23:45.700 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 07:23:45.702 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 07:23:45.711 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:45.716 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 675.3555ms
2025-08-22 07:23:45.721 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 07:23:45.740 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 07:23:45.821 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 07:23:45.894 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 07:23:45.944 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:45.990 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 07:23:46.045 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 07:23:46.057 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 07:23:46.063 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 313.0915ms
2025-08-22 07:23:46.075 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 07:23:46.079 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 378.9481ms
2025-08-22 07:23:53.425 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-22 07:23:53.439 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:53.443 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 17.6383ms
2025-08-22 07:23:53.452 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-22 07:23:53.466 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:23:53.483 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 07:23:53.523 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-22 07:23:53.656 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 07:23:53.673 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:23:53.678 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 07:23:53.692 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 160.0306ms
2025-08-22 07:23:53.699 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 07:23:53.706 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 254.7193ms
2025-08-22 07:24:00.976 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 07:24:00.995 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:24:01.019 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 42.4737ms
2025-08-22 07:24:01.116 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 07:24:01.555 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:24:01.587 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 07:24:01.599 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 07:24:01.965 +02:00 [INF] Executed DbCommand (121ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 07:24:02.085 +02:00 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 07:24:02.220 +02:00 [INF] Executed DbCommand (127ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:24:02.585 +02:00 [INF] Executed DbCommand (170ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 07:24:02.690 +02:00 [INF] Executed DbCommand (100ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 07:24:02.696 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 07:24:02.703 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 874.9535ms
2025-08-22 07:24:02.706 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 07:24:02.712 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 1596.0807ms
2025-08-22 07:24:22.491 +02:00 [INF] Application is shutting down...
2025-08-22 07:25:37.858 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 07:25:37.930 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 07:25:38.024 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 07:25:38.160 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 07:25:38.181 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 07:25:38.195 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 07:25:38.243 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 07:25:38.261 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 07:25:38.282 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 07:25:38.395 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 07:25:38.585 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 07:25:38.591 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 07:25:38.593 +02:00 [INF] Hosting environment: Development
2025-08-22 07:25:38.595 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 07:26:18.779 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 07:26:18.852 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-22 07:26:18.863 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:18.879 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 101.4885ms
2025-08-22 07:26:18.896 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 07:26:18.902 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:18.980 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 07:26:19.013 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 07:26:19.102 +02:00 [INF] Executing action method backend.Controllers.AuthController.Login (backend) - Validation state: "Valid"
2025-08-22 07:26:19.108 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 07:26:19.119 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 07:26:19.132 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 07:26:19.136 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 07:26:19.374 +02:00 [INF] Received HTTP response headers after 233.8835ms - 200
2025-08-22 07:26:19.376 +02:00 [INF] End processing HTTP request after 246.4743ms - 200
2025-08-22 07:26:20.098 +02:00 [INF] Executed DbCommand (94ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 07:26:20.414 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 07:26:20.516 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 07:26:20.547 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 07:26:20.573 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 07:26:20.626 +02:00 [INF] Executed action method backend.Controllers.AuthController.Login (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1516.6401ms.
2025-08-22 07:26:20.638 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 07:26:20.652 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 1631.2252ms
2025-08-22 07:26:20.655 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 07:26:20.670 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 1774.5006ms
2025-08-22 07:26:21.180 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 07:26:21.188 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.192 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 12.2488ms
2025-08-22 07:26:21.192 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 07:26:21.197 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 07:26:21.198 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 07:26:21.200 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 07:26:21.200 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 07:26:21.208 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 07:26:21.210 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.214 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.216 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.222 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.231 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.235 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.236 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 43.5061ms
2025-08-22 07:26:21.239 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 41.4055ms
2025-08-22 07:26:21.244 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 45.1564ms
2025-08-22 07:26:21.245 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 45.3175ms
2025-08-22 07:26:21.247 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 46.9851ms
2025-08-22 07:26:21.268 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 07:26:21.291 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:26:21.296 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.299 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.403 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 07:26:21.403 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 07:26:21.403 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:21.413 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:26:21.413 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:26:21.413 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:26:21.420 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend) - Validation state: "Valid"
2025-08-22 07:26:21.420 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 07:26:21.426 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 07:26:21.522 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:26:21.562 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:26:21.566 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:26:21.579 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 157.9836ms.
2025-08-22 07:26:21.585 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:26:21.595 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 179.7312ms
2025-08-22 07:26:21.597 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 07:26:21.599 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 07:26:21.602 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.605 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 337.5516ms
2025-08-22 07:26:21.617 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 07:26:21.620 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:26:21.624 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:21.631 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:21.634 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend) - Validation state: "Valid"
2025-08-22 07:26:21.635 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 212.7389ms.
2025-08-22 07:26:21.642 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 07:26:21.669 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:26:21.680 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 43.4699ms.
2025-08-22 07:26:21.683 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:26:21.685 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 60.6125ms
2025-08-22 07:26:21.690 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 07:26:21.693 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 95.0182ms
2025-08-22 07:26:21.713 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:21.714 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 296.832ms
2025-08-22 07:26:21.715 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 07:26:21.718 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 07:26:21.723 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.724 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 296.6176ms.
2025-08-22 07:26:21.725 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 516.9749ms
2025-08-22 07:26:21.727 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 07:26:21.730 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:26:21.735 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:26:21.740 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 07:26:21.749 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:26:21.751 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 332.8189ms
2025-08-22 07:26:21.755 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:21.756 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:26:21.757 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 465.6641ms
2025-08-22 07:26:21.762 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.768 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:21.769 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:21.773 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 29.5164ms.
2025-08-22 07:26:21.775 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:26:21.778 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 07:26:21.781 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 07:26:21.782 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 42.4879ms
2025-08-22 07:26:21.787 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 07:26:21.791 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 75.1425ms
2025-08-22 07:26:21.827 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:26:21.857 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:21.873 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:21.881 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 96.3503ms.
2025-08-22 07:26:21.884 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:26:21.886 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 106.2804ms
2025-08-22 07:26:21.890 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:26:21.890 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:21.893 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.894 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 137.964ms
2025-08-22 07:26:21.896 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:21.899 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:26:21.902 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 07:26:21.918 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:26:21.934 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:21.947 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:21.950 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 46.1009ms.
2025-08-22 07:26:21.952 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:26:21.955 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 53.4004ms
2025-08-22 07:26:21.956 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:26:21.956 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:21.959 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:21.960 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 70.8394ms
2025-08-22 07:26:21.962 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:21.966 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:26:21.968 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 07:26:21.978 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:26:21.984 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:21.989 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:21.992 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.6047ms.
2025-08-22 07:26:21.995 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:26:21.996 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 28.9208ms
2025-08-22 07:26:21.998 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:21.998 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:26:21.999 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 43.0104ms
2025-08-22 07:26:22.002 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:22.010 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:22.011 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:26:22.014 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 07:26:22.027 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:26:22.042 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:22.059 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:22.063 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 47.9908ms.
2025-08-22 07:26:22.066 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:26:22.068 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 54.8861ms
2025-08-22 07:26:22.070 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 07:26:22.071 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:22.076 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:26:22.078 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 80.1525ms
2025-08-22 07:26:22.082 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:22.088 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 07:26:22.093 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 07:26:22.110 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 07:26:22.130 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:22.146 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:26:22.150 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 54.8957ms.
2025-08-22 07:26:22.153 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 07:26:22.156 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 62.9972ms
2025-08-22 07:26:22.158 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 07:26:22.160 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 89.7185ms
2025-08-22 07:27:07.281 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 07:27:07.284 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:27:07.285 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 4.1392ms
2025-08-22 07:27:07.290 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 07:27:07.292 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:27:07.294 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 07:27:07.295 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 07:27:07.301 +02:00 [INF] Executing action method backend.Controllers.AuthController.Login (backend) - Validation state: "Valid"
2025-08-22 07:27:07.302 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0782508109
2025-08-22 07:27:07.303 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0782508109; proxy=none
2025-08-22 07:27:07.308 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 07:27:07.310 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 07:27:07.343 +02:00 [INF] Received HTTP response headers after 31.4495ms - 200
2025-08-22 07:27:07.344 +02:00 [INF] End processing HTTP request after 36.8829ms - 200
2025-08-22 07:27:07.360 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 07:27:07.388 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 07:27:07.397 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 07:27:07.400 +02:00 [INF] Executed action method backend.Controllers.AuthController.Login (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 98.2781ms.
2025-08-22 07:27:07.403 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 07:27:07.405 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 107.8785ms
2025-08-22 07:27:07.407 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 07:27:07.408 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 118.3648ms
2025-08-22 07:27:07.604 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 07:27:07.607 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 07:27:07.620 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:27:07.635 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 31.4433ms
2025-08-22 07:27:07.637 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:27:07.652 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 44.6438ms
2025-08-22 07:27:07.666 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 07:27:07.674 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:27:07.684 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 07:27:07.720 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 07:27:07.732 +02:00 [INF] Executing action method backend.Controllers.ManagerController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 07:27:07.830 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 07:27:07.881 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 07:27:07.930 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:27:08.015 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 07:27:08.067 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 07:27:08.074 +02:00 [INF] Executed action method backend.Controllers.ManagerController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 338.9548ms.
2025-08-22 07:27:08.076 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 07:27:08.091 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 366.4612ms
2025-08-22 07:27:08.092 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 07:27:08.093 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 07:27:08.094 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 427.9428ms
2025-08-22 07:27:08.097 +02:00 [INF] CORS policy execution successful.
2025-08-22 07:27:08.105 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 07:27:08.107 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 07:27:08.112 +02:00 [INF] Executing action method backend.Controllers.ManagerController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 07:27:08.116 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 07:27:08.122 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 07:27:08.131 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 07:27:08.137 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 07:27:08.141 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 07:27:08.147 +02:00 [INF] Executed action method backend.Controllers.ManagerController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 33.4733ms.
2025-08-22 07:27:08.149 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 07:27:08.150 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 41.2662ms
2025-08-22 07:27:08.152 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 07:27:08.155 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 62.4848ms
2025-08-22 08:00:34.729 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 08:00:34.751 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:00:34.757 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 31.2056ms
2025-08-22 08:00:34.763 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 08:00:34.765 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:00:34.778 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:00:34.786 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 08:00:34.846 +02:00 [INF] Executing action method backend.Controllers.AuthController.Login (backend) - Validation state: "Valid"
2025-08-22 08:00:34.850 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0782508109
2025-08-22 08:00:34.858 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0782508109; proxy=none
2025-08-22 08:00:34.860 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:00:34.862 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:00:55.964 +02:00 [ERR] External auth network error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 37
2025-08-22 08:00:56.071 +02:00 [ERR] External auth unreachable: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 37
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 104
2025-08-22 08:00:56.090 +02:00 [INF] Executed action method backend.Controllers.AuthController.Login (backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21240.4837ms.
2025-08-22 08:00:56.094 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType17`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:00:56.116 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21327.74ms
2025-08-22 08:00:56.119 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:00:56.121 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 503 null application/json; charset=utf-8 21357.8945ms
2025-08-22 08:18:57.432 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 08:18:57.454 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:18:57.461 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 31.7385ms
2025-08-22 08:18:57.471 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 08:18:57.480 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:18:57.501 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:18:57.514 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 08:18:57.562 +02:00 [INF] Executing action method backend.Controllers.AuthController.Login (backend) - Validation state: "Valid"
2025-08-22 08:18:57.566 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0782508109
2025-08-22 08:18:57.578 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0782508109; proxy=none
2025-08-22 08:18:57.582 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:18:57.584 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:19:18.672 +02:00 [ERR] External auth network error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 37
2025-08-22 08:19:18.695 +02:00 [ERR] External auth unreachable: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 37
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 104
2025-08-22 08:19:18.707 +02:00 [INF] Executed action method backend.Controllers.AuthController.Login (backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21140.4108ms.
2025-08-22 08:19:18.709 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType17`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:19:18.711 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21193.6827ms
2025-08-22 08:19:18.712 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:19:18.714 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 503 null application/json; charset=utf-8 21242.2383ms
2025-08-22 08:29:53.906 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 08:29:53.924 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:29:53.931 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 25.5187ms
2025-08-22 08:29:53.937 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 08:29:53.941 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:29:53.961 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:29:53.971 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 08:29:54.022 +02:00 [INF] Executing action method backend.Controllers.AuthController.Login (backend) - Validation state: "Valid"
2025-08-22 08:29:54.031 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0782508109
2025-08-22 08:29:54.045 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0782508109; proxy=none
2025-08-22 08:29:54.051 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:29:54.053 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:29:54.311 +02:00 [INF] Received HTTP response headers after 255.8388ms - 200
2025-08-22 08:29:54.312 +02:00 [INF] End processing HTTP request after 261.8693ms - 200
2025-08-22 08:29:54.574 +02:00 [INF] Executed DbCommand (123ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 08:29:54.701 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 08:29:54.723 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 08:29:54.742 +02:00 [INF] Executed action method backend.Controllers.AuthController.Login (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 710.297ms.
2025-08-22 08:29:54.747 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 08:29:54.750 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 775.7066ms
2025-08-22 08:29:54.751 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:29:54.755 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 817.7884ms
2025-08-22 08:29:55.250 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 08:29:55.255 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 08:29:55.261 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:29:55.270 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:29:55.272 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 21.7982ms
2025-08-22 08:29:55.275 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 21.7897ms
2025-08-22 08:29:55.285 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 08:29:55.315 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:29:55.348 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 08:29:55.353 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:29:55.383 +02:00 [INF] Executing action method backend.Controllers.ManagerController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 08:29:55.456 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 08:29:55.535 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 08:29:55.602 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:29:55.647 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 08:29:55.684 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 08:29:55.690 +02:00 [INF] Executed action method backend.Controllers.ManagerController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 300.2379ms.
2025-08-22 08:29:55.697 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 08:29:55.704 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 344.0144ms
2025-08-22 08:29:55.706 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 08:29:55.706 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 08:29:55.714 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 428.6912ms
2025-08-22 08:29:55.718 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:29:55.752 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 08:29:55.758 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:29:55.765 +02:00 [INF] Executing action method backend.Controllers.ManagerController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 08:29:55.787 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 08:29:55.812 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 08:29:55.833 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:29:55.860 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 08:29:55.877 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 08:29:55.881 +02:00 [INF] Executed action method backend.Controllers.ManagerController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 112.8893ms.
2025-08-22 08:29:55.884 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 08:29:55.887 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 122.6293ms
2025-08-22 08:29:55.890 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 08:29:55.891 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 185.4276ms
2025-08-22 08:30:18.124 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-22 08:30:18.136 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:30:18.139 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 15.2195ms
2025-08-22 08:30:18.149 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-22 08:30:18.157 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:30:18.167 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 08:30:18.221 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:30:18.228 +02:00 [INF] Executing action method backend.Controllers.ManagerController.GetAgents (backend) - Validation state: "Valid"
2025-08-22 08:30:18.260 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 08:30:18.281 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:30:18.288 +02:00 [INF] Executed action method backend.Controllers.ManagerController.GetAgents (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.4613ms.
2025-08-22 08:30:18.290 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 08:30:18.316 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 90.8328ms
2025-08-22 08:30:18.318 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 08:30:18.320 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 170.9071ms
2025-08-22 08:30:50.543 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 08:30:50.554 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:30:50.567 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 23.1126ms
2025-08-22 08:30:50.598 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 08:30:50.612 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:30:50.624 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 08:30:50.628 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:30:50.639 +02:00 [INF] Executing action method backend.Controllers.ManagerController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 08:30:50.687 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 08:30:50.728 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 08:30:50.768 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:30:50.823 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 08:30:50.876 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 08:30:50.881 +02:00 [INF] Executed action method backend.Controllers.ManagerController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 239.0546ms.
2025-08-22 08:30:50.890 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 08:30:50.894 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 256.2614ms
2025-08-22 08:30:50.897 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 08:30:50.902 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 303.8572ms
2025-08-22 08:31:09.183 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 08:31:09.188 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:31:09.190 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 6.2496ms
2025-08-22 08:31:09.195 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 08:31:09.201 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:31:09.204 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 08:31:09.252 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:31:09.294 +02:00 [INF] Executing action method backend.Controllers.ManagerController.GetAttendanceDashboard (backend) - Validation state: "Valid"
2025-08-22 08:31:09.333 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 08:31:09.355 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 08:31:09.370 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:31:09.384 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 08:31:09.393 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:31:09.400 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:31:09.405 +02:00 [INF] Executed action method backend.Controllers.ManagerController.GetAttendanceDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 108.5708ms.
2025-08-22 08:31:09.408 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:31:09.461 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 204.8058ms
2025-08-22 08:31:09.463 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 08:31:09.465 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 200 null application/json; charset=utf-8 269.5725ms
2025-08-22 08:31:41.932 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 08:31:41.940 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:31:41.945 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 12.9372ms
2025-08-22 08:31:41.953 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 08:31:41.962 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:31:41.965 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 08:31:41.986 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:31:41.995 +02:00 [INF] Executing action method backend.Controllers.ManagerController.GetManagerNotifications (backend) - Validation state: "Valid"
2025-08-22 08:31:42.136 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 08:31:42.235 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 08:31:42.242 +02:00 [INF] Executed action method backend.Controllers.ManagerController.GetManagerNotifications (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 241.2716ms.
2025-08-22 08:31:42.244 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:31:42.254 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 262.9378ms
2025-08-22 08:31:42.257 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 08:31:42.258 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 305.7458ms
2025-08-22 08:32:14.315 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 08:32:14.320 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:32:14.323 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 7.7432ms
2025-08-22 08:32:14.328 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/notifications - application/json 107
2025-08-22 08:32:14.333 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:32:14.336 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 08:32:14.346 +02:00 [INF] Route matched with {action = "SendManagerNotification", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] SendManagerNotification(backend.DTOs.Notification.NotificationRequestDTO) on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:32:14.374 +02:00 [INF] Executing action method backend.Controllers.ManagerController.SendManagerNotification (backend) - Validation state: "Valid"
2025-08-22 08:32:14.393 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 08:32:14.421 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-22 08:32:14.516 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-22 08:32:14.538 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-22 08:32:14.549 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-22 08:32:14.560 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-22 08:32:14.749 +02:00 [INF] Executed action backend.Controllers.ManagerController.SendManagerNotification (backend) in 398.6904ms
2025-08-22 08:32:14.754 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 08:32:14.769 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'User' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at backend.Repositories.NotificationRepository.AddAsync(Notification notification) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\NotificationRepository.cs:line 34
   at backend.Services.NotificationService.SendNotificationAsync(User sender, User recipient, String title, String message, Boolean viaEmail, Category category, Priority priority) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 42
   at backend.Services.NotificationService.SendCompleteNotificationAsync(User sender, User recipient, String title, String message, Boolean viaEmail, Category category, Priority priority) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 132
   at backend.Controllers.ManagerController.SendManagerNotification(NotificationRequestDTO body) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 1202
   at lambda_method846(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-22 08:32:14.885 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/notifications - 500 null application/json; charset=utf-8 557.1476ms
2025-08-22 08:32:25.500 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 08:32:25.505 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:32:25.507 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 7.7635ms
2025-08-22 08:32:25.522 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 08:32:25.530 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:32:25.534 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 08:32:25.537 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:32:25.543 +02:00 [INF] Executing action method backend.Controllers.ManagerController.GetManagerNotifications (backend) - Validation state: "Valid"
2025-08-22 08:32:25.570 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 08:32:25.599 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 08:32:25.605 +02:00 [INF] Executed action method backend.Controllers.ManagerController.GetManagerNotifications (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.8246ms.
2025-08-22 08:32:25.610 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:32:25.614 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 72.6729ms
2025-08-22 08:32:25.617 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 08:32:25.619 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 97.2969ms
2025-08-22 08:32:39.049 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 08:32:39.052 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:32:39.053 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 3.9486ms
2025-08-22 08:32:39.057 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/notifications - application/json 103
2025-08-22 08:32:39.060 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:32:39.063 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 08:32:39.064 +02:00 [INF] Route matched with {action = "SendManagerNotification", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] SendManagerNotification(backend.DTOs.Notification.NotificationRequestDTO) on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:32:39.070 +02:00 [INF] Executing action method backend.Controllers.ManagerController.SendManagerNotification (backend) - Validation state: "Valid"
2025-08-22 08:32:39.086 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 08:32:39.095 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-22 08:32:39.106 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-22 08:32:39.113 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-22 08:32:39.117 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-22 08:32:39.122 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-22 08:32:39.128 +02:00 [INF] Executed action backend.Controllers.ManagerController.SendManagerNotification (backend) in 59.8372ms
2025-08-22 08:32:39.130 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 08:32:39.132 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'User' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at backend.Repositories.NotificationRepository.AddAsync(Notification notification) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\NotificationRepository.cs:line 34
   at backend.Services.NotificationService.SendNotificationAsync(User sender, User recipient, String title, String message, Boolean viaEmail, Category category, Priority priority) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 42
   at backend.Services.NotificationService.SendCompleteNotificationAsync(User sender, User recipient, String title, String message, Boolean viaEmail, Category category, Priority priority) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 132
   at backend.Controllers.ManagerController.SendManagerNotification(NotificationRequestDTO body) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 1202
   at lambda_method846(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-22 08:32:39.147 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/notifications - 500 null application/json; charset=utf-8 89.5274ms
2025-08-22 08:33:34.277 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 08:33:34.284 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:33:34.286 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 8.7313ms
2025-08-22 08:33:34.297 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 08:33:34.302 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:33:34.312 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 08:33:34.315 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:33:34.318 +02:00 [INF] Executing action method backend.Controllers.ManagerController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 08:33:34.346 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 08:33:34.384 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 08:33:34.429 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:33:34.472 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 08:33:34.501 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 08:33:34.510 +02:00 [INF] Executed action method backend.Controllers.ManagerController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 186.4078ms.
2025-08-22 08:33:34.513 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 08:33:34.516 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 197.8769ms
2025-08-22 08:33:34.518 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 08:33:34.521 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 223.9806ms
2025-08-22 08:34:15.635 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard/timeframe - null null
2025-08-22 08:34:15.642 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:34:15.643 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard/timeframe - 204 null null 7.8381ms
2025-08-22 08:34:15.648 +02:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5238/api/manager/dashboard/timeframe - application/json 39
2025-08-22 08:34:15.651 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:34:15.653 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend)'
2025-08-22 08:34:15.663 +02:00 [INF] Route matched with {action = "UpdateAttendanceTimeframe", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO+Timeframe]] UpdateAttendanceTimeframe(Timeframe) on controller backend.Controllers.ManagerController (backend).
2025-08-22 08:34:15.673 +02:00 [INF] Executing action method backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend) - Validation state: "Valid"
2025-08-22 08:34:15.687 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 08:34:15.728 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 08:34:15.897 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int16), @p4='?' (DbType = Time), @p5='?' (DbType = Int64), @p6='?' (DbType = Time), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [attendance_timeframes] ([applies_to_all_agents], [break_duration], [created_at], [day_of_week], [end_time], [manager_id], [start_time], [updated_at])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-08-22 08:34:16.004 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-22 08:34:16.013 +02:00 [INF] Executed action method backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 337.9727ms.
2025-08-22 08:34:16.015 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO+Timeframe'.
2025-08-22 08:34:16.017 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend) in 349.1244ms
2025-08-22 08:34:16.019 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend)'
2025-08-22 08:34:16.020 +02:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5238/api/manager/dashboard/timeframe - 200 null application/json; charset=utf-8 372.075ms
2025-08-22 08:35:02.404 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 08:35:02.409 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:02.410 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 5.9951ms
2025-08-22 08:35:02.415 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 08:35:02.419 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:02.421 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:35:02.424 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 08:35:02.440 +02:00 [INF] Executing action method backend.Controllers.AuthController.Login (backend) - Validation state: "Valid"
2025-08-22 08:35:02.442 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 08:35:02.457 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 08:35:02.462 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:35:02.463 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:35:02.659 +02:00 [INF] Received HTTP response headers after 193.7981ms - 200
2025-08-22 08:35:02.660 +02:00 [INF] End processing HTTP request after 198.3798ms - 200
2025-08-22 08:35:02.680 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 08:35:02.718 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 08:35:02.729 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 08:35:02.735 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 08:35:02.740 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 08:35:02.747 +02:00 [INF] Executed action method backend.Controllers.AuthController.Login (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 305.8885ms.
2025-08-22 08:35:02.749 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 08:35:02.751 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 324.8418ms
2025-08-22 08:35:02.752 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:35:02.755 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 339.3714ms
2025-08-22 08:35:03.166 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 08:35:03.178 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.182 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 15.8536ms
2025-08-22 08:35:03.191 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 08:35:03.194 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 08:35:03.195 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 08:35:03.195 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 08:35:03.198 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 08:35:03.203 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.209 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 08:35:03.216 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.227 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.233 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.241 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.243 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 51.8084ms
2025-08-22 08:35:03.250 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.252 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 58.2786ms
2025-08-22 08:35:03.255 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 59.7004ms
2025-08-22 08:35:03.258 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 62.2026ms
2025-08-22 08:35:03.261 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 63.0744ms
2025-08-22 08:35:03.269 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 08:35:03.274 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 08:35:03.293 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:35:03.306 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.310 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:03.314 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.317 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 08:35:03.327 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 08:35:03.328 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:03.328 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.335 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend) - Validation state: "Valid"
2025-08-22 08:35:03.336 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:03.346 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:35:03.350 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:03.385 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.400 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.6693ms.
2025-08-22 08:35:03.407 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 08:35:03.410 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:03.414 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 94.7639ms
2025-08-22 08:35:03.414 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:03.416 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 08:35:03.418 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.418 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 08:35:03.425 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 86.2322ms.
2025-08-22 08:35:03.429 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.434 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 224.9809ms
2025-08-22 08:35:03.441 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:03.443 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 08:35:03.447 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.450 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 116.2228ms
2025-08-22 08:35:03.451 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 08:35:03.451 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:03.461 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 113.0082ms.
2025-08-22 08:35:03.463 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 08:35:03.467 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.473 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 08:35:03.475 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:03.476 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 207.5481ms
2025-08-22 08:35:03.478 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 08:35:03.482 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:03.482 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 137.1674ms
2025-08-22 08:35:03.490 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:35:03.492 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:03.497 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.498 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.502 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.507 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend) - Validation state: "Valid"
2025-08-22 08:35:03.508 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 215.4232ms
2025-08-22 08:35:03.512 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 32.5964ms.
2025-08-22 08:35:03.514 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.519 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:03.525 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 08:35:03.527 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:03.532 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15.7889ms.
2025-08-22 08:35:03.534 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 63.1963ms
2025-08-22 08:35:03.538 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:35:03.541 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:03.543 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 08:35:03.547 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:03.547 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 41.1915ms
2025-08-22 08:35:03.549 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 132.6169ms
2025-08-22 08:35:03.556 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 08:35:03.558 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.564 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 112.5568ms
2025-08-22 08:35:03.570 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.579 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.9201ms.
2025-08-22 08:35:03.582 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:03.584 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 47.7329ms
2025-08-22 08:35:03.585 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:35:03.586 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.592 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.594 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 103.8045ms
2025-08-22 08:35:03.596 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.601 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:03.607 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:35:03.610 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:03.615 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.625 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.630 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 20.9064ms.
2025-08-22 08:35:03.632 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:03.634 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 27.9915ms
2025-08-22 08:35:03.639 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:35:03.644 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.648 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.650 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 65.1314ms
2025-08-22 08:35:03.652 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.662 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:03.665 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:35:03.672 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:03.680 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.686 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.693 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.2639ms.
2025-08-22 08:35:03.696 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:03.698 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 33.7999ms
2025-08-22 08:35:03.699 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:35:03.701 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.708 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.710 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 70.8406ms
2025-08-22 08:35:03.713 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.719 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:03.726 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:35:03.730 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:03.740 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.746 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.749 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.0973ms.
2025-08-22 08:35:03.758 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:03.760 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 34.121ms
2025-08-22 08:35:03.762 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.763 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:35:03.764 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 64.662ms
2025-08-22 08:35:03.769 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:03.779 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.781 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:03.785 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:35:03.809 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:03.814 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.822 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:03.828 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 41.5542ms.
2025-08-22 08:35:03.831 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:03.834 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 49.4172ms
2025-08-22 08:35:03.838 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:03.840 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 79.0555ms
2025-08-22 08:35:25.405 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 08:35:25.405 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 08:35:25.411 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:25.417 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:25.419 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 13.5139ms
2025-08-22 08:35:25.421 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 15.2599ms
2025-08-22 08:35:25.434 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:35:25.439 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:25.443 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:25.447 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:25.453 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:35:25.507 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:25.564 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:25.792 +02:00 [INF] Executed DbCommand (221ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:25.799 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 343.4557ms.
2025-08-22 08:35:25.804 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:25.806 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 354.7774ms
2025-08-22 08:35:25.807 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:35:25.808 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:25.813 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:25.815 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 380.6262ms
2025-08-22 08:35:25.817 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:25.822 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/history - null null
2025-08-22 08:35:25.823 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:25.827 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:25.830 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:35:25.831 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/history - 204 null null 8.9007ms
2025-08-22 08:35:25.838 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/history - null null
2025-08-22 08:35:25.842 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:25.844 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceHistory (backend)'
2025-08-22 08:35:25.855 +02:00 [INF] Route matched with {action = "GetAttendanceHistory", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceHistory() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:25.858 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceHistory (backend) - Validation state: "Valid"
2025-08-22 08:35:25.860 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:25.875 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:25.928 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:25.931 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:25.937 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:35:25.941 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 108.134ms.
2025-08-22 08:35:25.943 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:25.945 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 115.7082ms
2025-08-22 08:35:25.947 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:35:25.948 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 140.7722ms
2025-08-22 08:35:25.953 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceHistory (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 93.4545ms.
2025-08-22 08:35:25.956 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:25.957 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceHistory (backend) in 99.6515ms
2025-08-22 08:35:25.959 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceHistory (backend)'
2025-08-22 08:35:25.960 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/history - 200 null application/json; charset=utf-8 122.6928ms
2025-08-22 08:35:25.965 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 08:35:25.969 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:25.970 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 5.2444ms
2025-08-22 08:35:25.974 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 08:35:25.978 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:35:25.980 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 08:35:25.982 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:35:25.986 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend) - Validation state: "Valid"
2025-08-22 08:35:26.005 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:35:26.014 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.6729ms.
2025-08-22 08:35:26.017 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:35:26.019 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 33.876ms
2025-08-22 08:35:26.021 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 08:35:26.023 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 48.7226ms
2025-08-22 08:36:11.598 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 08:36:11.601 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 08:36:11.602 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 08:36:11.604 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:36:11.612 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:36:11.617 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:36:11.622 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 23.3724ms
2025-08-22 08:36:11.624 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 22.6294ms
2025-08-22 08:36:11.625 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 23.2467ms
2025-08-22 08:36:11.631 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:36:11.640 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 08:36:11.647 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 08:36:11.652 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:36:11.657 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:36:11.661 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:36:11.665 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:36:11.666 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 08:36:11.667 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 08:36:11.670 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:36:11.673 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:36:11.675 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:36:11.679 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:36:11.681 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend) - Validation state: "Valid"
2025-08-22 08:36:11.688 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetDashboard (backend) - Validation state: "Valid"
2025-08-22 08:36:11.733 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:36:11.740 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:36:11.747 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:36:11.752 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceTimeframe (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 60.5516ms.
2025-08-22 08:36:11.756 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:36:11.757 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:36:11.760 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:36:11.760 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetDashboard (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 66.9948ms.
2025-08-22 08:36:11.762 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 80.955ms
2025-08-22 08:36:11.771 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 08:36:11.773 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 08:36:11.775 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 89.8828ms
2025-08-22 08:36:11.777 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 137.0395ms
2025-08-22 08:36:11.778 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 08:36:11.788 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 140.7274ms
2025-08-22 08:36:11.840 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:36:11.846 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 156.527ms.
2025-08-22 08:36:11.849 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:36:11.853 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 175.3137ms
2025-08-22 08:36:11.855 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:36:11.856 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:36:11.860 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:36:11.862 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 230.9121ms
2025-08-22 08:36:11.864 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:36:11.871 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:36:11.874 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:36:11.879 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:36:11.889 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:36:11.896 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:36:11.900 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.7215ms.
2025-08-22 08:36:11.905 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:36:11.909 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 35.1853ms
2025-08-22 08:36:11.912 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:36:11.914 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 58.8278ms
2025-08-22 08:36:11.923 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 08:36:11.927 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:36:11.929 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:36:11.931 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 08:36:11.939 +02:00 [INF] Executing action method backend.Controllers.AgentController.GetAttendanceStatus (backend) - Validation state: "Valid"
2025-08-22 08:36:11.944 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 08:36:11.956 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:36:11.960 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 08:36:11.964 +02:00 [INF] Executed action method backend.Controllers.AgentController.GetAttendanceStatus (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.4465ms.
2025-08-22 08:36:11.966 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:36:11.971 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 33.2171ms
2025-08-22 08:36:11.973 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 08:36:11.975 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 52.3518ms
2025-08-22 08:39:23.360 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 08:39:23.373 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:39:23.377 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 16.4925ms
2025-08-22 08:39:23.382 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 08:39:23.386 +02:00 [INF] CORS policy execution successful.
2025-08-22 08:39:23.392 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:39:23.395 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 08:39:23.438 +02:00 [INF] Executing action method backend.Controllers.AuthController.Login (backend) - Validation state: "Valid"
2025-08-22 08:39:23.442 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 08:39:23.451 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 08:39:23.456 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:39:23.458 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:39:44.563 +02:00 [ERR] External auth network error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 37
2025-08-22 08:39:44.599 +02:00 [ERR] External auth unreachable: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 37
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 104
2025-08-22 08:39:44.614 +02:00 [INF] Executed action method backend.Controllers.AuthController.Login (backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21172.6591ms.
2025-08-22 08:39:44.620 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType17`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:39:44.625 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21227.5ms
2025-08-22 08:39:44.627 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:39:44.629 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 503 null application/json; charset=utf-8 21246.9412ms
2025-08-22 08:43:57.451 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 08:43:57.474 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:43:57.481 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 08:43:57.516 +02:00 [INF] Executing action method backend.Controllers.AuthController.Login (backend) - Validation state: "Valid"
2025-08-22 08:43:57.519 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 08:43:57.528 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 08:43:57.531 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:43:57.533 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 08:44:18.597 +02:00 [ERR] External auth network error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 37
2025-08-22 08:44:18.623 +02:00 [ERR] External auth unreachable: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 37
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 104
2025-08-22 08:44:18.634 +02:00 [INF] Executed action method backend.Controllers.AuthController.Login (backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21115.7462ms.
2025-08-22 08:44:18.637 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType17`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 08:44:18.642 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21157.679ms
2025-08-22 08:44:18.643 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 08:44:18.644 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 503 null application/json; charset=utf-8 21194.6829ms
2025-08-22 08:46:25.456 +02:00 [INF] Application is shutting down...
2025-08-22 10:46:11.566 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 10:46:11.628 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 10:46:11.706 +02:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 10:46:11.795 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 10:46:11.809 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 10:46:11.816 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 10:46:11.891 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 10:46:11.904 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 10:46:11.933 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 10:46:12.004 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 10:46:12.371 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 10:46:12.454 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 10:46:12.477 +02:00 [INF] Hosting environment: Development
2025-08-22 10:46:12.502 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 11:13:25.495 +02:00 [INF] Application is shutting down...
2025-08-22 11:13:48.198 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:13:48.266 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 11:13:48.348 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 11:13:48.439 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 11:13:48.455 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:13:48.468 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 11:13:48.497 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 11:13:48.512 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 11:13:48.544 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 11:13:48.607 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 11:13:48.715 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 11:13:48.719 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 11:13:48.720 +02:00 [INF] Hosting environment: Development
2025-08-22 11:13:48.722 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 11:14:31.425 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 11:14:31.454 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-22 11:14:31.463 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:31.474 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 50.8574ms
2025-08-22 11:14:31.486 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 11:14:31.494 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:31.542 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 11:14:31.570 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 11:14:31.623 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 11:14:31.632 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 11:14:31.641 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 11:14:31.644 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 11:14:31.762 +02:00 [INF] Received HTTP response headers after 115.4545ms - 200
2025-08-22 11:14:31.764 +02:00 [INF] End processing HTTP request after 125.2316ms - 200
2025-08-22 11:14:32.062 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 11:14:32.269 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 11:14:32.330 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 11:14:32.339 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 11:14:32.347 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 11:14:32.373 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 11:14:32.383 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 807.6706ms
2025-08-22 11:14:32.387 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 11:14:32.394 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 908.0521ms
2025-08-22 11:14:39.832 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 11:14:39.842 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 11:14:39.842 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:39.849 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:39.849 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 17.1254ms
2025-08-22 11:14:39.850 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 8.5565ms
2025-08-22 11:14:39.864 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 11:14:39.874 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 11:14:39.877 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:39.885 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:39.885 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 11:14:39.885 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 11:14:39.888 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 23.9119ms
2025-08-22 11:14:39.890 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 15.4257ms
2025-08-22 11:14:39.896 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:39.897 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 11:14:39.900 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:39.912 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 11:14:39.925 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:14:39.926 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 41.155ms
2025-08-22 11:14:39.930 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:39.932 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 46.4398ms
2025-08-22 11:14:39.941 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:39.949 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:40.111 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 11:14:40.111 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.111 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:14:40.128 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:40.128 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:40.128 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:40.249 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:14:40.257 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:14:40.290 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:14:40.320 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.328 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.330 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 11:14:40.348 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:40.362 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 230.9265ms
2025-08-22 11:14:40.365 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 11:14:40.365 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:14:40.367 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 233.3288ms
2025-08-22 11:14:40.371 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:40.373 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 11:14:40.374 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 477.4194ms
2025-08-22 11:14:40.376 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 11:14:40.382 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:40.385 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:14:40.394 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 11:14:40.391 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 478.9145ms
2025-08-22 11:14:40.394 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:40.396 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:40.415 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:14:40.415 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:14:40.426 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:40.426 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.428 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 24.6452ms
2025-08-22 11:14:40.432 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 11:14:40.433 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:14:40.434 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 26.9888ms
2025-08-22 11:14:40.438 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 72.7133ms
2025-08-22 11:14:40.440 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 11:14:40.448 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 74.7277ms
2025-08-22 11:14:40.490 +02:00 [INF] Executed DbCommand (115ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.495 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:40.506 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 365.5196ms
2025-08-22 11:14:40.508 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:14:40.509 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.512 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:40.513 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 588.0738ms
2025-08-22 11:14:40.515 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.522 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:40.528 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:14:40.532 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.539 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.542 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:40.545 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 20.0706ms
2025-08-22 11:14:40.547 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:14:40.548 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.555 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:40.556 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 47.9593ms
2025-08-22 11:14:40.559 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.566 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:40.577 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:14:40.583 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.592 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.596 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:40.598 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 26.0348ms
2025-08-22 11:14:40.599 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:14:40.600 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.609 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:40.611 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 64.0453ms
2025-08-22 11:14:40.613 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.624 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:40.631 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:14:40.644 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.649 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.656 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:40.658 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 30.0273ms
2025-08-22 11:14:40.660 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:14:40.661 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.664 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:40.665 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 66.0539ms
2025-08-22 11:14:40.668 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.677 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:40.690 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:14:40.715 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.724 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.728 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:40.731 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 50.2942ms
2025-08-22 11:14:40.732 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:14:40.734 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.741 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:40.743 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 82.6611ms
2025-08-22 11:14:40.745 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.751 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:40.764 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:14:40.777 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.782 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:40.790 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:40.793 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 34.0304ms
2025-08-22 11:14:40.797 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:40.800 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 67.4593ms
2025-08-22 11:14:52.487 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 11:14:52.491 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:52.495 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 7.7186ms
2025-08-22 11:14:52.502 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:14:52.512 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:52.514 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:52.518 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:52.530 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - null null
2025-08-22 11:14:52.535 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:52.536 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - 204 null null 5.9326ms
2025-08-22 11:14:52.540 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:14:52.541 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/notifications - application/json null
2025-08-22 11:14:52.549 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:14:52.552 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-22 11:14:52.559 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:52.562 +02:00 [INF] Route matched with {action = "GetAgentNotifications", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAgentNotifications() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:14:52.572 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:14:52.579 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:52.583 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 61.6603ms
2025-08-22 11:14:52.587 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:14:52.589 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 86.7542ms
2025-08-22 11:14:52.600 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:14:52.679 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 11:14:52.684 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType16`1[[System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:52.688 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAgentNotifications (backend) in 119.6495ms
2025-08-22 11:14:52.691 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-22 11:14:52.693 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/notifications - 200 null application/json; charset=utf-8 151.9171ms
2025-08-22 11:15:07.421 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 11:15:07.426 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:07.429 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 7.1115ms
2025-08-22 11:15:07.434 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 11:15:07.440 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:07.441 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 11:15:07.442 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 11:15:07.446 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0782508109
2025-08-22 11:15:07.448 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0782508109; proxy=none
2025-08-22 11:15:07.451 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 11:15:07.452 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 11:15:07.473 +02:00 [INF] Received HTTP response headers after 19.8845ms - 200
2025-08-22 11:15:07.475 +02:00 [INF] End processing HTTP request after 24.0234ms - 200
2025-08-22 11:15:07.487 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 11:15:07.500 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 11:15:07.506 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 11:15:07.508 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 11:15:07.510 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 65.7286ms
2025-08-22 11:15:07.512 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 11:15:07.514 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 80.2123ms
2025-08-22 11:15:08.676 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 11:15:08.677 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 11:15:08.682 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:08.688 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 11.8018ms
2025-08-22 11:15:08.689 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:08.695 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 18.4907ms
2025-08-22 11:15:08.696 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 11:15:08.707 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:08.712 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 11:15:08.723 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:15:08.794 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:15:08.840 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:15:08.890 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:15:08.961 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:15:09.007 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:15:09.013 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 11:15:09.029 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 300.5564ms
2025-08-22 11:15:09.033 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 11:15:09.037 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 340.686ms
2025-08-22 11:15:09.037 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 11:15:09.045 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:09.049 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 11:15:09.052 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:15:09.074 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:15:09.093 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:15:09.108 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:15:09.119 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:15:09.132 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:15:09.136 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 11:15:09.138 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 82.8096ms
2025-08-22 11:15:09.140 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 11:15:09.142 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 104.9402ms
2025-08-22 11:15:16.293 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-22 11:15:16.300 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:16.303 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 10.4899ms
2025-08-22 11:15:16.310 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-22 11:15:16.316 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:16.318 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 11:15:16.322 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:15:16.346 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:15:16.361 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:15:16.366 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 11:15:16.370 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 45.062ms
2025-08-22 11:15:16.372 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 11:15:16.374 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 63.8482ms
2025-08-22 11:15:30.072 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:15:30.075 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:30.076 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 3.9581ms
2025-08-22 11:15:30.080 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:15:30.084 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:30.085 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:15:30.091 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:15:30.120 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:15:30.137 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:15:30.150 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:15:30.158 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:15:30.163 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:15:30.168 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:15:30.170 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:15:30.181 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 87.4072ms
2025-08-22 11:15:30.183 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:15:30.185 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 200 null application/json; charset=utf-8 104.5458ms
2025-08-22 11:15:44.159 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard/timeframe - null null
2025-08-22 11:15:44.161 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:44.162 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard/timeframe - 204 null null 3.9584ms
2025-08-22 11:15:44.166 +02:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5238/api/manager/dashboard/timeframe - application/json 39
2025-08-22 11:15:44.167 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:44.169 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend)'
2025-08-22 11:15:44.174 +02:00 [INF] Route matched with {action = "UpdateAttendanceTimeframe", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO+Timeframe]] UpdateAttendanceTimeframe(Timeframe) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:15:44.194 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:15:44.214 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:15:44.222 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:15:44.265 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p8='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int16), @p4='?' (DbType = Time), @p5='?' (DbType = Int64), @p6='?' (DbType = Time), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [attendance_timeframes] SET [applies_to_all_agents] = @p0, [break_duration] = @p1, [created_at] = @p2, [day_of_week] = @p3, [end_time] = @p4, [manager_id] = @p5, [start_time] = @p6, [updated_at] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-08-22 11:15:44.378 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-22 11:15:44.391 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO+Timeframe'.
2025-08-22 11:15:44.393 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend) in 216.6367ms
2025-08-22 11:15:44.394 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend)'
2025-08-22 11:15:44.395 +02:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5238/api/manager/dashboard/timeframe - 200 null application/json; charset=utf-8 229.3932ms
2025-08-22 11:15:44.400 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:15:44.402 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:44.403 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 3.4137ms
2025-08-22 11:15:44.407 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:15:44.409 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:15:44.410 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:15:44.411 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:15:44.414 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:15:44.423 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:15:44.432 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:15:44.441 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:15:44.445 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:15:44.448 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:15:44.451 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:15:44.454 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 41.0375ms
2025-08-22 11:15:44.456 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:15:44.458 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 200 null application/json; charset=utf-8 51.1518ms
2025-08-22 11:16:01.729 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 11:16:01.735 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:01.736 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 7.0639ms
2025-08-22 11:16:01.741 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 11:16:01.743 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:01.744 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 11:16:01.745 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 11:16:01.749 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 11:16:01.750 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 11:16:01.752 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 11:16:01.752 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 11:16:01.810 +02:00 [INF] Received HTTP response headers after 57.0422ms - 200
2025-08-22 11:16:01.812 +02:00 [INF] End processing HTTP request after 60.5568ms - 200
2025-08-22 11:16:01.816 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 11:16:01.823 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 11:16:01.832 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 11:16:01.836 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 11:16:01.841 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 11:16:01.844 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 11:16:01.845 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 97.9186ms
2025-08-22 11:16:01.847 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 11:16:01.847 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 106.5608ms
2025-08-22 11:16:01.981 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 11:16:01.986 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:01.987 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 11:16:01.989 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 8.2511ms
2025-08-22 11:16:01.994 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 11:16:01.995 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:01.996 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 11:16:01.997 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 11:16:01.998 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 11:16:02.012 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.014 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 26.8305ms
2025-08-22 11:16:02.020 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.022 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 11:16:02.029 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.037 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.038 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 44.2407ms
2025-08-22 11:16:02.045 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 11:16:02.047 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 50.8686ms
2025-08-22 11:16:02.051 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.052 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 55.0378ms
2025-08-22 11:16:02.053 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 55.7516ms
2025-08-22 11:16:02.069 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.080 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 11:16:02.084 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:16:02.092 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:02.093 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:16:02.095 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.098 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:02.098 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:02.099 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.103 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:02.111 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.111 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:02.111 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:16:02.113 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 11:16:02.116 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.117 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:02.118 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 21.7621ms
2025-08-22 11:16:02.119 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 11:16:02.123 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 23.4308ms
2025-08-22 11:16:02.124 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 11:16:02.127 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 11:16:02.129 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.130 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:16:02.131 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.131 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 109.2039ms
2025-08-22 11:16:02.134 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.136 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 11:16:02.136 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 91.5625ms
2025-08-22 11:16:02.140 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:02.144 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:16:02.145 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:02.149 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 43.6668ms
2025-08-22 11:16:02.150 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:02.150 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:16:02.153 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.153 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:02.159 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.160 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:16:02.160 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 75.4905ms
2025-08-22 11:16:02.165 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.166 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.167 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:02.171 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:02.177 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 11:16:02.178 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 24.1811ms
2025-08-22 11:16:02.182 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 30.8965ms
2025-08-22 11:16:02.183 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:02.184 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:16:02.185 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 11:16:02.188 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.188 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 61.0965ms
2025-08-22 11:16:02.190 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 70.3994ms
2025-08-22 11:16:02.198 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.204 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:02.207 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 25.7518ms
2025-08-22 11:16:02.209 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.210 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:16:02.211 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 60.8641ms
2025-08-22 11:16:02.214 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.218 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.219 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:02.225 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:02.230 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.234 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.236 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:02.237 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 17.199ms
2025-08-22 11:16:02.240 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.240 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:16:02.243 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 33.0723ms
2025-08-22 11:16:02.247 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.251 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.252 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:02.259 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:02.262 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.265 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.267 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:02.268 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 14.3535ms
2025-08-22 11:16:02.270 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:16:02.270 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.274 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.275 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 35.2744ms
2025-08-22 11:16:02.278 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.282 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:02.285 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:02.288 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.293 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.296 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:02.297 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 13.593ms
2025-08-22 11:16:02.299 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:16:02.299 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.301 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:02.302 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 32.6947ms
2025-08-22 11:16:02.304 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.310 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:02.313 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:02.317 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.320 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:02.324 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:02.326 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 14.3248ms
2025-08-22 11:16:02.328 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:02.330 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 31.2487ms
2025-08-22 11:16:10.790 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance - null null
2025-08-22 11:16:10.801 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:10.801 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance - 204 null null 10.992ms
2025-08-22 11:16:10.804 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/agent/attendance - application/json 40
2025-08-22 11:16:10.807 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:10.808 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.MarkAttendance (backend)'
2025-08-22 11:16:10.812 +02:00 [INF] Route matched with {action = "MarkAttendance", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] MarkAttendance(System.Collections.Generic.Dictionary`2[System.String,System.String]) on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:10.833 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:10.846 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:10.855 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:16:10.879 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 255), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [attendance] ([agent_id], [Location], [Sector], [Timestamp])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-08-22 11:16:10.888 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-22 11:16:10.891 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:16:10.894 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:10.896 +02:00 [INF] Executed action backend.Controllers.AgentController.MarkAttendance (backend) in 81.3571ms
2025-08-22 11:16:10.897 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.MarkAttendance (backend)'
2025-08-22 11:16:10.898 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/agent/attendance - 201 null application/json; charset=utf-8 93.8849ms
2025-08-22 11:16:10.902 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 11:16:10.904 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:10.905 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 3.6181ms
2025-08-22 11:16:10.909 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:16:10.912 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:10.913 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:10.914 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:10.919 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:10.932 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:10.944 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:10.946 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:10.948 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 29.885ms
2025-08-22 11:16:10.949 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:10.951 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 42.0357ms
2025-08-22 11:16:23.804 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=weekly - null null
2025-08-22 11:16:23.805 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 11:16:23.813 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:23.816 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:23.817 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=weekly - 204 null null 12.4026ms
2025-08-22 11:16:23.818 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 13.1135ms
2025-08-22 11:16:23.826 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:16:23.829 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=weekly - null null
2025-08-22 11:16:23.832 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:23.834 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:16:23.836 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:23.837 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-22 11:16:23.838 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:23.846 +02:00 [INF] Route matched with {action = "GetPerformance", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetPerformance(System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller backend.Controllers.AgentController (backend).
2025-08-22 11:16:23.858 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:23.859 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:16:23.871 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:23.873 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:23.885 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:23.886 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:16:23.889 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:16:23.892 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 50.6581ms
2025-08-22 11:16:23.894 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:16:23.895 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:16:23.895 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 69.9207ms
2025-08-22 11:16:23.900 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentPerformanceDTO'.
2025-08-22 11:16:23.910 +02:00 [INF] Executed action backend.Controllers.AgentController.GetPerformance (backend) in 61.4965ms
2025-08-22 11:16:23.912 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-22 11:16:23.914 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=weekly - 200 null application/json; charset=utf-8 85.2416ms
2025-08-22 11:17:03.395 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=monthly - null null
2025-08-22 11:17:03.400 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:03.401 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=monthly - 204 null null 6.5696ms
2025-08-22 11:17:03.409 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=monthly - null null
2025-08-22 11:17:03.411 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:03.413 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-22 11:17:03.414 +02:00 [INF] Route matched with {action = "GetPerformance", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetPerformance(System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller backend.Controllers.AgentController (backend).
2025-08-22 11:17:03.430 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:17:03.440 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:03.449 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:17:03.453 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:03.455 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentPerformanceDTO'.
2025-08-22 11:17:03.457 +02:00 [INF] Executed action backend.Controllers.AgentController.GetPerformance (backend) in 41.1451ms
2025-08-22 11:17:03.458 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-22 11:17:03.459 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=monthly - 200 null application/json; charset=utf-8 50.4976ms
2025-08-22 11:17:15.463 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 11:17:15.466 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 11:17:15.470 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:15.476 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:15.479 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 16.1607ms
2025-08-22 11:17:15.482 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 16.6006ms
2025-08-22 11:17:15.500 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:17:15.505 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:15.507 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:17:15.508 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:17:15.519 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:17:15.530 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:15.539 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:15.544 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:17:15.545 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 34.3932ms
2025-08-22 11:17:15.547 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:17:15.547 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:17:15.552 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:15.553 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 52.7634ms
2025-08-22 11:17:15.554 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:17:15.559 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:17:15.565 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:17:15.569 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:15.573 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:15.577 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:17:15.581 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 18.5534ms
2025-08-22 11:17:15.588 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:17:15.591 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 44.1647ms
2025-08-22 11:17:15.609 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/history - null null
2025-08-22 11:17:15.613 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:15.614 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/history - 204 null null 4.8659ms
2025-08-22 11:17:15.621 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/history - null null
2025-08-22 11:17:15.625 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:15.628 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceHistory (backend)'
2025-08-22 11:17:15.635 +02:00 [INF] Route matched with {action = "GetAttendanceHistory", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceHistory() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:17:15.641 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:17:15.645 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:15.659 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:17:15.673 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:17:15.675 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceHistory (backend) in 37.9583ms
2025-08-22 11:17:15.677 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceHistory (backend)'
2025-08-22 11:17:15.678 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/history - 200 null application/json; charset=utf-8 56.7733ms
2025-08-22 11:17:15.682 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 11:17:15.685 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:15.686 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 3.7071ms
2025-08-22 11:17:15.693 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 11:17:15.695 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:15.696 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:17:15.697 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:17:15.701 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:17:15.703 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:17:15.705 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 5.6891ms
2025-08-22 11:17:15.707 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:17:15.710 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 17.5388ms
2025-08-22 11:17:26.547 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 11:17:26.552 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 11:17:26.552 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:26.553 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 11:17:26.561 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:26.566 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 18.9736ms
2025-08-22 11:17:26.574 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:26.578 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 26.4892ms
2025-08-22 11:17:26.588 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 11:17:26.589 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 35.9287ms
2025-08-22 11:17:26.597 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 11:17:26.599 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:26.603 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:17:26.605 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:26.609 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 11:17:26.612 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:26.615 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:17:26.616 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:17:26.618 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:17:26.620 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:17:26.626 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:17:26.645 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:17:26.649 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:17:26.671 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:17:26.681 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:17:26.682 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:26.684 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 53.64ms
2025-08-22 11:17:26.688 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 11:17:26.688 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:26.689 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 11:17:26.693 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 70.8197ms
2025-08-22 11:17:26.700 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 103.1375ms
2025-08-22 11:17:26.704 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 11:17:26.713 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:26.714 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 125.6707ms
2025-08-22 11:17:26.718 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:17:26.726 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 89.1245ms
2025-08-22 11:17:26.731 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:17:26.733 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 129.6974ms
2025-08-22 11:17:26.754 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:17:26.761 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:26.765 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:17:26.767 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:17:26.771 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:17:26.781 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:26.786 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:26.790 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:17:26.794 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 24.6508ms
2025-08-22 11:17:26.797 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:17:26.799 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 44.775ms
2025-08-22 11:17:26.804 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 11:17:26.809 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:17:26.812 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:17:26.813 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 11:17:26.817 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 11:17:26.820 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:26.828 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:17:26.832 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:17:26.833 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 18.0946ms
2025-08-22 11:17:26.835 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 11:17:26.837 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 32.7583ms
2025-08-22 11:18:29.601 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 11:18:29.604 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:18:29.605 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 4.0619ms
2025-08-22 11:18:29.610 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 11:18:29.614 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:18:29.615 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 11:18:29.616 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 11:18:29.622 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0782508109
2025-08-22 11:18:29.628 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0782508109; proxy=none
2025-08-22 11:18:29.631 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 11:18:29.632 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 11:18:29.756 +02:00 [INF] Received HTTP response headers after 122.066ms - 200
2025-08-22 11:18:29.758 +02:00 [INF] End processing HTTP request after 127.764ms - 200
2025-08-22 11:18:29.770 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 11:18:29.802 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 11:18:29.838 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 11:18:29.849 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 11:18:29.854 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 235.8597ms
2025-08-22 11:18:29.860 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 11:18:29.863 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 253.2612ms
2025-08-22 11:18:30.773 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 11:18:30.779 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 11:18:30.780 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:18:30.785 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:18:30.787 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 13.9289ms
2025-08-22 11:18:30.790 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 10.3479ms
2025-08-22 11:18:30.823 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 11:18:30.830 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:18:30.838 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 11:18:31.023 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:18:31.093 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:18:31.149 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:18:31.215 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:18:31.290 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:18:31.336 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:18:31.355 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 11:18:31.368 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 327.8199ms
2025-08-22 11:18:31.375 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 11:18:31.378 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 11:18:31.389 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 565.9547ms
2025-08-22 11:18:31.397 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:18:31.432 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 11:18:31.463 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:18:31.636 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:18:31.705 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:18:31.768 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:18:31.885 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:18:31.926 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 11:18:31.935 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 11:18:31.940 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 380.38ms
2025-08-22 11:18:31.945 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 11:18:31.947 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 568.9727ms
2025-08-22 11:18:38.749 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-22 11:18:38.755 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:18:38.757 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 7.5788ms
2025-08-22 11:18:38.765 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-22 11:18:38.772 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:18:38.777 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 11:18:38.781 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:18:38.831 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:18:38.908 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:18:38.921 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 11:18:38.926 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 135.9962ms
2025-08-22 11:18:38.931 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 11:18:38.943 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 177.7887ms
2025-08-22 11:18:43.192 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:18:43.196 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:18:43.199 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 7.0193ms
2025-08-22 11:18:43.205 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:18:43.217 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:18:43.221 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:18:43.224 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:18:43.305 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:18:43.444 +02:00 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:18:43.501 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:18:43.607 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:18:43.618 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 375.7634ms
2025-08-22 11:18:43.623 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:18:43.630 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 500 null application/json; charset=utf-8 424.2461ms
2025-08-22 11:19:15.986 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:19:15.993 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:19:15.997 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 10.4932ms
2025-08-22 11:19:16.015 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:19:16.021 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:19:16.026 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:19:16.035 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:19:16.071 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:19:16.113 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:19:16.158 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:19:16.166 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:19:16.171 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 130.7511ms
2025-08-22 11:19:16.178 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:19:16.181 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 500 null application/json; charset=utf-8 165.4105ms
2025-08-22 11:20:22.684 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:20:22.688 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:20:22.689 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 5.2789ms
2025-08-22 11:20:22.697 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:20:22.701 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:20:22.704 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:20:22.706 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:20:22.730 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:20:22.783 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:20:22.918 +02:00 [INF] Executed DbCommand (120ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:20:22.930 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:20:22.934 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 225.3562ms
2025-08-22 11:20:22.936 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:20:22.941 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 500 null application/json; charset=utf-8 244.493ms
2025-08-22 11:24:57.610 +02:00 [INF] Application is shutting down...
2025-08-22 11:27:32.895 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:27:32.960 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 11:27:33.182 +02:00 [INF] Executed DbCommand (202ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 11:27:33.345 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 11:27:33.353 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:27:33.360 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 11:27:33.387 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 11:27:33.436 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 11:27:33.468 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 11:27:33.695 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 11:27:33.903 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 11:27:33.979 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 11:27:33.984 +02:00 [INF] Hosting environment: Development
2025-08-22 11:27:33.993 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 11:28:42.543 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:28:42.631 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-22 11:28:42.732 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:28:42.791 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 248.5357ms
2025-08-22 11:28:42.840 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:28:42.870 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:28:43.085 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:28:43.112 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:28:43.776 +02:00 [INF] Executed DbCommand (159ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:28:44.049 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:28:44.312 +02:00 [INF] Executed DbCommand (106ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:28:44.416 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:28:44.441 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 1320.6815ms
2025-08-22 11:28:44.454 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:28:44.475 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 500 null application/json; charset=utf-8 1634.1962ms
2025-08-22 11:31:50.415 +02:00 [INF] Application is shutting down...
2025-08-22 11:32:08.691 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:32:08.775 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 11:32:08.829 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 11:32:08.941 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 11:32:08.953 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:32:08.965 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 11:32:08.997 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 11:32:09.026 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 11:32:09.081 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 11:32:09.208 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 11:32:09.330 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 11:32:09.333 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 11:32:09.334 +02:00 [INF] Hosting environment: Development
2025-08-22 11:32:09.335 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 11:32:17.045 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:32:17.092 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-22 11:32:17.129 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:32:17.199 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 151.9941ms
2025-08-22 11:32:17.254 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:32:17.291 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:32:17.508 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:32:17.542 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:32:18.201 +02:00 [INF] Executed DbCommand (92ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:32:18.473 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:32:18.600 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:32:18.632 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:32:18.684 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 1125.1806ms
2025-08-22 11:32:18.699 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:32:18.712 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 500 null application/json; charset=utf-8 1457.7949ms
2025-08-22 11:39:40.016 +02:00 [INF] Application is shutting down...
2025-08-22 11:40:05.471 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:40:05.660 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 11:40:05.828 +02:00 [INF] Executed DbCommand (156ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 11:40:05.953 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 11:40:05.965 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:40:05.969 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 11:40:06.046 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 11:40:06.061 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 11:40:06.077 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 11:40:06.210 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 11:40:06.358 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 11:40:06.363 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 11:40:06.365 +02:00 [INF] Hosting environment: Development
2025-08-22 11:40:06.366 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 11:40:24.585 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:40:24.627 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-22 11:40:24.633 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:40:24.646 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 63.6804ms
2025-08-22 11:40:24.660 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:40:24.670 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:40:24.984 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:40:25.037 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:40:25.734 +02:00 [INF] Executed DbCommand (101ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:40:26.050 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:40:26.252 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:40:26.337 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:40:26.412 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 1362.7416ms
2025-08-22 11:40:26.427 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:40:26.479 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 500 null application/json; charset=utf-8 1817.5831ms
2025-08-22 11:43:40.077 +02:00 [INF] Application is shutting down...
2025-08-22 11:44:02.651 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:44:02.731 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 11:44:02.885 +02:00 [INF] Executed DbCommand (140ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 11:44:02.970 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 11:44:02.978 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:44:02.981 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 11:44:03.041 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 11:44:03.055 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 11:44:03.069 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 11:44:03.141 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 11:44:03.229 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 11:44:03.232 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 11:44:03.233 +02:00 [INF] Hosting environment: Development
2025-08-22 11:44:03.234 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 11:44:21.879 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:44:22.021 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-22 11:44:22.057 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:44:22.142 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 262.2109ms
2025-08-22 11:44:22.217 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:44:22.256 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:44:22.527 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:44:22.558 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:44:23.315 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:44:23.648 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:44:23.840 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:23.958 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:24.007 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:24.042 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:24.085 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:24.132 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:24.162 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:44:24.256 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 1688.9508ms
2025-08-22 11:44:24.259 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:44:24.271 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 200 null application/json; charset=utf-8 2054.3746ms
2025-08-22 11:44:47.640 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-21 - null null
2025-08-22 11:44:47.647 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:44:47.651 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-21 - 204 null null 11.125ms
2025-08-22 11:44:47.661 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-21 - application/json null
2025-08-22 11:44:47.672 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:44:47.706 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:44:47.716 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:44:47.883 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:44:47.897 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:44:47.909 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:47.932 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:47.949 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:47.966 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:47.976 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:47.989 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:44:48.002 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 272.1949ms
2025-08-22 11:44:48.010 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:44:48.020 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-21 - 200 null application/json; charset=utf-8 357.6698ms
2025-08-22 11:44:51.189 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:44:51.194 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:44:51.195 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 6.0469ms
2025-08-22 11:44:51.203 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:44:51.212 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:44:51.248 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:44:51.265 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:44:51.412 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:44:51.437 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:44:51.457 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:51.561 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:51.588 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:51.628 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:51.672 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:51.720 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:51.731 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:44:51.738 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 454.8626ms
2025-08-22 11:44:51.742 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:44:51.748 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 200 null application/json; charset=utf-8 544.3563ms
2025-08-22 11:44:54.093 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-21 - null null
2025-08-22 11:44:54.102 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:44:54.105 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-21 - 204 null null 12.5587ms
2025-08-22 11:44:54.116 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-21 - application/json null
2025-08-22 11:44:54.123 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:44:54.125 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:44:54.127 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:44:54.176 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:44:54.220 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:44:54.370 +02:00 [INF] Executed DbCommand (129ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:54.378 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:54.382 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:54.386 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:54.392 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:54.400 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:44:54.406 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 273.5075ms
2025-08-22 11:44:54.410 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:44:54.414 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-21 - 200 null application/json; charset=utf-8 297.1258ms
2025-08-22 11:44:57.642 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:44:57.645 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:44:57.646 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 4.5716ms
2025-08-22 11:44:57.655 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:44:57.663 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:44:57.665 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:44:57.667 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:44:57.702 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:44:57.734 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:44:57.783 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:57.840 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:57.871 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:57.882 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:57.903 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:44:57.928 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:44:57.945 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:44:57.954 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 284.0065ms
2025-08-22 11:44:57.961 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:44:57.976 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 200 null application/json; charset=utf-8 318.4582ms
2025-08-22 11:45:01.372 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-01 - null null
2025-08-22 11:45:01.377 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:45:01.379 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-01 - 204 null null 6.3488ms
2025-08-22 11:45:01.387 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-01 - application/json null
2025-08-22 11:45:01.393 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:45:01.400 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:45:01.404 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:45:01.455 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:45:01.474 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:45:01.500 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:45:01.522 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:45:01.546 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 135.0334ms
2025-08-22 11:45:01.555 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:45:01.561 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-01 - 200 null application/json; charset=utf-8 173.5608ms
2025-08-22 11:45:04.302 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - null null
2025-08-22 11:45:04.309 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:45:04.313 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-22 - 204 null null 10.1051ms
2025-08-22 11:45:04.320 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - application/json null
2025-08-22 11:45:04.323 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:45:04.324 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:45:04.328 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:45:04.337 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 11:45:04.352 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:45:04.365 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:45:04.384 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:45:04.403 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:45:04.424 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:45:04.452 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:45:04.473 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 11:45:04.486 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:45:04.495 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 161.4022ms
2025-08-22 11:45:04.498 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-22 11:45:04.501 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-22 - 200 null application/json; charset=utf-8 180.6653ms
2025-08-22 11:45:20.845 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 11:45:20.853 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:45:20.857 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 11.7835ms
2025-08-22 11:45:20.865 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 11:45:20.870 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:45:20.876 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 11:45:20.905 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:45:21.191 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 11:45:21.618 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 11:45:21.625 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:45:21.638 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 705.1383ms
2025-08-22 11:45:21.645 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 11:45:21.652 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 786.1223ms
2025-08-22 11:46:22.782 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 11:46:22.785 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:46:22.787 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 5.107ms
2025-08-22 11:46:22.796 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/notifications - application/json 116
2025-08-22 11:46:22.804 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:46:22.808 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 11:46:22.835 +02:00 [INF] Route matched with {action = "SendManagerNotification", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] SendManagerNotification(backend.DTOs.Notification.NotificationRequestDTO) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:46:23.004 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 11:46:23.038 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-22 11:46:23.144 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-22 11:46:23.155 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-22 11:46:23.163 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-22 11:46:23.167 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-22 11:46:23.303 +02:00 [INF] Executed action backend.Controllers.ManagerController.SendManagerNotification (backend) in 462.6647ms
2025-08-22 11:46:23.306 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 11:46:23.311 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'User' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at backend.Repositories.NotificationRepository.AddAsync(Notification notification) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\NotificationRepository.cs:line 34
   at backend.Services.NotificationService.SendNotificationAsync(User sender, User recipient, String title, String message, Boolean viaEmail, Category category, Priority priority) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 42
   at backend.Services.NotificationService.SendCompleteNotificationAsync(User sender, User recipient, String title, String message, Boolean viaEmail, Category category, Priority priority) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 132
   at backend.Controllers.ManagerController.SendManagerNotification(NotificationRequestDTO body) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 1240
   at lambda_method519(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-22 11:46:23.506 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/notifications - 500 null application/json; charset=utf-8 709.4743ms
2025-08-22 11:50:24.685 +02:00 [INF] Application is shutting down...
2025-08-22 11:50:53.093 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:50:53.164 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 11:50:53.310 +02:00 [INF] Executed DbCommand (131ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 11:50:53.446 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 11:50:53.453 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 11:50:53.459 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 11:50:53.524 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 11:50:53.543 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 11:50:53.584 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 11:50:53.711 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 11:50:53.825 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 11:50:53.829 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 11:50:53.832 +02:00 [INF] Hosting environment: Development
2025-08-22 11:50:53.833 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 11:51:58.700 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 11:51:58.716 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-22 11:51:58.720 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:51:58.725 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 27.414ms
2025-08-22 11:51:58.731 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/notifications - application/json 116
2025-08-22 11:51:58.734 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:51:58.801 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 11:51:58.815 +02:00 [INF] Route matched with {action = "SendManagerNotification", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] SendManagerNotification(backend.DTOs.Notification.NotificationRequestDTO) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:51:59.067 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 11:51:59.148 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-22 11:51:59.178 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-22 11:51:59.187 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-22 11:51:59.197 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-22 11:51:59.212 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-22 11:51:59.327 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (Size = 4000), @p2='?' (Size = 20) (DbType = AnsiString), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int64), @p5='?' (DbType = Int64), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [notifications] ([Category], [Message], [Priority], [read_status], [recipient_id], [sender_id], [sent_at], [Status], [Title], [via_email])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-22 11:51:59.363 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-22 11:51:59.368 +02:00 [INF] WebSocket notification sent to null: salutations: hy agent lucky
2025-08-22 11:51:59.373 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:51:59.389 +02:00 [INF] Executed action backend.Controllers.ManagerController.SendManagerNotification (backend) in 571.421ms
2025-08-22 11:51:59.391 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 11:51:59.400 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/notifications - 201 null application/json; charset=utf-8 669.0107ms
2025-08-22 11:51:59.406 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 11:51:59.412 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:51:59.446 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 11:51:59.462 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:51:59.514 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 11:51:59.562 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 11:51:59.565 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:51:59.588 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 121.1801ms
2025-08-22 11:51:59.591 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 11:51:59.595 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 188.964ms
2025-08-22 11:54:16.893 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 11:54:16.902 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:54:16.908 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 16.3665ms
2025-08-22 11:54:16.916 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 11:54:16.923 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:54:16.954 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 11:54:16.959 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:54:17.092 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 11:54:17.149 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 11:54:17.162 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:54:17.167 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 202.388ms
2025-08-22 11:54:17.170 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 11:54:17.173 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 257.4007ms
2025-08-22 11:55:39.507 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 11:55:39.507 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-22 11:55:39.531 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:55:39.531 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:55:39.541 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 37.0329ms
2025-08-22 11:55:39.541 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 37.0387ms
2025-08-22 11:55:39.577 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 11:55:39.577 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-22 11:55:39.589 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:55:39.597 +02:00 [INF] CORS policy execution successful.
2025-08-22 11:55:39.632 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 11:55:39.637 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 11:55:39.645 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:55:39.727 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-22 11:55:39.894 +02:00 [INF] Executed DbCommand (189ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 11:55:39.966 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 11:55:39.977 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:55:39.989 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 338.6617ms
2025-08-22 11:55:39.994 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 11:55:39.999 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 421.688ms
2025-08-22 11:55:40.051 +02:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 11:55:40.348 +02:00 [INF] Executed DbCommand (225ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 11:55:40.365 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 11:55:40.426 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 695.4021ms
2025-08-22 11:55:40.428 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 11:55:40.430 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 852.6583ms
2025-08-22 12:09:14.924 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - null null
2025-08-22 12:09:15.092 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin|manager)
2025-08-22 12:09:15.193 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-22 12:09:15.204 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 401 0 null 284.9293ms
2025-08-22 12:11:26.151 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 12:11:26.160 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:11:26.166 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 15.0614ms
2025-08-22 12:11:26.176 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/notifications - application/json 105
2025-08-22 12:11:26.186 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:11:26.231 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 12:11:26.265 +02:00 [INF] Route matched with {action = "SendManagerNotification", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] SendManagerNotification(backend.DTOs.Notification.NotificationRequestDTO) on controller backend.Controllers.ManagerController (backend).
2025-08-22 12:11:26.620 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 12:11:26.864 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
2025-08-22 12:11:26.872 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:11:26.881 +02:00 [INF] Executed action backend.Controllers.ManagerController.SendManagerNotification (backend) in 601.1264ms
2025-08-22 12:11:26.884 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 12:11:26.886 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/notifications - 201 null application/json; charset=utf-8 710.7533ms
2025-08-22 12:11:26.901 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 12:11:26.918 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:11:26.948 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 12:11:26.979 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 12:11:27.162 +02:00 [INF] Executed DbCommand (121ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 12:11:27.286 +02:00 [INF] Executed DbCommand (109ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 12:11:27.298 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:11:27.301 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 288.7742ms
2025-08-22 12:11:27.305 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 12:11:27.308 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 407.1371ms
2025-08-22 12:17:11.156 +02:00 [INF] Application is shutting down...
2025-08-22 12:17:47.011 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 12:17:47.124 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 12:17:47.268 +02:00 [INF] Executed DbCommand (135ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 12:17:47.464 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 12:17:47.473 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 12:17:47.481 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 12:17:47.531 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 12:17:47.537 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 12:17:47.548 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 12:17:47.618 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 12:17:47.807 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 12:17:47.811 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 12:17:47.814 +02:00 [INF] Hosting environment: Development
2025-08-22 12:17:47.816 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 12:20:13.440 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/favicon.ico - null null
2025-08-22 12:20:13.589 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-22 12:20:13.898 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/favicon.ico - 404 0 null 471.3489ms
2025-08-22 12:20:13.921 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5238/favicon.ico, Response status code: 404
2025-08-22 12:20:17.741 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 12:20:17.756 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:20:17.770 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 29.5625ms
2025-08-22 12:20:17.790 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 12:20:17.805 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:20:18.132 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 12:20:18.305 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 12:20:20.584 +02:00 [INF] Executed DbCommand (285ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 12:20:21.064 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__sender_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[sender_id] = @__sender_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 12:20:21.281 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 12:20:21.371 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] IS NULL
ORDER BY [n].[sent_at] DESC
2025-08-22 12:20:21.386 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:20:21.473 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 3152.1036ms
2025-08-22 12:20:21.478 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 12:20:21.487 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 3696.9067ms
2025-08-22 12:21:24.681 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 12:21:24.687 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:24.687 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 6.4282ms
2025-08-22 12:21:24.697 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 12:21:24.701 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:24.704 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 12:21:24.711 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 12:21:24.778 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 12:21:24.790 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 12:21:24.798 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 12:21:24.800 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 12:21:24.927 +02:00 [INF] Received HTTP response headers after 125.2482ms - 200
2025-08-22 12:21:24.930 +02:00 [INF] End processing HTTP request after 132.7402ms - 200
2025-08-22 12:21:24.996 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 12:21:25.117 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 12:21:25.149 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 12:21:25.155 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 12:21:25.161 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 12:21:25.169 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 12:21:25.171 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 456.9259ms
2025-08-22 12:21:25.172 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 12:21:25.173 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 476.3309ms
2025-08-22 12:21:28.408 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 12:21:28.409 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 12:21:28.417 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.426 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.428 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 12:21:28.428 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 18.5155ms
2025-08-22 12:21:28.436 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.445 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 17.137ms
2025-08-22 12:21:28.437 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 12:21:28.440 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 12:21:28.447 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 12:21:28.436 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 22.0311ms
2025-08-22 12:21:28.456 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 12:21:28.461 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.487 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.466 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.471 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.480 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 12:21:28.461 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 12:21:28.489 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 51.9813ms
2025-08-22 12:21:28.493 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 52.6921ms
2025-08-22 12:21:28.502 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 12:21:28.502 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 12:21:28.503 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.507 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.518 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 37.5651ms
2025-08-22 12:21:28.520 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:28.520 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:28.525 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:28.534 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:28.616 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 12:21:28.645 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:21:28.645 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:21:28.682 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:21:28.686 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 156.3225ms
2025-08-22 12:21:28.689 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 12:21:28.688 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 12:21:28.696 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 239.4873ms
2025-08-22 12:21:28.704 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.718 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 12:21:28.721 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:28.768 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 12:21:28.771 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:28.781 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:21:28.778 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:28.785 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 50.6177ms
2025-08-22 12:21:28.800 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 12:21:28.802 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 114.2495ms
2025-08-22 12:21:28.814 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 12:21:28.864 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 332.5103ms
2025-08-22 12:21:28.867 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 12:21:28.869 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 12:21:28.870 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 423.3615ms
2025-08-22 12:21:28.884 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.894 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:28.896 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 12:21:28.900 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:28.904 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:21:28.909 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 372.4926ms
2025-08-22 12:21:28.913 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:28.915 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 453.3459ms
2025-08-22 12:21:28.917 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 12:21:28.928 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:28.931 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:28.932 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:21:28.934 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:28.953 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:21:28.961 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:28.969 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 12:21:28.972 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 68.5606ms
2025-08-22 12:21:28.979 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 12:21:28.982 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 113.6139ms
2025-08-22 12:21:28.993 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:29.019 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:29.027 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:21:29.031 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 91.1072ms
2025-08-22 12:21:29.033 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 12:21:29.033 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:29.036 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:29.037 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 120.5549ms
2025-08-22 12:21:29.043 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:29.049 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:29.065 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:21:29.084 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:29.094 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:29.098 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:21:29.100 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 48.3877ms
2025-08-22 12:21:29.102 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 12:21:29.103 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:29.109 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:29.110 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 77.684ms
2025-08-22 12:21:29.114 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:29.122 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:29.141 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:21:29.166 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:29.194 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:29.202 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:21:29.207 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 78.7354ms
2025-08-22 12:21:29.213 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:29.217 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 114.3278ms
2025-08-22 12:21:29.217 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 12:21:29.231 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:29.233 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:29.234 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:29.248 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:21:29.267 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:29.284 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:29.287 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:21:29.292 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 55.7632ms
2025-08-22 12:21:29.295 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 12:21:29.295 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:29.298 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:29.299 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 82.266ms
2025-08-22 12:21:29.301 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:29.308 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:29.317 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:21:29.340 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:29.349 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:29.353 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:21:29.355 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 43.5008ms
2025-08-22 12:21:29.358 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:29.360 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 65.1462ms
2025-08-22 12:21:35.968 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 12:21:35.975 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:35.978 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 10.457ms
2025-08-22 12:21:35.987 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 12:21:35.994 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:35.995 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:35.997 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:36.013 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - null null
2025-08-22 12:21:36.014 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:21:36.019 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:36.023 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - 204 null null 10.376ms
2025-08-22 12:21:36.030 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/notifications - application/json null
2025-08-22 12:21:36.033 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:21:36.038 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-22 12:21:36.040 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:36.045 +02:00 [INF] Route matched with {action = "GetAgentNotifications", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAgentNotifications() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:21:36.053 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:21:36.056 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:21:36.057 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:21:36.060 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 62.1706ms
2025-08-22 12:21:36.063 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:21:36.066 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 78.9281ms
2025-08-22 12:21:36.076 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 12:21:36.092 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType16`1[[System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:21:36.097 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAgentNotifications (backend) in 49.1208ms
2025-08-22 12:21:36.100 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-22 12:21:36.105 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/notifications - 200 null application/json; charset=utf-8 74.9009ms
2025-08-22 12:22:21.108 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 12:22:21.115 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:22:21.118 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 10.5791ms
2025-08-22 12:22:21.137 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 12:22:21.145 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:22:21.150 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:22:21.153 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:22:21.179 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:22:21.203 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:22:21.205 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - null null
2025-08-22 12:22:21.208 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:22:21.209 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - 204 null null 4.1508ms
2025-08-22 12:22:21.213 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 12:22:21.214 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/notifications - application/json null
2025-08-22 12:22:21.217 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:22:21.220 +02:00 [INF] CORS policy execution successful.
2025-08-22 12:22:21.221 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 64.7689ms
2025-08-22 12:22:21.223 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-22 12:22:21.224 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 12:22:21.226 +02:00 [INF] Route matched with {action = "GetAgentNotifications", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAgentNotifications() on controller backend.Controllers.AgentController (backend).
2025-08-22 12:22:21.227 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 90.0653ms
2025-08-22 12:22:21.236 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 12:22:21.247 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 12:22:21.252 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType16`1[[System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:22:21.256 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAgentNotifications (backend) in 26.7032ms
2025-08-22 12:22:21.260 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-22 12:22:21.262 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/notifications - 200 null application/json; charset=utf-8 48.2922ms
2025-08-22 13:53:36.917 +02:00 [INF] Application is shutting down...
2025-08-22 16:49:42.103 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 16:49:42.176 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-22 16:49:42.319 +02:00 [INF] Executed DbCommand (137ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-22 16:49:42.447 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-22 16:49:42.460 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-22 16:49:42.466 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-22 16:49:42.582 +02:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-22 16:49:42.599 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-22 16:49:42.613 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-22 16:49:42.759 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 16:49:42.883 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-22 16:49:42.885 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 16:49:42.887 +02:00 [INF] Hosting environment: Development
2025-08-22 16:49:42.889 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-22 16:50:06.597 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 16:50:06.632 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-22 16:50:06.650 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:50:06.683 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 83.0213ms
2025-08-22 16:50:06.730 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 16:50:06.757 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:50:06.947 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 16:50:06.990 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 16:50:07.117 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0782508109
2025-08-22 16:50:07.128 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0782508109; proxy=none
2025-08-22 16:50:07.141 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 16:50:07.156 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 16:50:07.360 +02:00 [INF] Received HTTP response headers after 198.2769ms - 200
2025-08-22 16:50:07.362 +02:00 [INF] End processing HTTP request after 223.2573ms - 200
2025-08-22 16:50:07.859 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 16:50:08.125 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 16:50:08.144 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 16:50:08.177 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 16:50:08.209 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 1202.5641ms
2025-08-22 16:50:08.220 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 16:50:08.233 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 1503.095ms
2025-08-22 16:50:13.585 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 16:50:13.599 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:50:13.604 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 20.2056ms
2025-08-22 16:50:13.617 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 16:50:13.634 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:50:13.659 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 42.0553ms
2025-08-22 16:50:14.355 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 16:50:14.386 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:50:14.664 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 16:50:14.727 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 16:50:15.154 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 16:50:15.337 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 16:50:15.630 +02:00 [INF] Executed DbCommand (141ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:50:15.825 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 16:50:15.970 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 16:50:16.091 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 16:50:16.119 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 1357.1511ms
2025-08-22 16:50:16.121 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 16:50:16.121 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 16:50:16.124 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:50:16.125 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 1770.651ms
2025-08-22 16:50:16.152 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 16:50:16.164 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 16:50:16.342 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 16:50:16.448 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 16:50:16.565 +02:00 [INF] Executed DbCommand (97ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:50:16.703 +02:00 [INF] Executed DbCommand (121ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 16:50:16.721 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 16:50:16.724 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 16:50:16.728 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 547.7122ms
2025-08-22 16:50:16.735 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 16:50:16.750 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 628.8719ms
2025-08-22 16:50:27.063 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 16:50:27.074 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:50:27.077 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 14.5809ms
2025-08-22 16:50:27.089 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 16:50:27.101 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:50:27.122 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 16:50:27.175 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 16:50:27.355 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 16:50:27.401 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__sender_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[sender_id] = @__sender_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 16:50:27.506 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 16:50:27.550 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] IS NULL
ORDER BY [n].[sent_at] DESC
2025-08-22 16:50:27.573 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:50:27.625 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 441.8191ms
2025-08-22 16:50:27.630 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 16:50:27.635 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 545.4966ms
2025-08-22 16:53:32.764 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 16:53:32.768 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:53:32.769 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 5.0112ms
2025-08-22 16:53:32.774 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/notifications - application/json 156
2025-08-22 16:53:32.788 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:53:32.791 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 16:53:32.819 +02:00 [INF] Route matched with {action = "SendManagerNotification", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] SendManagerNotification(backend.DTOs.Notification.NotificationRequestDTO) on controller backend.Controllers.ManagerController (backend).
2025-08-22 16:53:33.001 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 16:53:33.087 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-22 16:53:33.226 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-22 16:53:33.251 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-22 16:53:33.290 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-22 16:53:33.324 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-22 16:53:33.609 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (Size = 4000), @p2='?' (Size = 20) (DbType = AnsiString), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int64), @p5='?' (DbType = Int64), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [notifications] ([Category], [Message], [Priority], [read_status], [recipient_id], [sender_id], [sent_at], [Status], [Title], [via_email])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-22 16:53:33.769 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-22 16:53:33.777 +02:00 [INF] WebSocket notification sent to null: reporting on monday: we need report about clients claims tomorrow
2025-08-22 16:53:33.780 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:53:33.782 +02:00 [INF] Executed action backend.Controllers.ManagerController.SendManagerNotification (backend) in 958.8164ms
2025-08-22 16:53:33.785 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.SendManagerNotification (backend)'
2025-08-22 16:53:33.786 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/notifications - 201 null application/json; charset=utf-8 1011.7598ms
2025-08-22 16:53:33.794 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 16:53:33.801 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:53:33.812 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 16:53:33.817 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 16:53:33.871 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 16:53:34.007 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[@__sender_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[sender_id] = @__sender_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 16:53:34.086 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 16:53:34.249 +02:00 [INF] Executed DbCommand (128ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] IS NULL
ORDER BY [n].[sent_at] DESC
2025-08-22 16:53:34.267 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:53:34.271 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 448.1601ms
2025-08-22 16:53:34.276 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 16:53:34.281 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 487.3006ms
2025-08-22 16:55:56.304 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 16:55:56.391 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:55:56.437 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 144.7538ms
2025-08-22 16:55:56.535 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 16:55:56.619 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:55:56.641 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 16:55:56.648 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 16:55:56.708 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 16:55:56.721 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 16:55:56.727 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 16:55:56.729 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 16:55:58.045 +02:00 [INF] Received HTTP response headers after 1312.7449ms - 200
2025-08-22 16:55:58.075 +02:00 [INF] End processing HTTP request after 1343.7096ms - 200
2025-08-22 16:55:58.371 +02:00 [INF] Executed DbCommand (197ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 16:55:58.775 +02:00 [INF] Executed DbCommand (290ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 16:55:59.069 +02:00 [INF] Executed DbCommand (188ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 16:55:59.296 +02:00 [INF] Executed DbCommand (132ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 16:55:59.447 +02:00 [INF] Executed DbCommand (113ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 16:55:59.503 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 16:55:59.526 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 2869.8381ms
2025-08-22 16:55:59.533 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 16:55:59.554 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 3018.6823ms
2025-08-22 16:56:16.929 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 16:56:17.126 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:56:17.153 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 223.6004ms
2025-08-22 16:56:17.346 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 16:56:17.380 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:56:17.415 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 16:56:17.452 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 16:56:17.571 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 16:56:17.762 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 16:56:17.882 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 16:56:17.923 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 16:56:18.301 +02:00 [INF] Received HTTP response headers after 88.9697ms - 200
2025-08-22 16:56:18.361 +02:00 [INF] End processing HTTP request after 478.8947ms - 200
2025-08-22 16:56:18.667 +02:00 [INF] Executed DbCommand (259ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 16:56:19.049 +02:00 [INF] Executed DbCommand (92ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 16:56:19.739 +02:00 [INF] Executed DbCommand (443ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 16:56:20.194 +02:00 [INF] Executed DbCommand (192ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 16:56:20.607 +02:00 [INF] Executed DbCommand (168ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 16:56:20.928 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 16:56:20.965 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 3439.7057ms
2025-08-22 16:56:20.987 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 16:56:21.023 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 3674.7354ms
2025-08-22 16:57:07.737 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 16:57:07.740 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:07.741 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 4.0029ms
2025-08-22 16:57:07.747 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 16:57:07.752 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:07.755 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 16:57:07.757 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 16:57:07.761 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-22 16:57:07.763 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-22 16:57:07.764 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 16:57:07.765 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 16:57:07.786 +02:00 [INF] Received HTTP response headers after 19.8646ms - 200
2025-08-22 16:57:07.787 +02:00 [INF] End processing HTTP request after 22.3062ms - 200
2025-08-22 16:57:07.801 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 16:57:07.808 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 16:57:07.819 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 16:57:07.823 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 16:57:07.825 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-22 16:57:07.830 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 16:57:07.832 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 73.6208ms
2025-08-22 16:57:07.833 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 16:57:07.835 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 87.9284ms
2025-08-22 16:57:08.152 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 16:57:08.157 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.159 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 6.697ms
2025-08-22 16:57:08.179 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 16:57:08.189 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 16:57:08.192 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.202 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.204 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 24.6468ms
2025-08-22 16:57:08.207 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 18.1919ms
2025-08-22 16:57:08.219 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-22 16:57:08.225 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 16:57:08.229 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-22 16:57:08.236 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.255 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 16:57:08.252 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 16:57:08.253 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.246 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.256 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 36.6184ms
2025-08-22 16:57:08.268 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 16:57:08.272 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.274 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.275 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 46.4724ms
2025-08-22 16:57:08.278 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 53.3744ms
2025-08-22 16:57:08.296 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.307 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 16:57:08.307 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 16:57:08.317 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.337 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:08.337 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:08.337 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:08.415 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:08.504 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:08.534 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 16:57:08.541 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:08.544 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.552 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.553 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 211.569ms
2025-08-22 16:57:08.556 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-22 16:57:08.561 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 16:57:08.566 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 16:57:08.569 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.571 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 315.8229ms
2025-08-22 16:57:08.584 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 16:57:08.592 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:08.609 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 16:57:08.620 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:08.622 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 18.7282ms
2025-08-22 16:57:08.625 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-22 16:57:08.631 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 75.5821ms
2025-08-22 16:57:08.634 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 293.9926ms
2025-08-22 16:57:08.637 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-22 16:57:08.638 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 16:57:08.641 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.642 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 390.4602ms
2025-08-22 16:57:08.650 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 16:57:08.654 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:08.669 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:08.673 +02:00 [INF] Executed DbCommand (81ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.684 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:08.686 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 334.1012ms
2025-08-22 16:57:08.688 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.688 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 16:57:08.689 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.690 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 421.6019ms
2025-08-22 16:57:08.695 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.700 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-22 16:57:08.705 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.706 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 49.4588ms
2025-08-22 16:57:08.707 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:08.708 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-22 16:57:08.716 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 78.5213ms
2025-08-22 16:57:08.724 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:08.754 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.774 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.780 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:08.782 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 67.5332ms
2025-08-22 16:57:08.783 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 16:57:08.783 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.786 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.787 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 98.6829ms
2025-08-22 16:57:08.788 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.796 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:08.805 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:08.819 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.822 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.826 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:08.830 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 30.1199ms
2025-08-22 16:57:08.832 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 16:57:08.832 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.835 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.836 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 52.3606ms
2025-08-22 16:57:08.837 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.841 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:08.848 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:08.851 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.854 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.856 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:08.857 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 14.2281ms
2025-08-22 16:57:08.859 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.861 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 16:57:08.865 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 33.4209ms
2025-08-22 16:57:08.870 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.874 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.875 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:08.886 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:08.921 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.937 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:08.940 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:08.944 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 63.3268ms
2025-08-22 16:57:08.948 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.949 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 16:57:08.950 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 89.2282ms
2025-08-22 16:57:08.954 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:08.965 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:08.967 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:08.981 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:09.000 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:09.018 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:09.021 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:09.023 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 52.0719ms
2025-08-22 16:57:09.024 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:09.029 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 80.1243ms
2025-08-22 16:57:20.760 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=weekly - null null
2025-08-22 16:57:20.760 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 16:57:20.765 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:20.770 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:20.771 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=weekly - 204 null null 11.1809ms
2025-08-22 16:57:20.773 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 12.2791ms
2025-08-22 16:57:20.788 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 16:57:20.788 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=weekly - null null
2025-08-22 16:57:20.793 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:20.795 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:20.798 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:20.798 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-22 16:57:20.799 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:20.815 +02:00 [INF] Route matched with {action = "GetPerformance", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetPerformance(System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:20.816 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:20.846 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:21.429 +02:00 [INF] Executed DbCommand (605ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:21.431 +02:00 [INF] Executed DbCommand (579ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:21.447 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:21.452 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:21.454 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 646.8384ms
2025-08-22 16:57:21.455 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
ORDER BY [a].[updated_at] DESC
2025-08-22 16:57:21.456 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:21.462 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 673.8414ms
2025-08-22 16:57:21.552 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:21.567 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentPerformanceDTO'.
2025-08-22 16:57:21.586 +02:00 [INF] Executed action backend.Controllers.AgentController.GetPerformance (backend) in 767.3232ms
2025-08-22 16:57:21.590 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-22 16:57:21.593 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=weekly - 200 null application/json; charset=utf-8 804.1249ms
2025-08-22 16:57:30.054 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 16:57:30.060 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:30.062 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 8.4935ms
2025-08-22 16:57:30.080 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 16:57:30.097 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:30.102 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:30.105 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:30.138 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:30.149 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - null null
2025-08-22 16:57:30.154 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:30.157 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - 204 null null 7.3357ms
2025-08-22 16:57:30.165 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/notifications - application/json null
2025-08-22 16:57:30.169 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:30.170 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:30.177 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-22 16:57:30.186 +02:00 [INF] Route matched with {action = "GetAgentNotifications", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAgentNotifications() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:30.188 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:30.195 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:30.198 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 85.8445ms
2025-08-22 16:57:30.198 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:30.200 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:30.206 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 126.1728ms
2025-08-22 16:57:30.225 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 16:57:30.242 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType16`1[[System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:30.256 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAgentNotifications (backend) in 66.7633ms
2025-08-22 16:57:30.265 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-22 16:57:30.267 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/notifications - 200 null application/json; charset=utf-8 101.5019ms
2025-08-22 16:57:52.564 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-22 16:57:52.570 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:52.572 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 8.1773ms
2025-08-22 16:57:52.584 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-22 16:57:52.589 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:52.596 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:52.599 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:52.616 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:52.634 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:52.639 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - null null
2025-08-22 16:57:52.648 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:52.649 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - 204 null null 9.784ms
2025-08-22 16:57:52.652 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-22 16:57:52.654 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/notifications - application/json null
2025-08-22 16:57:52.657 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:52.665 +02:00 [INF] CORS policy execution successful.
2025-08-22 16:57:52.667 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 65.0349ms
2025-08-22 16:57:52.669 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-22 16:57:52.671 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-22 16:57:52.680 +02:00 [INF] Route matched with {action = "GetAgentNotifications", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAgentNotifications() on controller backend.Controllers.AgentController (backend).
2025-08-22 16:57:52.697 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 112.0526ms
2025-08-22 16:57:52.714 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-22 16:57:52.732 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 16:57:52.737 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType16`1[[System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:57:52.740 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAgentNotifications (backend) in 38.4797ms
2025-08-22 16:57:52.745 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-22 16:57:52.747 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/notifications - 200 null application/json; charset=utf-8 93.1214ms
2025-08-22 17:01:40.100 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-22 17:01:40.172 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:01:40.210 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 128.8638ms
2025-08-22 17:01:40.309 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-22 17:01:40.320 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:01:40.357 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 17:01:40.421 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-22 17:01:40.965 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0782508109
2025-08-22 17:01:41.134 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0782508109; proxy=none
2025-08-22 17:01:41.187 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 17:01:41.248 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-22 17:01:41.779 +02:00 [INF] Received HTTP response headers after 513.6732ms - 200
2025-08-22 17:01:41.854 +02:00 [INF] End processing HTTP request after 681.5111ms - 200
2025-08-22 17:01:43.265 +02:00 [INF] Executed DbCommand (616ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-22 17:01:44.446 +02:00 [INF] Executed DbCommand (622ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 17:01:44.982 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-22 17:01:45.172 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-22 17:01:45.259 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 4807.6488ms
2025-08-22 17:01:45.342 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-22 17:01:45.493 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 5149.2151ms
2025-08-22 17:01:48.196 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 17:01:48.198 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 17:01:48.231 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:01:48.238 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:01:48.258 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 60.0951ms
2025-08-22 17:01:48.254 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 58.2989ms
2025-08-22 17:01:48.924 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 17:01:48.977 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:01:49.239 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 17:01:49.340 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 17:01:49.676 +02:00 [INF] Executed DbCommand (201ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 17:01:49.862 +02:00 [INF] Executed DbCommand (143ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 17:01:50.798 +02:00 [INF] Executed DbCommand (440ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 17:01:50.969 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 17:01:51.675 +02:00 [INF] Executed DbCommand (328ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 17:01:51.789 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 17:01:52.269 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 2847.8447ms
2025-08-22 17:01:52.287 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 17:01:52.328 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:01:52.336 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 17:01:52.339 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 17:01:52.306 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 17:01:52.410 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 17:01:52.420 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 3494.3461ms
2025-08-22 17:01:52.496 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 17:01:53.211 +02:00 [INF] Executed DbCommand (303ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 17:01:53.850 +02:00 [INF] Executed DbCommand (250ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 17:01:56.927 +02:00 [INF] Executed DbCommand (676ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 17:01:58.190 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 17:01:58.366 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 5978.5229ms
2025-08-22 17:01:58.374 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 17:01:58.379 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 6091.7816ms
2025-08-22 17:02:21.788 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 17:02:21.982 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:02:21.994 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 205.9248ms
2025-08-22 17:02:22.127 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 17:02:22.149 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:02:22.159 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 17:02:22.176 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 17:02:22.290 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 17:02:22.421 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[@__sender_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[sender_id] = @__sender_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 17:02:22.586 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 17:02:22.727 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] IS NULL
ORDER BY [n].[sent_at] DESC
2025-08-22 17:02:22.764 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:02:22.779 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 553.1534ms
2025-08-22 17:02:22.796 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 17:02:22.809 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 681.8457ms
2025-08-22 17:04:48.217 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 17:04:48.583 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:04:48.659 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 445.3751ms
2025-08-22 17:04:51.015 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 17:04:51.401 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:04:51.651 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 17:04:51.661 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 17:04:53.490 +02:00 [INF] Executed DbCommand (1,623ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 17:04:54.734 +02:00 [INF] Executed DbCommand (565ms) [Parameters=[@__sender_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[sender_id] = @__sender_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 17:04:54.871 +02:00 [INF] Executed DbCommand (112ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 17:04:55.205 +02:00 [INF] Executed DbCommand (172ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] IS NULL
ORDER BY [n].[sent_at] DESC
2025-08-22 17:04:55.450 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:04:55.492 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 3825.8774ms
2025-08-22 17:04:55.545 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 17:04:55.709 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 4693.9441ms
2025-08-22 17:06:29.227 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 17:06:29.240 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:06:29.250 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 23.4314ms
2025-08-22 17:06:29.257 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 17:06:29.266 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:06:29.302 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 17:06:29.319 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 17:06:29.538 +02:00 [INF] Executed DbCommand (137ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 17:06:29.653 +02:00 [INF] Executed DbCommand (100ms) [Parameters=[@__sender_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[sender_id] = @__sender_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 17:06:29.898 +02:00 [INF] Executed DbCommand (196ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 17:06:29.913 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] IS NULL
ORDER BY [n].[sent_at] DESC
2025-08-22 17:06:29.930 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:06:29.936 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 604.6064ms
2025-08-22 17:06:29.939 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 17:06:29.949 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 691.815ms
2025-08-22 17:06:51.445 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 17:06:51.451 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:06:51.454 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 8.652ms
2025-08-22 17:06:51.468 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 17:06:51.479 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:06:51.493 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 17:06:51.503 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 17:06:51.621 +02:00 [INF] Executed DbCommand (92ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 17:06:51.700 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@__sender_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[sender_id] = @__sender_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 17:06:51.886 +02:00 [INF] Executed DbCommand (175ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 17:06:51.898 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] IS NULL
ORDER BY [n].[sent_at] DESC
2025-08-22 17:06:51.901 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:06:51.903 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 392.6687ms
2025-08-22 17:06:51.904 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 17:06:51.906 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 438.672ms
2025-08-22 17:09:44.505 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-22 17:09:44.520 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-22 17:09:44.524 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:09:44.528 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:09:44.537 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 33.1031ms
2025-08-22 17:09:44.560 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 40.2831ms
2025-08-22 17:09:44.831 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-22 17:09:44.833 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-22 17:09:44.847 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:09:44.867 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:09:44.908 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 17:09:44.920 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 17:09:44.923 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-22 17:09:45.089 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-22 17:09:45.228 +02:00 [INF] Executed DbCommand (238ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-22 17:09:45.329 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[@__sender_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[sender_id] = @__sender_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 17:09:45.424 +02:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 17:09:46.156 +02:00 [INF] Executed DbCommand (331ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 17:09:46.156 +02:00 [INF] Executed DbCommand (793ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-22 17:09:46.191 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 17:09:46.489 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 1384.1912ms
2025-08-22 17:09:46.515 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-22 17:09:46.522 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 1689.2179ms
2025-08-22 17:09:46.469 +02:00 [INF] Executed DbCommand (209ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] IS NULL
ORDER BY [n].[sent_at] DESC
2025-08-22 17:09:46.876 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:09:46.906 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 1966.9225ms
2025-08-22 17:09:46.924 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-22 17:09:47.585 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 2753.3239ms
2025-08-22 17:16:23.421 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-22 17:16:23.454 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:16:23.483 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 61.4962ms
2025-08-22 17:16:23.506 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-22 17:16:23.519 +02:00 [INF] CORS policy execution successful.
2025-08-22 17:16:23.733 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 17:16:23.754 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-22 17:16:24.082 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-22 17:16:24.157 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
2025-08-22 17:16:24.304 +02:00 [INF] Executed DbCommand (118ms) [Parameters=[@__agentId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agentId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-22 17:16:24.468 +02:00 [INF] Executed DbCommand (136ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 17:16:24.763 +02:00 [INF] Executed DbCommand (275ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-22 17:16:24.804 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-22 17:16:24.845 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 1074.7189ms
2025-08-22 17:16:24.865 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-22 17:16:24.879 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 1373.4321ms
