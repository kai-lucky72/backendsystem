2025-08-21 08:32:10.271 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 08:32:10.327 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 08:32:10.438 +02:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 08:32:10.678 +02:00 [INF] Executed DbCommand (109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 08:32:10.701 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 08:32:10.715 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 08:32:10.878 +02:00 [INF] Executed DbCommand (153ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 08:32:10.886 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-21 08:32:10.933 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 08:32:11.050 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-21 08:32:11.255 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-21 08:32:11.260 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-21 08:32:11.262 +02:00 [INF] Hosting environment: Development
2025-08-21 08:32:11.264 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-21 08:34:51.739 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-21 08:34:51.870 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-21 08:34:51.879 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:51.891 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 163.167ms
2025-08-21 08:34:51.934 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-21 08:34:51.961 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:52.334 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 08:34:52.416 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-21 08:34:52.517 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-21 08:34:52.535 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackendtest/User/api/IntermediariesAuthenticate
2025-08-21 08:34:52.537 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackendtest/User/api/IntermediariesAuthenticate
2025-08-21 08:34:53.110 +02:00 [INF] Received HTTP response headers after 569.4054ms - 200
2025-08-21 08:34:53.113 +02:00 [INF] End processing HTTP request after 581.1218ms - 200
2025-08-21 08:34:53.772 +02:00 [INF] Executed DbCommand (191ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-21 08:34:53.788 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-21 08:34:53.852 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__phoneNumber_0='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[phone_number] = @__phoneNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-21 08:34:54.078 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([active], [created_at], [email], [first_name], [last_login], [last_name], [national_id], [password_hash], [phone_number], [profile_image_url], [role])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-21 08:34:54.167 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-21 08:34:54.273 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 20) (DbType = AnsiString), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (Size = 100) (DbType = AnsiString), @p16='?' (DbType = Int64), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 100) (DbType = AnsiString), @p9='?' (DbType = DateTime), @p10='?' (Size = 100) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString), @p12='?' (Size = 255) (DbType = AnsiString), @p13='?' (Size = 20) (DbType = AnsiString), @p14='?' (Size = 4000), @p15='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [agents] ([user_id], [agent_type], [group_id], [manager_id], [Sector])
VALUES (@p0, @p1, @p2, @p3, @p4);
UPDATE [users] SET [active] = @p5, [created_at] = @p6, [email] = @p7, [first_name] = @p8, [last_login] = @p9, [last_name] = @p10, [national_id] = @p11, [password_hash] = @p12, [phone_number] = @p13, [profile_image_url] = @p14, [role] = @p15
OUTPUT 1
WHERE [Id] = @p16;
2025-08-21 08:34:54.292 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-21 08:34:54.300 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 1880.6779ms
2025-08-21 08:34:54.303 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 08:34:54.325 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 2389.8098ms
2025-08-21 08:34:59.017 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-21 08:34:59.017 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-21 08:34:59.026 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-21 08:34:59.029 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:59.030 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-21 08:34:59.045 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:59.051 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:59.057 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 40.6289ms
2025-08-21 08:34:59.064 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:59.065 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 49.4113ms
2025-08-21 08:34:59.072 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 45.1242ms
2025-08-21 08:34:59.102 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 71.4508ms
2025-08-21 08:34:59.123 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-21 08:34:59.127 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-21 08:34:59.249 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:59.319 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-21 08:34:59.374 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-21 08:34:59.446 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:59.451 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 327.8637ms
2025-08-21 08:34:59.455 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:59.464 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:59.512 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 384.6514ms
2025-08-21 08:34:59.591 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:34:59.609 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:34:59.669 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-21 08:34:59.680 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-21 08:34:59.689 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:34:59.724 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:34:59.724 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:34:59.795 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:35:00.378 +02:00 [INF] Executed DbCommand (119ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:35:00.479 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:35:00.500 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 741.9225ms
2025-08-21 08:35:00.506 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:35:00.506 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-21 08:35:00.507 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-21 08:35:00.530 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 1155.8743ms
2025-08-21 08:35:00.536 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:35:00.554 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:35:00.555 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-21 08:35:00.577 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:35:00.718 +02:00 [INF] Executed DbCommand (123ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:35:00.780 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:35:00.846 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 260.7091ms
2025-08-21 08:35:00.925 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-21 08:35:01.112 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 604.1013ms
2025-08-21 08:35:01.139 +02:00 [INF] Executed DbCommand (310ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:01.262 +02:00 [INF] Executed DbCommand (431ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:01.512 +02:00 [INF] Executed DbCommand (102ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:01.529 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-21 08:35:01.618 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:35:01.885 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 1676.2171ms
2025-08-21 08:35:01.980 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:01.996 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:35:02.119 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:35:02.038 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-21 08:35:02.135 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:35:02.144 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-21 08:35:02.153 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:35:02.113 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 2521.2613ms
2025-08-21 08:35:02.022 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 2266.7034ms
2025-08-21 08:35:02.126 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:02.228 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-21 08:35:02.230 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:35:02.239 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 2920.1385ms
2025-08-21 08:35:02.265 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:35:02.410 +02:00 [INF] Executed DbCommand (237ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:35:02.604 +02:00 [INF] Executed DbCommand (123ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:02.735 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:02.743 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-21 08:35:02.748 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:02.751 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 590.0996ms
2025-08-21 08:35:02.761 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-21 08:35:02.761 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:35:02.763 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 724.7816ms
2025-08-21 08:35:02.775 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 528.6348ms
2025-08-21 08:35:02.795 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:02.803 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 807.1498ms
2025-08-21 08:35:03.027 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:35:03.038 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:35:03.042 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:03.045 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:35:03.161 +02:00 [INF] Executed DbCommand (103ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:35:03.251 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:03.323 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:03.335 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:35:03.343 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 293.4954ms
2025-08-21 08:35:03.349 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:03.352 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 324.6102ms
2025-08-21 08:35:03.354 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:35:03.524 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:35:03.592 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:03.598 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:35:03.768 +02:00 [INF] Executed DbCommand (146ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:35:03.806 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:04.062 +02:00 [INF] Executed DbCommand (102ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:04.071 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:35:04.074 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 469.4315ms
2025-08-21 08:35:04.076 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:35:04.078 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:04.092 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:35:04.094 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 740.0519ms
2025-08-21 08:35:04.288 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:04.312 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:35:04.466 +02:00 [INF] Executed DbCommand (111ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:35:04.539 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:04.653 +02:00 [INF] Executed DbCommand (82ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:04.804 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:35:04.807 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 463.5146ms
2025-08-21 08:35:04.811 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:04.873 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:35:04.886 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:35:04.900 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:04.906 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:35:04.876 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 799.6926ms
2025-08-21 08:35:05.003 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:35:05.406 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:05.507 +02:00 [INF] Executed DbCommand (88ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:35:05.512 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:35:05.516 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 606.9095ms
2025-08-21 08:35:05.520 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:35:05.522 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 649.0716ms
2025-08-21 08:38:16.540 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-21 08:38:16.541 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-21 08:38:16.574 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:16.574 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:16.596 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 53.1265ms
2025-08-21 08:38:16.596 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 53.0839ms
2025-08-21 08:38:16.612 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:38:16.642 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:16.818 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:16.830 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:17.184 +02:00 [INF] Executed DbCommand (181ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:17.296 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:17.347 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:17.389 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:17.410 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 577.5882ms
2025-08-21 08:38:17.418 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:17.426 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:38:17.457 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 844.5557ms
2025-08-21 08:38:17.469 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:17.509 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:17.525 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:17.668 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:17.694 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:17.724 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:17.747 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:17.762 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 170.13ms
2025-08-21 08:38:17.767 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:17.770 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 345.0665ms
2025-08-21 08:38:17.783 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/history - null null
2025-08-21 08:38:17.797 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:17.817 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/history - 204 null null 33.5673ms
2025-08-21 08:38:17.909 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/history - null null
2025-08-21 08:38:17.914 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:17.924 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceHistory (backend)'
2025-08-21 08:38:18.062 +02:00 [INF] Route matched with {action = "GetAttendanceHistory", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceHistory() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:18.106 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:18.155 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:18.249 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:18.431 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceHistory (backend) in 365.6172ms
2025-08-21 08:38:18.434 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceHistory (backend)'
2025-08-21 08:38:18.445 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/history - 200 null application/json; charset=utf-8 535.8908ms
2025-08-21 08:38:18.479 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-21 08:38:18.549 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:18.568 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 88.856ms
2025-08-21 08:38:18.682 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-21 08:38:18.697 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:18.710 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-21 08:38:18.713 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:18.895 +02:00 [INF] Executed DbCommand (95ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:18.946 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:18.961 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 245.5329ms
2025-08-21 08:38:18.967 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-21 08:38:18.984 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 296.9106ms
2025-08-21 08:38:32.118 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=weekly - null null
2025-08-21 08:38:32.122 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-21 08:38:32.154 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:32.163 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:32.165 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=weekly - 204 null null 46.8348ms
2025-08-21 08:38:32.166 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 44.1605ms
2025-08-21 08:38:32.183 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:38:32.186 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=weekly - null null
2025-08-21 08:38:32.201 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:32.205 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:32.211 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:32.211 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-21 08:38:32.214 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:32.360 +02:00 [INF] Route matched with {action = "GetPerformance", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetPerformance(System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:32.372 +02:00 [INF] Executed DbCommand (108ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:32.421 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:32.497 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:32.502 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:32.506 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 269.609ms
2025-08-21 08:38:32.511 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:32.515 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 332.4657ms
2025-08-21 08:38:32.622 +02:00 [INF] Executed DbCommand (115ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:32.753 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:32.768 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:32.773 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentPerformanceDTO'.
2025-08-21 08:38:32.792 +02:00 [INF] Executed action backend.Controllers.AgentController.GetPerformance (backend) in 421.4443ms
2025-08-21 08:38:32.795 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-21 08:38:32.803 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=weekly - 200 null application/json; charset=utf-8 616.3938ms
2025-08-21 08:38:47.074 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-21 08:38:47.079 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-21 08:38:47.088 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:47.091 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-21 08:38:47.094 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:47.103 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 29.0752ms
2025-08-21 08:38:47.109 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:47.110 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 31.1831ms
2025-08-21 08:38:47.124 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 33.334ms
2025-08-21 08:38:47.126 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-21 08:38:47.140 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-21 08:38:47.161 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:38:47.177 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:47.186 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:47.203 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:47.226 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-21 08:38:47.227 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-21 08:38:47.252 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:47.268 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:47.276 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:47.285 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:47.476 +02:00 [INF] Executed DbCommand (131ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:47.502 +02:00 [INF] Executed DbCommand (158ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:47.507 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:47.510 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:47.655 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 345.3572ms
2025-08-21 08:38:47.658 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-21 08:38:47.667 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 541.1449ms
2025-08-21 08:38:47.702 +02:00 [INF] Executed DbCommand (158ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:47.707 +02:00 [INF] Executed DbCommand (200ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:47.792 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-21 08:38:47.805 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 478.3594ms
2025-08-21 08:38:47.808 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-21 08:38:47.824 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 684.0754ms
2025-08-21 08:38:47.864 +02:00 [INF] Executed DbCommand (75ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:47.934 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:47.940 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 580.6323ms
2025-08-21 08:38:47.943 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:47.951 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 790.599ms
2025-08-21 08:38:48.090 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:38:48.103 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:48.107 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:48.110 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:48.334 +02:00 [INF] Executed DbCommand (210ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:48.358 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:48.406 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:48.432 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:48.485 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 365.2068ms
2025-08-21 08:38:48.509 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:48.518 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 427.0442ms
2025-08-21 08:38:48.559 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:38:48.584 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:48.596 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:48.610 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:48.759 +02:00 [INF] Executed DbCommand (116ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:48.810 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:48.900 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:48.918 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:48.924 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 301.6527ms
2025-08-21 08:38:48.932 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:48.938 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 380.7363ms
2025-08-21 08:38:55.095 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-21 08:38:55.100 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:55.102 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 6.5771ms
2025-08-21 08:38:55.109 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-21 08:38:55.118 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:55.122 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-21 08:38:55.128 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:55.195 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:55.281 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:55.294 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-21 08:38:55.297 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 160.9478ms
2025-08-21 08:38:55.301 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-21 08:38:55.308 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 198.7683ms
2025-08-21 08:38:55.349 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-21 08:38:55.461 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:55.466 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 117.6225ms
2025-08-21 08:38:55.501 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:38:55.537 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:55.559 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:55.585 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:55.836 +02:00 [INF] Executed DbCommand (203ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:55.867 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:55.894 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:55.903 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:55.993 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 376.7667ms
2025-08-21 08:38:56.009 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:56.016 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 515.041ms
2025-08-21 08:38:56.041 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:38:56.062 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:38:56.086 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:56.095 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:38:56.276 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:38:56.301 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:56.479 +02:00 [INF] Executed DbCommand (166ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:38:56.483 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:38:56.485 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 284.7187ms
2025-08-21 08:38:56.498 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:38:56.508 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 468.0587ms
2025-08-21 08:44:11.790 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-21 08:44:11.790 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-21 08:44:11.790 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-21 08:44:11.858 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:44:11.858 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:44:11.858 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:44:11.869 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 85.9279ms
2025-08-21 08:44:11.871 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 85.929ms
2025-08-21 08:44:11.871 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 85.9292ms
2025-08-21 08:44:11.906 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:44:11.934 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-21 08:44:11.969 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-21 08:44:12.020 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:44:12.035 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:44:12.070 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:44:12.198 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-21 08:44:12.198 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-21 08:44:12.198 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:44:12.217 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:44:12.217 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:44:12.217 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:44:12.597 +02:00 [INF] Executed DbCommand (211ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:44:12.597 +02:00 [INF] Executed DbCommand (211ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:44:12.597 +02:00 [INF] Executed DbCommand (211ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:44:12.662 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:44:12.706 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 475.0402ms
2025-08-21 08:44:12.714 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-21 08:44:12.719 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 750.176ms
2025-08-21 08:44:12.755 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:44:12.755 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:44:12.987 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-21 08:44:12.990 +02:00 [INF] Executed DbCommand (120ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:44:13.002 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 775.7979ms
2025-08-21 08:44:13.002 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:44:13.008 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-21 08:44:13.026 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 803.0674ms
2025-08-21 08:44:13.039 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 1104.6656ms
2025-08-21 08:44:13.087 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:44:13.180 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 1274.2468ms
2025-08-21 08:44:13.804 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:44:13.814 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:44:13.820 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:44:13.822 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:44:13.958 +02:00 [INF] Executed DbCommand (121ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:44:14.004 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:44:14.319 +02:00 [INF] Executed DbCommand (246ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:44:14.323 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:44:14.330 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 501.424ms
2025-08-21 08:44:14.334 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:44:14.341 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 536.9755ms
2025-08-21 08:44:14.385 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-21 08:44:14.411 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:44:14.443 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:44:14.457 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-21 08:44:14.551 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-21 08:44:14.652 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:44:14.715 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-21 08:44:14.775 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 08:44:14.824 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 345.9755ms
2025-08-21 08:44:14.954 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-21 08:44:14.969 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 583.8523ms
2025-08-21 08:54:45.220 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-21 08:54:45.235 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:54:45.239 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 20.6091ms
2025-08-21 08:54:45.250 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-21 08:54:45.268 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:54:45.347 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 08:54:45.376 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-21 08:54:45.452 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0782508109
2025-08-21 08:54:45.465 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackendtest/User/api/IntermediariesAuthenticate
2025-08-21 08:54:45.467 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackendtest/User/api/IntermediariesAuthenticate
2025-08-21 08:54:45.656 +02:00 [INF] Received HTTP response headers after 187.4893ms - 200
2025-08-21 08:54:45.657 +02:00 [INF] End processing HTTP request after 193.5038ms - 200
2025-08-21 08:54:45.876 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-21 08:54:45.880 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-21 08:54:45.897 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__phoneNumber_0='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[phone_number] = @__phoneNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-21 08:54:45.976 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([active], [created_at], [email], [first_name], [last_login], [last_name], [national_id], [password_hash], [phone_number], [profile_image_url], [role])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-21 08:54:46.006 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-21 08:54:46.080 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p2='?' (Size = 100) (DbType = AnsiString), @p14='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime), @p5='?' (Size = 255) (DbType = AnsiString), @p6='?' (Size = 100) (DbType = AnsiString), @p7='?' (DbType = DateTime), @p8='?' (Size = 100) (DbType = AnsiString), @p9='?' (Size = 50) (DbType = AnsiString), @p10='?' (Size = 255) (DbType = AnsiString), @p11='?' (Size = 20) (DbType = AnsiString), @p12='?' (Size = 4000), @p13='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [managers] ([user_id], [created_by], [department])
VALUES (@p0, @p1, @p2);
UPDATE [users] SET [active] = @p3, [created_at] = @p4, [email] = @p5, [first_name] = @p6, [last_login] = @p7, [last_name] = @p8, [national_id] = @p9, [password_hash] = @p10, [phone_number] = @p11, [profile_image_url] = @p12, [role] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-08-21 08:54:46.088 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-21 08:54:46.090 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 711.5104ms
2025-08-21 08:54:46.091 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 08:54:46.093 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 842.9218ms
2025-08-21 08:54:49.828 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-21 08:54:49.840 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:54:49.843 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 15.2999ms
2025-08-21 08:54:49.864 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-21 08:54:49.876 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:54:49.878 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 14.2593ms
2025-08-21 08:54:49.881 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-21 08:54:49.892 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:54:49.944 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 08:54:50.046 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-21 08:54:50.378 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-21 08:54:50.399 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 348.1169ms
2025-08-21 08:54:50.403 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 08:54:50.448 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Manager not found with ID: 43
   at backend.Services.ManagerService.GetManagerByIdAsync(Int64 id) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 132
   at backend.Controllers.ManagerController.GetDashboard() in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 640
   at lambda_method600(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-21 08:54:50.779 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 500 null application/json; charset=utf-8 898.1037ms
2025-08-21 08:54:50.780 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-21 08:54:50.793 +02:00 [INF] CORS policy execution successful.
2025-08-21 08:54:50.798 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 08:54:50.803 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-21 08:54:50.931 +02:00 [INF] Executed DbCommand (118ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-21 08:54:50.959 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 150.4053ms
2025-08-21 08:54:50.962 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 08:54:51.069 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Manager not found with ID: 43
   at backend.Services.ManagerService.GetManagerByIdAsync(Int64 id) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 132
   at backend.Controllers.ManagerController.GetDashboard() in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 640
   at lambda_method600(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-21 08:54:51.111 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 500 null application/json; charset=utf-8 330.9137ms
2025-08-21 09:11:14.695 +02:00 [INF] Application is shutting down...
2025-08-21 09:22:17.725 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 09:22:17.813 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 09:22:18.064 +02:00 [INF] Executed DbCommand (226ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 09:22:18.223 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 09:22:18.234 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 09:22:18.237 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 09:22:18.424 +02:00 [INF] Executed DbCommand (159ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 09:22:18.451 +02:00 [INF] Applying migration '20250821072132_RemoveManagerCreatedBy'.
2025-08-21 09:22:18.596 +02:00 [ERR] Failed executing DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [managers] DROP CONSTRAINT [FK_managers_users_created_by];
2025-08-21 09:50:42.440 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 09:50:42.501 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 09:50:42.625 +02:00 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 09:50:42.820 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 09:50:42.828 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 09:50:42.833 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 09:50:42.924 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 09:50:42.931 +02:00 [INF] Applying migration '20250821072132_RemoveManagerCreatedBy'.
2025-08-21 09:50:43.100 +02:00 [ERR] Failed executing DbCommand (160ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS (
    SELECT 1 FROM sys.foreign_keys WHERE name = 'FK_managers_users_created_by'
)
BEGIN
    ALTER TABLE [managers] DROP CONSTRAINT [FK_managers_users_created_by];
END;

IF EXISTS (
    SELECT 1 FROM sys.indexes WHERE name = 'IX_managers_created_by' AND object_id = OBJECT_ID('managers')
)
BEGIN
    DROP INDEX [IX_managers_created_by] ON [managers];
END;

IF EXISTS (
    SELECT 1 FROM sys.columns WHERE Name = N'created_by' AND Object_ID = Object_ID(N'managers')
)
BEGIN
    ALTER TABLE [managers] DROP COLUMN [created_by];
END;
2025-08-21 10:13:30.914 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 10:13:30.967 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 10:13:31.148 +02:00 [INF] Executed DbCommand (170ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 10:13:31.331 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 10:13:31.344 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 10:13:31.363 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 10:13:31.508 +02:00 [INF] Executed DbCommand (137ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 10:13:31.565 +02:00 [INF] Applying migration '20250821072132_RemoveManagerCreatedBy'.
2025-08-21 10:13:32.016 +02:00 [INF] Executed DbCommand (353ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS (
    SELECT 1 FROM sys.foreign_keys WHERE name = 'FK_managers_users_created_by'
)
BEGIN
    ALTER TABLE [managers] DROP CONSTRAINT [FK_managers_users_created_by];
END;

IF EXISTS (
    SELECT 1 FROM sys.indexes WHERE name = 'IX_managers_created_by' AND object_id = OBJECT_ID('managers')
)
BEGIN
    DROP INDEX [IX_managers_created_by] ON [managers];
END;

-- Drop legacy index if present
IF EXISTS (
    SELECT 1 FROM sys.indexes WHERE name = 'fk_managers_creator' AND object_id = OBJECT_ID('managers')
)
BEGIN
    DROP INDEX [fk_managers_creator] ON [managers];
END;

IF EXISTS (
    SELECT 1 FROM sys.columns WHERE Name = N'created_by' AND Object_ID = Object_ID(N'managers')
)
BEGIN
    ALTER TABLE [managers] DROP COLUMN [created_by];
END;
2025-08-21 10:13:32.039 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250821072132_RemoveManagerCreatedBy', N'9.0.7');
2025-08-21 10:13:32.070 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 10:19:57.794 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 10:19:57.904 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 10:19:58.011 +02:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 10:19:58.119 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 10:19:58.132 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 10:19:58.135 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 10:19:58.200 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 10:19:58.208 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-21 10:19:58.213 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 10:19:58.287 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-21 10:19:58.425 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-21 10:19:58.428 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-21 10:19:58.430 +02:00 [INF] Hosting environment: Development
2025-08-21 10:19:58.431 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-21 10:23:40.124 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-21 10:23:40.281 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-21 10:23:40.297 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:23:40.330 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 217.1451ms
2025-08-21 10:23:40.430 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-21 10:23:40.556 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:23:41.066 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 10:23:41.147 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-21 10:23:42.582 +02:00 [INF] Executed DbCommand (211ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-21 10:23:42.992 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:23:43.097 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:23:43.209 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:23:43.231 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-21 10:23:43.373 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 2214.5865ms
2025-08-21 10:23:43.378 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 10:23:43.398 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 2974.4497ms
2025-08-21 10:25:27.548 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-21 10:25:27.569 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:25:27.575 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 30.3396ms
2025-08-21 10:25:27.589 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-21 10:25:27.597 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:25:27.660 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 10:25:27.668 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-21 10:25:28.064 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-21 10:25:28.229 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:25:28.320 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:25:28.572 +02:00 [INF] Executed DbCommand (113ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:25:28.596 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-21 10:25:28.679 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 988.8551ms
2025-08-21 10:25:28.743 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 10:25:28.780 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 1186.9725ms
2025-08-21 10:25:45.578 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-21 10:25:45.600 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:25:45.607 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 28.7054ms
2025-08-21 10:25:45.914 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-21 10:25:46.008 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:25:46.210 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-21 10:25:46.358 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-21 10:25:46.585 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-21 10:25:46.610 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:25:46.617 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 10:25:46.845 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 472.0242ms
2025-08-21 10:25:46.849 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-21 10:25:46.856 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 946.994ms
2025-08-21 10:26:06.162 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-21 10:26:06.169 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:26:06.172 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 9.3482ms
2025-08-21 10:26:06.185 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-21 10:26:06.190 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:26:06.199 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 10:26:06.206 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-21 10:26:06.342 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-21 10:26:06.442 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:26:06.474 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:26:06.510 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:26:06.520 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-21 10:26:06.530 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 313.7955ms
2025-08-21 10:26:06.540 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 10:26:06.555 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 368.9172ms
2025-08-21 10:42:32.455 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-21 10:42:32.566 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:42:32.750 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 243.0126ms
2025-08-21 10:42:32.797 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-21 10:42:32.807 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:42:33.134 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 10:42:33.163 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-21 10:42:33.733 +02:00 [INF] Executed DbCommand (97ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-21 10:42:33.898 +02:00 [INF] Executed DbCommand (116ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:42:34.081 +02:00 [INF] Executed DbCommand (148ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:42:34.164 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:42:34.233 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-21 10:42:34.368 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 1156.4751ms
2025-08-21 10:42:34.431 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-21 10:42:34.440 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 1642.8523ms
2025-08-21 10:42:42.939 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-21 10:42:42.949 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:42:42.954 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 15.1351ms
2025-08-21 10:42:42.969 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-21 10:42:42.976 +02:00 [INF] CORS policy execution successful.
2025-08-21 10:42:42.988 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-21 10:42:42.994 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-21 10:42:43.146 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-21 10:42:43.220 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-21 10:42:43.240 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 10:42:43.243 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 237.1745ms
2025-08-21 10:42:43.247 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-21 10:42:43.256 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 286.5523ms
2025-08-21 16:12:50.736 +02:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:12:51.620 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 16:12:51.872 +02:00 [INF] Executed DbCommand (185ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 16:12:52.740 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 16:12:52.950 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:12:53.142 +02:00 [INF] Executed DbCommand (147ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 16:12:53.457 +02:00 [INF] Executed DbCommand (275ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 16:12:53.622 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-21 16:12:53.705 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 16:16:13.148 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:16:13.238 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 16:16:13.268 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 16:16:13.424 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 16:16:13.464 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:16:13.484 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 16:16:13.513 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 16:16:13.535 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-21 16:16:13.557 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 16:16:13.701 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-21 16:16:13.931 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-21 16:16:13.938 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-21 16:16:13.943 +02:00 [INF] Hosting environment: Development
2025-08-21 16:16:13.949 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-21 16:20:37.497 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-21 16:20:37.539 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-21 16:20:37.559 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:20:37.592 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 87.1118ms
2025-08-21 16:20:37.625 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-21 16:20:37.652 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:20:37.866 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:20:37.894 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-21 16:20:37.972 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-21 16:20:37.988 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackendtest/User/api/IntermediariesAuthenticate
2025-08-21 16:20:37.991 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackendtest/User/api/IntermediariesAuthenticate
2025-08-21 16:20:59.114 +02:00 [ERR] Authentication error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 24
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 100
2025-08-21 16:20:59.166 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-08-21 16:20:59.351 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21443.446ms
2025-08-21 16:20:59.360 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:20:59.367 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 499 null application/problem+json; charset=utf-8 21742.5628ms
2025-08-21 16:21:09.763 +02:00 [INF] Application is shutting down...
2025-08-21 16:21:17.749 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:21:17.839 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 16:21:17.877 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 16:21:18.019 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 16:21:18.027 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:21:18.030 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 16:21:18.039 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 16:21:18.050 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-21 16:21:18.064 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 16:21:18.144 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-21 16:21:18.232 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-21 16:21:18.236 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-21 16:21:18.239 +02:00 [INF] Hosting environment: Development
2025-08-21 16:21:18.240 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-21 16:21:33.934 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-21 16:21:33.987 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-21 16:21:33.995 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:21:34.029 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 92.9178ms
2025-08-21 16:21:34.071 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-21 16:21:34.128 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:21:34.292 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:21:34.312 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-21 16:21:34.345 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-21 16:21:34.361 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackendtest/User/api/IntermediariesAuthenticate
2025-08-21 16:21:34.370 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackendtest/User/api/IntermediariesAuthenticate
2025-08-21 16:21:55.470 +02:00 [ERR] Authentication error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 24
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 100
2025-08-21 16:21:55.497 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-08-21 16:21:55.538 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21220.6591ms
2025-08-21 16:21:55.543 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:21:55.557 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 401 null application/problem+json; charset=utf-8 21485.9644ms
2025-08-21 16:22:20.048 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-21 16:22:20.065 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:20.068 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 20.1096ms
2025-08-21 16:22:20.083 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-21 16:22:20.101 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:20.119 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:22:20.131 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-21 16:22:20.173 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0723374650
2025-08-21 16:22:20.695 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-21 16:22:20.889 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-21 16:22:20.919 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-21 16:22:20.935 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 791.8249ms
2025-08-21 16:22:20.938 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:22:20.952 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 866.8847ms
2025-08-21 16:22:26.386 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-21 16:22:26.394 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.403 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-21 16:22:26.406 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-21 16:22:26.409 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-21 16:22:26.412 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-21 16:22:26.412 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-21 16:22:26.416 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 28.7114ms
2025-08-21 16:22:26.443 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.448 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.457 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.468 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.487 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.529 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-21 16:22:26.533 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 130.2323ms
2025-08-21 16:22:26.538 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 128.6006ms
2025-08-21 16:22:26.543 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 133.3481ms
2025-08-21 16:22:26.548 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 135.2599ms
2025-08-21 16:22:26.551 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 138.7095ms
2025-08-21 16:22:26.572 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.595 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-21 16:22:26.619 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-21 16:22:26.643 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-21 16:22:26.647 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 119.084ms
2025-08-21 16:22:26.656 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-21 16:22:26.659 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.672 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.675 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-21 16:22:26.678 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.714 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.720 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 122.8385ms
2025-08-21 16:22:26.746 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:26.854 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-21 16:22:26.854 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-21 16:22:26.855 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-21 16:22:26.855 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-21 16:22:26.916 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-21 16:22:26.930 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-21 16:22:26.930 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-21 16:22:26.939 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-21 16:22:27.195 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-21 16:22:27.205 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
2025-08-21 16:22:27.210 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-21 16:22:27.214 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Collections.Generic.List`1[[<>f__AnonymousType2`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:22:27.220 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-21 16:22:27.242 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 303.4247ms
2025-08-21 16:22:27.242 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:22:27.249 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-21 16:22:27.250 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-21 16:22:27.255 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 580.3766ms
2025-08-21 16:22:27.260 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:27.273 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 322.1941ms
2025-08-21 16:22:27.284 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-21 16:22:27.291 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-21 16:22:27.293 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-21 16:22:27.311 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:22:27.321 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:27.323 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 667.3887ms
2025-08-21 16:22:27.325 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-21 16:22:27.348 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-21 16:22:27.367 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-21 16:22:27.414 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:22:27.457 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-21 16:22:27.457 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:22:27.459 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-21 16:22:27.465 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:22:27.486 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Collections.Generic.List`1[[<>f__AnonymousType2`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:22:27.487 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:22:27.490 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 109.534ms
2025-08-21 16:22:27.505 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 138.3983ms
2025-08-21 16:22:27.526 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-21 16:22:27.526 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0 OR [a].[manager_id] IS NULL
2025-08-21 16:22:27.530 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-21 16:22:27.534 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 249.3247ms
2025-08-21 16:22:27.581 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:22:27.584 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 333.5341ms
2025-08-21 16:22:27.640 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:22:27.645 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:22:27.662 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 705.297ms
2025-08-21 16:22:27.665 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-21 16:22:27.666 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-21 16:22:27.673 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:27.679 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 1059.4064ms
2025-08-21 16:22:27.687 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-21 16:22:27.694 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-21 16:22:27.736 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
2025-08-21 16:22:27.763 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-21 16:22:27.768 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0 OR [a].[manager_id] IS NULL
2025-08-21 16:22:27.770 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:22:27.780 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:22:27.784 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 86.7342ms
2025-08-21 16:22:27.792 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-21 16:22:27.796 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 864.3023ms
2025-08-21 16:22:27.798 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 133.1125ms
2025-08-21 16:22:27.805 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-21 16:22:27.821 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-21 16:22:27.823 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 1180.376ms
2025-08-21 16:22:27.830 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:27.846 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-21 16:22:27.849 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-21 16:22:27.882 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-21 16:22:27.904 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:22:27.955 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:22:27.986 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:22:28.007 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:22:28.087 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:22:28.145 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:22:28.204 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-21 16:22:28.216 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:22:28.224 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 370.1515ms
2025-08-21 16:22:28.231 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-21 16:22:28.235 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 413.6205ms
2025-08-21 16:22:38.548 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-21 16:22:38.553 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:38.555 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 7.1249ms
2025-08-21 16:22:38.568 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-21 16:22:38.636 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:22:38.765 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-21 16:22:38.768 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-21 16:22:38.878 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-21 16:22:39.371 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:22:39.388 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:22:39.412 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:22:39.433 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:22:39.474 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:22:39.502 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:22:39.535 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-21 16:22:39.545 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:22:39.550 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 721.0383ms
2025-08-21 16:22:39.554 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-21 16:22:39.558 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 989.2445ms
2025-08-21 16:23:21.199 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-21 16:23:21.202 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-21 16:23:21.204 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:23:21.205 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-21 16:23:21.205 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-21 16:23:21.210 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:23:21.211 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 12.1247ms
2025-08-21 16:23:21.215 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:23:21.220 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:23:21.222 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 19.6266ms
2025-08-21 16:23:21.238 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-21 16:23:21.241 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 35.5039ms
2025-08-21 16:23:21.242 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 36.6878ms
2025-08-21 16:23:21.248 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-21 16:23:21.251 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:23:21.261 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-21 16:23:21.269 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-21 16:23:21.272 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:23:21.276 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-21 16:23:21.283 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:23:21.293 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:23:21.314 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-21 16:23:21.315 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-21 16:23:21.320 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-21 16:23:21.321 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-21 16:23:21.342 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-21 16:23:21.347 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-21 16:23:21.349 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-21 16:23:21.396 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-21 16:23:21.404 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
2025-08-21 16:23:21.416 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-21 16:23:21.438 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:23:21.448 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Collections.Generic.List`1[[<>f__AnonymousType2`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:23:21.454 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-21 16:23:21.461 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 92.5324ms
2025-08-21 16:23:21.478 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:23:21.479 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:23:21.481 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-21 16:23:21.481 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0 OR [a].[manager_id] IS NULL
2025-08-21 16:23:21.492 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 94.2231ms
2025-08-21 16:23:21.499 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 238.2322ms
2025-08-21 16:23:21.502 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:23:21.511 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:23:21.514 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-21 16:23:21.530 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 203.0452ms
2025-08-21 16:23:21.532 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:23:21.533 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 263.8153ms
2025-08-21 16:23:21.535 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-21 16:23:21.558 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:23:21.560 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 322.1694ms
2025-08-21 16:23:21.572 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:23:21.601 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-21 16:23:21.607 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:23:21.611 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 255.1915ms
2025-08-21 16:23:21.618 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-21 16:23:21.627 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 379.408ms
2025-08-21 16:23:31.701 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-21 16:23:31.706 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:23:31.708 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 6.6861ms
2025-08-21 16:23:31.714 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-21 16:23:31.719 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:23:31.722 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-21 16:23:31.727 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-21 16:23:31.790 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-21 16:23:31.883 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:23:31.939 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:23:31.972 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:23:31.994 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:23:31.999 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-21 16:23:32.014 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-21 16:23:32.057 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [m].[user_id], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
LEFT JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-21 16:23:32.087 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-21 16:23:32.100 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 367.0203ms
2025-08-21 16:23:32.121 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-21 16:23:32.154 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 439.5935ms
2025-08-21 16:24:08.762 +02:00 [INF] Application is shutting down...
2025-08-21 16:24:15.825 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:24:15.871 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 16:24:15.912 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 16:24:15.991 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 16:24:15.998 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:24:16.002 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 16:24:16.007 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 16:24:16.012 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-21 16:24:16.018 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 16:24:16.072 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-21 16:24:16.152 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-21 16:24:16.154 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-21 16:24:16.155 +02:00 [INF] Hosting environment: Development
2025-08-21 16:24:16.156 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-21 16:24:59.906 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-21 16:24:59.947 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-21 16:24:59.958 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:24:59.969 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 63.6538ms
2025-08-21 16:25:00.006 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-21 16:25:00.073 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:25:00.174 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:25:00.201 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-21 16:25:00.271 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-21 16:25:00.286 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackendtest/User/api/IntermediariesAuthenticate
2025-08-21 16:25:00.290 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackendtest/User/api/IntermediariesAuthenticate
2025-08-21 16:25:21.414 +02:00 [ERR] Authentication error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 24
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 100
2025-08-21 16:25:21.468 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-08-21 16:25:21.519 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21306.6097ms
2025-08-21 16:25:21.529 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:25:21.539 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 401 null application/problem+json; charset=utf-8 21533.2389ms
2025-08-21 16:31:31.677 +02:00 [INF] Application is shutting down...
2025-08-21 16:31:43.019 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:31:43.116 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 16:31:43.231 +02:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 16:31:43.383 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 16:31:43.403 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:31:43.416 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 16:31:43.438 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 16:31:43.456 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-21 16:31:43.472 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 16:31:43.586 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-21 16:31:43.751 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-21 16:31:43.759 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-21 16:31:43.766 +02:00 [INF] Hosting environment: Development
2025-08-21 16:31:43.768 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-21 16:35:22.117 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-21 16:35:22.244 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-21 16:35:22.264 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:35:22.313 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 202.5749ms
2025-08-21 16:35:22.362 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-21 16:35:22.384 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:35:22.516 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:35:22.598 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-21 16:35:22.711 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-21 16:35:22.737 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-21 16:35:22.745 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-21 16:35:43.928 +02:00 [ERR] Authentication error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 24
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 100
2025-08-21 16:35:43.964 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-08-21 16:35:44.016 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21405.6707ms
2025-08-21 16:35:44.024 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:35:44.034 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 401 null application/problem+json; charset=utf-8 21669.6498ms
2025-08-21 16:39:54.269 +02:00 [INF] Application is shutting down...
2025-08-21 16:42:09.749 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:42:09.818 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 16:42:09.904 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 16:42:10.028 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 16:42:10.041 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:42:10.044 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 16:42:10.054 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 16:42:10.066 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-21 16:42:10.093 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 16:42:10.214 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-21 16:42:10.342 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-21 16:42:10.345 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-21 16:42:10.347 +02:00 [INF] Hosting environment: Development
2025-08-21 16:42:10.348 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-21 16:43:21.837 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-21 16:43:21.887 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-21 16:43:21.899 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:43:21.924 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 83.67ms
2025-08-21 16:43:21.967 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-21 16:43:21.995 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:43:22.132 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:43:22.177 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-21 16:43:22.244 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-21 16:43:22.261 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-21 16:43:22.263 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-21 16:43:43.363 +02:00 [ERR] Authentication error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 24
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 100
2025-08-21 16:43:43.403 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-08-21 16:43:43.487 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21296.1773ms
2025-08-21 16:43:43.493 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:43:43.510 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 401 null application/problem+json; charset=utf-8 21542.8902ms
2025-08-21 16:49:52.025 +02:00 [INF] Application is shutting down...
2025-08-21 16:51:00.817 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:51:00.860 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 16:51:00.913 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 16:51:01.155 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 16:51:01.171 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:51:01.179 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 16:51:01.213 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 16:51:01.226 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-21 16:51:01.256 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 16:51:01.371 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-21 16:51:01.504 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-21 16:51:01.507 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-21 16:51:01.509 +02:00 [INF] Hosting environment: Development
2025-08-21 16:51:01.511 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-21 16:51:21.334 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-21 16:51:21.404 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-21 16:51:21.411 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:51:21.458 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 124.7375ms
2025-08-21 16:51:21.573 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-21 16:51:21.604 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:51:21.741 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:51:21.788 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-21 16:51:22.046 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-21 16:51:22.062 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874
2025-08-21 16:51:22.104 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-21 16:51:22.109 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-21 16:51:43.305 +02:00 [ERR] External auth network error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 34
2025-08-21 16:51:43.321 +02:00 [ERR] Authentication error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 34
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 100
2025-08-21 16:51:43.332 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-08-21 16:51:43.374 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21519.8192ms
2025-08-21 16:51:43.387 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:51:43.399 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 401 null application/problem+json; charset=utf-8 21826.0932ms
2025-08-21 16:58:12.786 +02:00 [INF] Application is shutting down...
2025-08-21 16:58:25.948 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:58:25.995 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-21 16:58:26.042 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-21 16:58:26.183 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-21 16:58:26.195 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-21 16:58:26.202 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-21 16:58:26.222 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-21 16:58:26.230 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-21 16:58:26.296 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-21 16:58:26.422 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-21 16:58:26.540 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-21 16:58:26.544 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-21 16:58:26.545 +02:00 [INF] Hosting environment: Development
2025-08-21 16:58:26.545 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-21 16:58:32.371 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-21 16:58:32.423 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-21 16:58:32.429 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:58:32.458 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 88.9032ms
2025-08-21 16:58:32.601 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-21 16:58:32.625 +02:00 [INF] CORS policy execution successful.
2025-08-21 16:58:32.747 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:58:32.779 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-21 16:58:32.884 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0780934874
2025-08-21 16:58:32.891 +02:00 [INF] Calling external auth at https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate for phone 0780934874; proxy=none
2025-08-21 16:58:32.902 +02:00 [INF] Start processing HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-21 16:58:32.907 +02:00 [INF] Sending HTTP request POST https://apps.prime.rw/customerbackend/User/api/IntermediariesAuthenticate
2025-08-21 16:58:54.080 +02:00 [ERR] External auth network error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 37
2025-08-21 16:58:54.112 +02:00 [ERR] External auth unreachable: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (apps.prime.rw:443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DecompressionHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|4_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 37
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 104
2025-08-21 16:58:54.146 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType17`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-21 16:58:54.168 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 21382.0193ms
2025-08-21 16:58:54.172 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-21 16:58:54.186 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 503 null application/json; charset=utf-8 21580.2981ms
