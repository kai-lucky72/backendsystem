2025-08-20 14:07:55.488 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 14:07:55.590 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-20 14:07:55.669 +02:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-20 14:07:55.816 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-20 14:07:55.829 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 14:07:55.832 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-20 14:07:55.935 +02:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-20 14:07:55.948 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-20 14:07:55.998 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-20 14:07:56.151 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-20 14:07:56.280 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-20 14:07:56.282 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-20 14:07:56.283 +02:00 [INF] Hosting environment: Development
2025-08-20 14:07:56.284 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-20 14:08:30.989 +02:00 [INF] Application is shutting down...
2025-08-20 15:24:37.224 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 15:24:37.355 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-20 15:24:37.598 +02:00 [INF] Executed DbCommand (179ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-20 15:24:37.818 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-20 15:24:37.826 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 15:24:37.831 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-20 15:24:37.985 +02:00 [INF] Executed DbCommand (149ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-20 15:24:38.001 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-20 15:24:38.169 +02:00 [INF] Executed DbCommand (160ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-20 15:24:38.329 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-20 15:24:38.904 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-20 15:24:39.206 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-20 15:24:39.213 +02:00 [INF] Hosting environment: Development
2025-08-20 15:24:39.220 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-20 15:25:37.543 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-20 15:25:37.644 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-20 15:25:37.667 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:25:37.731 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 185.8699ms
2025-08-20 15:25:37.783 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-20 15:25:37.814 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:25:37.976 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '1rEOZTsvFHvvOFzaRxDu8ZFlpj64tJqaG4XB7SQs7RU'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-20 15:25:37.989 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '1rEOZTsvFHvvOFzaRxDu8ZFlpj64tJqaG4XB7SQs7RU'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-08-20 15:25:37.993 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-20 15:25:38.041 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-20 15:25:38.178 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0723374650
2025-08-20 15:25:38.190 +02:00 [ERR] Authentication error: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
System.InvalidOperationException: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.SendAsync(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpClientJsonExtensions.PostAsJsonAsync[TValue](HttpClient client, String requestUri, TValue value, CancellationToken cancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 24
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 100
2025-08-20 15:25:38.209 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-08-20 15:25:38.291 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 227.6594ms
2025-08-20 15:25:38.293 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-20 15:25:38.299 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 401 null application/problem+json; charset=utf-8 516.188ms
2025-08-20 15:26:36.959 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-20 15:26:36.993 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:26:37.009 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 50.2127ms
2025-08-20 15:26:37.081 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-20 15:26:37.114 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:26:37.234 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-20 15:26:37.257 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-20 15:26:37.352 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0723374650
2025-08-20 15:26:37.359 +02:00 [ERR] Authentication error: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
System.InvalidOperationException: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.SendAsync(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpClientJsonExtensions.PostAsJsonAsync[TValue](HttpClient client, String requestUri, TValue value, CancellationToken cancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 24
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 100
2025-08-20 15:26:37.391 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-08-20 15:26:37.412 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 146.3545ms
2025-08-20 15:26:37.415 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-20 15:26:37.420 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 401 null application/problem+json; charset=utf-8 337.921ms
2025-08-20 15:31:52.509 +02:00 [INF] Application is shutting down...
2025-08-20 15:32:39.353 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 15:32:39.862 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-20 15:32:40.111 +02:00 [INF] Executed DbCommand (226ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-20 15:32:40.472 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-20 15:32:40.507 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 15:32:40.700 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-20 15:32:41.235 +02:00 [INF] Executed DbCommand (438ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-20 15:32:41.389 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-20 15:32:41.819 +02:00 [INF] Executed DbCommand (206ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-20 15:32:42.137 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-20 15:32:42.488 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-20 15:32:42.492 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-20 15:32:42.497 +02:00 [INF] Hosting environment: Development
2025-08-20 15:32:42.500 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
