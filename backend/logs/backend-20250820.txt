2025-08-20 14:07:55.488 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 14:07:55.590 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-20 14:07:55.669 +02:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-20 14:07:55.816 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-20 14:07:55.829 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 14:07:55.832 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-20 14:07:55.935 +02:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-20 14:07:55.948 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-20 14:07:55.998 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-20 14:07:56.151 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-20 14:07:56.280 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-20 14:07:56.282 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-20 14:07:56.283 +02:00 [INF] Hosting environment: Development
2025-08-20 14:07:56.284 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-20 14:08:30.989 +02:00 [INF] Application is shutting down...
2025-08-20 15:24:37.224 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 15:24:37.355 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-20 15:24:37.598 +02:00 [INF] Executed DbCommand (179ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-20 15:24:37.818 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-20 15:24:37.826 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 15:24:37.831 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-20 15:24:37.985 +02:00 [INF] Executed DbCommand (149ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-20 15:24:38.001 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-20 15:24:38.169 +02:00 [INF] Executed DbCommand (160ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-20 15:24:38.329 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-20 15:24:38.904 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-20 15:24:39.206 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-20 15:24:39.213 +02:00 [INF] Hosting environment: Development
2025-08-20 15:24:39.220 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-20 15:25:37.543 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-20 15:25:37.644 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-20 15:25:37.667 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:25:37.731 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 185.8699ms
2025-08-20 15:25:37.783 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-20 15:25:37.814 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:25:37.976 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '1rEOZTsvFHvvOFzaRxDu8ZFlpj64tJqaG4XB7SQs7RU'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-20 15:25:37.989 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '1rEOZTsvFHvvOFzaRxDu8ZFlpj64tJqaG4XB7SQs7RU'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-08-20 15:25:37.993 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-20 15:25:38.041 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-20 15:25:38.178 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0723374650
2025-08-20 15:25:38.190 +02:00 [ERR] Authentication error: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
System.InvalidOperationException: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.SendAsync(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpClientJsonExtensions.PostAsJsonAsync[TValue](HttpClient client, String requestUri, TValue value, CancellationToken cancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 24
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 100
2025-08-20 15:25:38.209 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-08-20 15:25:38.291 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 227.6594ms
2025-08-20 15:25:38.293 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-20 15:25:38.299 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 401 null application/problem+json; charset=utf-8 516.188ms
2025-08-20 15:26:36.959 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-20 15:26:36.993 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:26:37.009 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 50.2127ms
2025-08-20 15:26:37.081 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-20 15:26:37.114 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:26:37.234 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-20 15:26:37.257 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-20 15:26:37.352 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0723374650
2025-08-20 15:26:37.359 +02:00 [ERR] Authentication error: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
System.InvalidOperationException: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.SendAsync(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpClientJsonExtensions.PostAsJsonAsync[TValue](HttpClient client, String requestUri, TValue value, CancellationToken cancellationToken)
   at backend.Services.ExternalAuthService.AuthenticateAsync(String phoneNumber, String password, CancellationToken cancellationToken) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ExternalAuthService.cs:line 24
   at backend.Controllers.AuthController.Login(AuthRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AuthController.cs:line 100
2025-08-20 15:26:37.391 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-08-20 15:26:37.412 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 146.3545ms
2025-08-20 15:26:37.415 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-20 15:26:37.420 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 401 null application/problem+json; charset=utf-8 337.921ms
2025-08-20 15:31:52.509 +02:00 [INF] Application is shutting down...
2025-08-20 15:32:39.353 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 15:32:39.862 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-20 15:32:40.111 +02:00 [INF] Executed DbCommand (226ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-20 15:32:40.472 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-20 15:32:40.507 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-20 15:32:40.700 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-20 15:32:41.235 +02:00 [INF] Executed DbCommand (438ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-20 15:32:41.389 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-20 15:32:41.819 +02:00 [INF] Executed DbCommand (206ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-20 15:32:42.137 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-20 15:32:42.488 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-20 15:32:42.492 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-20 15:32:42.497 +02:00 [INF] Hosting environment: Development
2025-08-20 15:32:42.500 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-20 15:34:58.656 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-20 15:34:58.857 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-20 15:34:58.863 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:34:58.877 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 233.2425ms
2025-08-20 15:34:58.896 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 51
2025-08-20 15:34:58.922 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:34:59.159 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-20 15:34:59.260 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-20 15:34:59.365 +02:00 [INF] LOGIN REQUEST RECEIVED - phone: 0723374650
2025-08-20 15:35:00.299 +02:00 [INF] Executed DbCommand (234ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-20 15:35:00.322 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[email] = @__email_0
2025-08-20 15:35:00.388 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__phoneNumber_0='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[phone_number] = @__phoneNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-20 15:35:00.792 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([active], [created_at], [email], [first_name], [last_login], [last_name], [national_id], [password_hash], [phone_number], [profile_image_url], [role])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-20 15:35:00.846 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p11='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-08-20 15:35:00.971 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-20 15:35:00.988 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 1721.5881ms
2025-08-20 15:35:00.991 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-20 15:35:01.007 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 2110.9287ms
2025-08-20 15:35:15.869 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-20 15:35:15.878 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:15.880 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 10.6039ms
2025-08-20 15:35:15.898 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-20 15:35:15.898 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-20 15:35:15.899 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-20 15:35:15.909 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:15.914 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-20 15:35:15.915 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:15.923 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:15.925 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 26.968ms
2025-08-20 15:35:15.939 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-20 15:35:15.931 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 32.4696ms
2025-08-20 15:35:15.932 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 33.121ms
2025-08-20 15:35:15.940 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-20 15:35:15.930 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:15.959 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:15.982 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:15.990 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 76.1628ms
2025-08-20 15:35:16.004 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 64.3239ms
2025-08-20 15:35:16.015 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 74.7929ms
2025-08-20 15:35:16.338 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-20 15:35:16.344 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:16.347 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 8.7339ms
2025-08-20 15:35:16.501 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-20 15:35:16.501 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-20 15:35:16.508 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:16.512 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:16.514 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-20 15:35:16.518 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:16.531 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-20 15:35:16.554 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:16.788 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-20 15:35:16.788 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-20 15:35:16.788 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-20 15:35:16.788 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-20 15:35:16.799 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-20 15:35:16.799 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-20 15:35:16.803 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-20 15:35:16.805 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-20 15:35:17.064 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-20 15:35:17.275 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-20 15:35:17.326 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-20 15:35:17.342 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-20 15:35:17.361 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:35:17.361 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Collections.Generic.List`1[[<>f__AnonymousType2`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:35:17.393 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 589.4002ms
2025-08-20 15:35:17.394 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-20 15:35:17.399 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-20 15:35:17.413 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 911.2721ms
2025-08-20 15:35:17.421 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:35:17.444 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 631.2758ms
2025-08-20 15:35:17.447 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-20 15:35:17.450 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 919.4446ms
2025-08-20 15:35:17.452 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 642.8575ms
2025-08-20 15:35:17.456 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-20 15:35:17.460 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-20 15:35:17.473 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 958.8639ms
2025-08-20 15:35:17.481 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:35:17.514 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 707.2571ms
2025-08-20 15:35:17.527 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-20 15:35:17.530 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 1029.4095ms
2025-08-20 15:35:17.554 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-20 15:35:17.554 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-20 15:35:17.555 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-20 15:35:17.560 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:17.567 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:17.581 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:17.612 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-20 15:35:17.612 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-20 15:35:17.612 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-20 15:35:17.617 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-20 15:35:17.618 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-20 15:35:17.620 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-20 15:35:17.701 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-20 15:35:17.712 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-20 15:35:17.729 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:35:17.732 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-20 15:35:17.732 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:35:17.736 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 109.7849ms
2025-08-20 15:35:17.736 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-20 15:35:17.742 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Collections.Generic.List`1[[<>f__AnonymousType2`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:35:17.744 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 107.6793ms
2025-08-20 15:35:17.746 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-20 15:35:17.759 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:17.764 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 132.6864ms
2025-08-20 15:35:17.769 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-20 15:35:17.773 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 219.2562ms
2025-08-20 15:35:17.776 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-20 15:35:17.780 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-20 15:35:17.797 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 241.7187ms
2025-08-20 15:35:17.848 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-20 15:35:17.848 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 293.9154ms
2025-08-20 15:35:17.968 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-20 15:35:17.981 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-20 15:35:18.012 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-20 15:35:18.021 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:35:18.041 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 93.2683ms
2025-08-20 15:35:18.052 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-20 15:35:18.056 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 319.7228ms
2025-08-20 15:35:32.979 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-20 15:35:32.984 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:32.987 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 8.3094ms
2025-08-20 15:35:33.018 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-20 15:35:33.033 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:33.039 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-20 15:35:33.049 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-20 15:35:33.180 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-20 15:35:33.199 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:35:33.216 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 149.3052ms
2025-08-20 15:35:33.225 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-20 15:35:33.232 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 213.6461ms
2025-08-20 15:35:43.167 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-20 15:35:43.170 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:43.171 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 4.34ms
2025-08-20 15:35:43.177 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-20 15:35:43.181 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:43.183 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-20 15:35:43.185 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-20 15:35:43.198 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [users] AS [u]
2025-08-20 15:35:43.212 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-20 15:35:43.228 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-20 15:35:43.240 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:35:43.251 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 64.0676ms
2025-08-20 15:35:43.290 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-20 15:35:43.350 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 173.2175ms
2025-08-20 15:35:59.957 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?page=1&limit=10 - null null
2025-08-20 15:35:59.960 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:59.961 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?page=1&limit=10 - 204 null null 4.2026ms
2025-08-20 15:35:59.967 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?page=1&limit=10 - application/json null
2025-08-20 15:35:59.971 +02:00 [INF] CORS policy execution successful.
2025-08-20 15:35:59.972 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-20 15:35:59.974 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-20 15:36:00.219 +02:00 [INF] Executed DbCommand (230ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-20 15:36:00.230 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Collections.Generic.List`1[[<>f__AnonymousType2`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-20 15:36:00.235 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 259.2854ms
2025-08-20 15:36:00.239 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-20 15:36:00.244 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?page=1&limit=10 - 200 null application/json; charset=utf-8 276.2643ms
