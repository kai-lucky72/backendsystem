2025-08-07 10:46:32.969 +02:00 [INF] No migrations were found in assembly 'backend'. A migration needs to be added before the database can be updated.
2025-08-07 10:46:33.551 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:46:33.595 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 10:46:33.752 +02:00 [INF] Executed DbCommand (144ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 10:46:34.062 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 10:46:34.080 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:46:34.100 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 10:46:34.218 +02:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:46:34.267 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:46:34.381 +02:00 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 10:46:34.737 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:46:35.018 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 10:46:35.042 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:46:35.053 +02:00 [INF] Hosting environment: Development
2025-08-07 10:46:35.081 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 10:51:36.076 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-07 10:51:36.267 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:51:36.284 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:36.316 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 262.2134ms
2025-08-07 10:51:36.346 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 62
2025-08-07 10:51:36.361 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:36.522 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 10:51:36.579 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-07 10:51:36.710 +02:00 [INF] Executing action method backend.Controllers.AuthController.Login (backend) - Validation state: "Valid"
2025-08-07 10:51:36.716 +02:00 [INF] LOGIN REQUEST RECEIVED - workId: ADM001, email: admin@example.com, role: admin
2025-08-07 10:51:37.799 +02:00 [INF] Executed DbCommand (263ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
WHERE [u].[work_id] = @__workId_0
2025-08-07 10:51:38.151 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:38.188 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:38.195 +02:00 [INF] Authentication successful for user: ADM001
2025-08-07 10:51:38.256 +02:00 [INF] Login successful for user: ADM001, returning token
2025-08-07 10:51:38.266 +02:00 [INF] Executed action method backend.Controllers.AuthController.Login (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1548.3831ms.
2025-08-07 10:51:38.290 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-07 10:51:38.326 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 1732.8208ms
2025-08-07 10:51:38.330 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 10:51:38.360 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 2013.9709ms
2025-08-07 10:51:46.259 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 10:51:46.277 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.285 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 25.1758ms
2025-08-07 10:51:46.285 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 10:51:46.291 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-07 10:51:46.294 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 10:51:46.288 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 10:51:46.311 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.318 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.326 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.330 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.340 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 52.1169ms
2025-08-07 10:51:46.335 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 43.6762ms
2025-08-07 10:51:46.339 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 44.2703ms
2025-08-07 10:51:46.333 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 47.4699ms
2025-08-07 10:51:46.352 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 10:51:46.357 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 10:51:46.369 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-07 10:51:46.411 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.426 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.428 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 10:51:46.428 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-07 10:51:46.441 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 10:51:46.447 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.455 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 102.1615ms
2025-08-07 10:51:46.474 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 117.2272ms
2025-08-07 10:51:46.525 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.534 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.545 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.553 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 184.4147ms
2025-08-07 10:51:46.579 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-07 10:51:46.610 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:46.966 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 10:51:46.968 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 10:51:46.968 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 10:51:46.968 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 10:51:47.007 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 10:51:47.009 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 10:51:47.009 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 10:51:47.025 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 10:51:47.050 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllUsers (backend) - Validation state: "Valid"
2025-08-07 10:51:47.050 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetNotifications (backend) - Validation state: "Valid"
2025-08-07 10:51:47.081 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllManagers (backend) - Validation state: "Valid"
2025-08-07 10:51:47.113 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) - Validation state: "Valid"
2025-08-07 10:51:47.307 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 10:51:47.335 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:47.355 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:47.371 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:47.480 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:47.601 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:47.620 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:47.651 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:47.672 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 10:51:47.689 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:47.701 +02:00 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 10:51:47.757 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:47.803 +02:00 [INF] Executed DbCommand (187ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 10:51:47.823 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:47.868 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:47.903 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:47.908 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'backend.Data.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-07 10:51:47.918 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAuditLogsAdvanced (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 799.6206ms.
2025-08-07 10:51:47.938 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 10:51:47.938 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:47.938 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 912.1234ms
2025-08-07 10:51:47.955 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 10:51:47.992 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at backend.Repositories.NotificationRepository.GetAllAsync() in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\NotificationRepository.cs:line 18
   at backend.Services.NotificationService.GetNotificationsPagedAsync(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 172
   at backend.Controllers.AdminController.GetNotifications(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 424
   at lambda_method268(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 10:51:47.997 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.059 +02:00 [INF] Executed DbCommand (121ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.076 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 1033.6845ms
2025-08-07 10:51:48.078 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-07 10:51:48.081 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 10:51:48.089 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:48.089 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.091 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 1662.8495ms
2025-08-07 10:51:48.095 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:48.111 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 10:51:48.115 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 10:51:48.115 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.117 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at backend.Repositories.NotificationRepository.GetAllAsync() in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\NotificationRepository.cs:line 18
   at backend.Services.NotificationService.GetNotificationsPagedAsync(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 172
   at backend.Controllers.AdminController.GetNotifications(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 424
   at lambda_method268(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 10:51:48.121 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) - Validation state: "Valid"
2025-08-07 10:51:48.126 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.179 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.180 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 500 null text/plain; charset=utf-8 1601.6042ms
2025-08-07 10:51:48.191 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-07 10:51:48.221 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5238/api/admin/notifications, Response status code: 500
2025-08-07 10:51:48.222 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.230 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 10:51:48.231 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:48.267 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 10:51:48.269 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 10:51:48.273 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAuditLogsAdvanced (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 127.6186ms.
2025-08-07 10:51:48.278 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.279 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetNotifications (backend) - Validation state: "Valid"
2025-08-07 10:51:48.282 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 10:51:48.295 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 175.4488ms
2025-08-07 10:51:48.299 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 10:51:48.307 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.308 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 230.0269ms
2025-08-07 10:51:48.318 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 10:51:48.326 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'backend.Data.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-07 10:51:48.327 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.335 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 57.4995ms
2025-08-07 10:51:48.338 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 10:51:48.339 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.340 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at backend.Repositories.NotificationRepository.GetAllAsync() in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\NotificationRepository.cs:line 18
   at backend.Services.NotificationService.GetNotificationsPagedAsync(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 172
   at backend.Controllers.AdminController.GetNotifications(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 424
   at lambda_method268(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 10:51:48.343 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.347 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.361 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:48.365 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at backend.Repositories.NotificationRepository.GetAllAsync() in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\NotificationRepository.cs:line 18
   at backend.Services.NotificationService.GetNotificationsPagedAsync(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 172
   at backend.Controllers.AdminController.GetNotifications(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 424
   at lambda_method268(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 10:51:48.366 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.369 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.390 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 500 null text/plain; charset=utf-8 198.9122ms
2025-08-07 10:51:48.390 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.393 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.397 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5238/api/admin/notifications, Response status code: 500
2025-08-07 10:51:48.405 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.407 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.425 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.426 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.452 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.454 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.474 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllManagers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1385.4736ms.
2025-08-07 10:51:48.482 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 10:51:48.483 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.506 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 1451.6595ms
2025-08-07 10:51:48.511 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 10:51:48.513 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 10:51:48.517 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.520 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:48.526 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 2097.4597ms
2025-08-07 10:51:48.543 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 10:51:48.560 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.561 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 10:51:48.577 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllManagers (backend) - Validation state: "Valid"
2025-08-07 10:51:48.589 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.621 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.621 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 10:51:48.638 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.649 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.661 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.662 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.676 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.679 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.691 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.695 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.722 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.743 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.747 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.772 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.776 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.792 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.808 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.815 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.839 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.841 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.865 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:48.865 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 10:51:48.873 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllManagers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 286.5097ms.
2025-08-07 10:51:48.876 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:48.876 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 10:51:48.885 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 309.0694ms
2025-08-07 10:51:48.892 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 10:51:48.895 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 383.9599ms
2025-08-07 10:51:48.981 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.007 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.039 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.073 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.125 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.153 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.172 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.266 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.347 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.377 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.493 +02:00 [INF] Executed DbCommand (101ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.537 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:49.559 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllUsers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2502.4956ms.
2025-08-07 10:51:49.567 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 10:51:49.654 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 2632.541ms
2025-08-07 10:51:49.656 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 10:51:49.657 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 10:51:49.660 +02:00 [INF] CORS policy execution successful.
2025-08-07 10:51:49.662 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 3221.3601ms
2025-08-07 10:51:49.665 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 10:51:49.671 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 10:51:49.675 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllUsers (backend) - Validation state: "Valid"
2025-08-07 10:51:49.699 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 10:51:49.722 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:49.752 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:49.774 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:49.793 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:49.812 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:49.837 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:49.858 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:49.873 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:49.886 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:49.895 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:49.902 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:49.916 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:49.927 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:49.935 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:49.948 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:49.969 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:49.993 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.027 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.053 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.071 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.092 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.118 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.135 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.150 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.157 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.171 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.186 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.197 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.205 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.218 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.233 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.250 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.268 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.285 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.305 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.322 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.339 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.357 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.375 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.389 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.402 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.409 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.418 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.426 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.436 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 10:51:50.442 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 10:51:50.464 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.471 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.489 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.505 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.524 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.539 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.562 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.586 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.610 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.676 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.685 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.696 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 10:51:50.702 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllUsers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1018.8538ms.
2025-08-07 10:51:50.706 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 10:51:50.712 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 1037.7354ms
2025-08-07 10:51:50.715 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 10:51:50.718 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 1061.731ms
2025-08-07 11:00:29.037 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 11:00:29.037 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 11:00:29.037 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-07 11:00:29.037 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 11:00:29.163 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:00:29.163 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:00:29.163 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:00:29.164 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:00:29.208 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 187.5102ms
2025-08-07 11:00:29.207 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 188.0984ms
2025-08-07 11:00:29.209 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 188.0687ms
2025-08-07 11:00:29.207 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 188.0933ms
2025-08-07 11:00:29.226 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-07 11:00:29.226 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 11:00:29.236 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-07 11:00:29.244 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 11:00:29.252 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:00:29.269 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:00:29.280 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:00:29.285 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:00:29.465 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 11:00:29.465 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 11:00:29.465 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 11:00:29.465 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 11:00:29.512 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 11:00:29.512 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 11:00:29.512 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 11:00:29.512 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 11:00:29.630 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllManagers (backend) - Validation state: "Valid"
2025-08-07 11:00:29.630 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllUsers (backend) - Validation state: "Valid"
2025-08-07 11:00:29.630 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetNotifications (backend) - Validation state: "Valid"
2025-08-07 11:00:29.635 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) - Validation state: "Valid"
2025-08-07 11:00:30.145 +02:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 11:00:30.145 +02:00 [INF] Executed DbCommand (167ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 11:00:30.145 +02:00 [INF] Executed DbCommand (149ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 11:00:30.159 +02:00 [INF] Executed DbCommand (221ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 11:00:30.194 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'backend.Data.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-07 11:00:30.209 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAuditLogsAdvanced (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 564.0559ms.
2025-08-07 11:00:30.209 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 679.851ms
2025-08-07 11:00:30.214 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:00:30.215 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 11:00:30.223 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at backend.Repositories.NotificationRepository.GetAllAsync() in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\NotificationRepository.cs:line 18
   at backend.Services.NotificationService.GetNotificationsPagedAsync(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 172
   at backend.Controllers.AdminController.GetNotifications(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 424
   at lambda_method268(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 11:00:30.228 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 680.9181ms
2025-08-07 11:00:30.231 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:30.248 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:00:30.338 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 11:00:30.342 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 1107.232ms
2025-08-07 11:00:30.342 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:00:30.364 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method407(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at backend.Repositories.NotificationRepository.GetAllAsync() in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\NotificationRepository.cs:line 18
   at backend.Services.NotificationService.GetNotificationsPagedAsync(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 172
   at backend.Controllers.AdminController.GetNotifications(Int32 page, Int32 limit) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 424
   at lambda_method268(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 11:00:30.372 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:30.411 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:00:30.459 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:30.460 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:00:30.461 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 500 null text/plain; charset=utf-8 1235.2778ms
2025-08-07 11:00:30.488 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5238/api/admin/notifications, Response status code: 500
2025-08-07 11:00:30.494 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:00:30.508 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:00:30.523 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:00:30.541 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:00:30.572 +02:00 [INF] Executed DbCommand (97ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:30.573 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:00:30.606 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:30.606 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllManagers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 968.5734ms.
2025-08-07 11:00:30.622 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:00:30.637 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 1113.5177ms
2025-08-07 11:00:30.639 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:30.640 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 11:00:30.646 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 1402.5679ms
2025-08-07 11:00:30.662 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:30.692 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:30.717 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:30.732 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:30.743 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:30.753 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:30.764 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:30.776 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:30.847 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:30.871 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:30.894 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:30.937 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.061 +02:00 [INF] Executed DbCommand (101ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.083 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.102 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.125 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.145 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.170 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.221 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.245 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.260 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.270 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.277 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.289 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.297 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.323 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.344 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.361 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.379 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.405 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.425 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.460 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.484 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.495 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.508 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.519 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.527 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.535 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.544 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:00:31.559 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:00:31.606 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.636 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.664 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.694 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.727 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.738 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.747 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.755 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.764 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.773 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.787 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.806 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:00:31.810 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllUsers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2170.9751ms.
2025-08-07 11:00:31.814 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:00:31.857 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 2314.357ms
2025-08-07 11:00:31.861 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 11:00:31.868 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 2640.5131ms
2025-08-07 11:12:01.763 +02:00 [INF] Application is shutting down...
2025-08-07 11:12:26.742 +02:00 [INF] No migrations were found in assembly 'backend'. A migration needs to be added before the database can be updated.
2025-08-07 11:12:27.649 +02:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 11:12:27.703 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 11:12:28.349 +02:00 [INF] Executed DbCommand (637ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 11:12:28.974 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 11:12:29.003 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 11:12:29.016 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 11:12:29.243 +02:00 [INF] Executed DbCommand (208ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 11:12:29.281 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 11:12:29.370 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 11:12:29.582 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 11:12:29.862 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 11:12:29.867 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 11:12:29.869 +02:00 [INF] Hosting environment: Development
2025-08-07 11:12:29.870 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 11:13:35.741 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-07 11:13:35.741 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 11:13:35.741 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 11:13:35.741 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 11:13:35.867 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 11:13:35.881 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:13:35.881 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:13:35.881 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:13:35.881 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:13:35.921 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 186.4809ms
2025-08-07 11:13:35.921 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 186.3957ms
2025-08-07 11:13:35.921 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 186.4345ms
2025-08-07 11:13:35.921 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 186.4238ms
2025-08-07 11:13:35.954 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 11:13:35.954 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-07 11:13:35.959 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-07 11:13:35.963 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 11:13:35.978 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:13:35.978 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:13:35.978 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:13:35.981 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:13:36.423 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 11:13:36.423 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 11:13:36.423 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 11:13:36.424 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 11:13:36.499 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 11:13:36.499 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 11:13:36.509 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 11:13:36.509 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 11:13:36.577 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllUsers (backend) - Validation state: "Valid"
2025-08-07 11:13:36.577 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllManagers (backend) - Validation state: "Valid"
2025-08-07 11:13:36.577 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetNotifications (backend) - Validation state: "Valid"
2025-08-07 11:13:36.578 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) - Validation state: "Valid"
2025-08-07 11:13:37.526 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 11:13:37.528 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 11:13:37.536 +02:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 11:13:37.544 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 11:13:37.672 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAuditLogsAdvanced (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1082.9964ms.
2025-08-07 11:13:37.681 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetNotifications (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1099.0682ms.
2025-08-07 11:13:37.694 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:13:37.694 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:13:37.762 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 1238.8988ms
2025-08-07 11:13:37.762 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 1245.3081ms
2025-08-07 11:13:37.766 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 11:13:37.767 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 11:13:37.792 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 1838.0942ms
2025-08-07 11:13:37.792 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 1833.1559ms
2025-08-07 11:13:37.815 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:37.820 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:13:37.873 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:37.887 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:37.894 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:37.904 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:37.911 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:37.915 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:37.920 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:37.929 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:37.935 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:37.942 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:13:37.944 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:37.948 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:13:37.957 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:37.970 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:37.985 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:13:37.987 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.000 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:13:38.003 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.012 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:13:38.014 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.030 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:13:38.031 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.046 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.046 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:13:38.052 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllManagers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1472.1685ms.
2025-08-07 11:13:38.056 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:13:38.060 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.078 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 1573.8599ms
2025-08-07 11:13:38.083 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 11:13:38.086 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.086 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 2132.2326ms
2025-08-07 11:13:38.109 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.125 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.138 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.144 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.149 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.153 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.156 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.160 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.163 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.168 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.171 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.175 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.178 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.181 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.186 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.188 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.191 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.194 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.211 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.225 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.238 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.245 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.261 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.274 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.287 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:13:38.306 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:13:38.488 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.527 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.546 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.554 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.566 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.580 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.593 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.612 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.639 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.659 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.669 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.675 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:13:38.679 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllUsers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2100.5353ms.
2025-08-07 11:13:38.682 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:13:38.732 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 2225.5867ms
2025-08-07 11:13:38.736 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 11:13:38.738 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 2774.9113ms
2025-08-07 11:21:23.008 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 11:21:23.145 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:21:23.171 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 181.4883ms
2025-08-07 11:21:23.189 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 11:21:23.201 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:21:23.556 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 11:21:23.588 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 11:21:23.744 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllManagers (backend) - Validation state: "Valid"
2025-08-07 11:21:24.861 +02:00 [INF] Executed DbCommand (249ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 11:21:25.286 +02:00 [INF] Executed DbCommand (206ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:25.322 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:25.335 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:25.343 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:25.355 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:25.370 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:25.492 +02:00 [INF] Executed DbCommand (101ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:25.592 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:25.634 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllManagers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1877.6495ms.
2025-08-07 11:21:25.644 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:21:25.671 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 2073.8052ms
2025-08-07 11:21:25.675 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 11:21:25.680 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 2490.4868ms
2025-08-07 11:21:28.332 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 11:21:28.346 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:21:28.352 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 11:21:28.353 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 19.9057ms
2025-08-07 11:21:28.352 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 11:21:28.368 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-07 11:21:28.370 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:21:28.389 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 11:21:28.417 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:21:28.436 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:21:28.439 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 86.6555ms
2025-08-07 11:21:28.466 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:21:28.471 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 119.0652ms
2025-08-07 11:21:28.475 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 107.2672ms
2025-08-07 11:21:28.508 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 11:21:28.511 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 11:21:28.525 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-07 11:21:28.542 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-07 11:21:28.559 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:21:28.567 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 11:21:28.573 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:21:28.589 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:21:28.594 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 11:21:28.623 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllManagers (backend) - Validation state: "Valid"
2025-08-07 11:21:28.629 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 11:21:28.635 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 11:21:28.639 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 11:21:28.669 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 11:21:28.671 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 11:21:28.690 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllUsers (backend) - Validation state: "Valid"
2025-08-07 11:21:28.752 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetNotifications (backend) - Validation state: "Valid"
2025-08-07 11:21:28.753 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) - Validation state: "Valid"
2025-08-07 11:21:28.782 +02:00 [INF] Executed DbCommand (128ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 11:21:28.842 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 11:21:28.869 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:28.892 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:28.965 +02:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 11:21:29.100 +02:00 [INF] Executed DbCommand (184ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 11:21:29.120 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetNotifications (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 346.2403ms.
2025-08-07 11:21:29.130 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:21:29.145 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 408.6455ms
2025-08-07 11:21:29.151 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAuditLogsAdvanced (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 367.8386ms.
2025-08-07 11:21:29.157 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 11:21:29.166 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:21:29.176 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 633.3898ms
2025-08-07 11:21:29.184 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 463.5858ms
2025-08-07 11:21:29.197 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 11:21:29.203 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 677.3947ms
2025-08-07 11:21:29.483 +02:00 [INF] Executed DbCommand (556ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:29.483 +02:00 [INF] Executed DbCommand (576ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:29.517 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:29.518 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:29.574 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:29.577 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:29.591 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:29.608 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:29.620 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:29.637 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:29.720 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 11:21:29.767 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:29.773 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllManagers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1126.3362ms.
2025-08-07 11:21:29.791 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:21:29.806 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 1186.5727ms
2025-08-07 11:21:29.820 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 11:21:29.820 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:29.825 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 1435.3514ms
2025-08-07 11:21:29.858 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:29.878 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:29.894 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:29.923 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:29.966 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:29.992 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.037 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.107 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.217 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.243 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.275 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.357 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.412 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.449 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.490 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.537 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.574 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.593 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.606 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.620 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.630 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.638 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.651 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.670 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.701 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.731 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.758 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.786 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.815 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.831 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.848 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.862 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.875 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.889 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:30.902 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:30.928 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:31.008 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:31.056 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:21:31.098 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:21:31.158 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.170 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.183 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.201 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.218 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.235 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.250 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.266 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.281 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.294 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.313 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.326 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:21:31.331 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllUsers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2589.1921ms.
2025-08-07 11:21:31.340 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:21:31.373 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 2684.7089ms
2025-08-07 11:21:31.375 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 11:21:31.378 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 499 null application/json; charset=utf-8 2870.3808ms
2025-08-07 11:23:53.076 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 11:23:53.141 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:23:53.166 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 99.8561ms
2025-08-07 11:23:53.175 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 11:23:53.180 +02:00 [INF] CORS policy execution successful.
2025-08-07 11:23:53.411 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 11:23:53.426 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 11:23:53.486 +02:00 [INF] Executing action method backend.Controllers.AdminController.GetAllUsers (backend) - Validation state: "Valid"
2025-08-07 11:23:53.818 +02:00 [INF] Executed DbCommand (257ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 11:23:53.929 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:53.959 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:53.970 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.022 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.048 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.067 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.082 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.096 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.114 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.139 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.159 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.174 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.188 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.200 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.208 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.218 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.228 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.233 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.246 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.256 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.272 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.303 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.354 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.404 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.431 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.438 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.450 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.457 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.464 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.479 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.526 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.544 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.567 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.580 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.597 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.614 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.631 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.649 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.666 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.679 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.687 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.698 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.703 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.709 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.715 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 11:23:54.721 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 11:23:54.760 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.767 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.783 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.797 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.817 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.835 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.854 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.870 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.889 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.904 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.925 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.933 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 11:23:54.942 +02:00 [INF] Executed action method backend.Controllers.AdminController.GetAllUsers (backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1447.5284ms.
2025-08-07 11:23:54.948 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 11:23:54.958 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 1521.5139ms
2025-08-07 11:23:54.960 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 11:23:54.963 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 1787.7139ms
2025-08-07 11:32:07.972 +02:00 [INF] Application is shutting down...
2025-08-07 12:41:19.854 +02:00 [INF] No migrations were found in assembly 'backend'. A migration needs to be added before the database can be updated.
2025-08-07 12:41:20.343 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 12:41:20.364 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 12:41:20.505 +02:00 [INF] Executed DbCommand (135ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 12:41:20.755 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 12:41:20.773 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 12:41:20.788 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 12:41:20.904 +02:00 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 12:41:20.920 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 12:41:20.942 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 12:41:21.044 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 12:41:21.172 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 12:41:21.178 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 12:41:21.181 +02:00 [INF] Hosting environment: Development
2025-08-07 12:41:21.184 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 12:44:30.859 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-07 12:44:30.941 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 12:44:30.946 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:30.959 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 102.942ms
2025-08-07 12:44:30.980 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 62
2025-08-07 12:44:30.989 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:31.160 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 12:44:31.201 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-07 12:44:31.281 +02:00 [INF] LOGIN REQUEST RECEIVED - workId: ADM001, email: admin@example.com, role: admin
2025-08-07 12:44:31.760 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
WHERE [u].[work_id] = @__workId_0
2025-08-07 12:44:31.935 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:31.961 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:31.964 +02:00 [INF] Authentication successful for user: ADM001
2025-08-07 12:44:31.983 +02:00 [INF] Login successful for user: ADM001, returning token
2025-08-07 12:44:31.996 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-07 12:44:32.019 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 807.2555ms
2025-08-07 12:44:32.026 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 12:44:32.034 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 1054.3543ms
2025-08-07 12:44:35.476 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 12:44:35.480 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 12:44:35.484 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 12:44:35.486 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-07 12:44:35.487 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 12:44:35.487 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 12:44:35.487 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.494 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.498 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.503 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.508 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.515 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.518 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 42.602ms
2025-08-07 12:44:35.524 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 41.6806ms
2025-08-07 12:44:35.526 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 41.4826ms
2025-08-07 12:44:35.535 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 48.8025ms
2025-08-07 12:44:35.545 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 58.6878ms
2025-08-07 12:44:35.551 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 63.9808ms
2025-08-07 12:44:35.568 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 12:44:35.577 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-07 12:44:35.610 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-07 12:44:35.611 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-07 12:44:35.627 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 12:44:35.640 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 12:44:35.646 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.660 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.707 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.743 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.811 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.877 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:35.880 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 312.1027ms
2025-08-07 12:44:35.896 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 318.8864ms
2025-08-07 12:44:36.061 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 12:44:36.062 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 12:44:36.063 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 12:44:36.063 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 12:44:36.213 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 12:44:36.214 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 12:44:36.214 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 12:44:36.230 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 12:44:36.525 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 12:44:36.547 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:36.565 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:36.578 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:36.595 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:36.668 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:36.677 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:36.688 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:36.699 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:36.709 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:36.724 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:36.733 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 12:44:36.735 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:36.737 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 12:44:36.752 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 12:44:36.755 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:36.778 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:36.795 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:36.811 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:36.829 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:36.872 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:44:36.876 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:36.974 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:36.976 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.003 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:44:37.010 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.038 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 810.8477ms
2025-08-07 12:44:37.044 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-07 12:44:37.054 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.054 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 12:44:37.069 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:37.070 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 810.0969ms
2025-08-07 12:44:37.076 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-07 12:44:37.084 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 1473.4064ms
2025-08-07 12:44:37.084 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.094 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 12:44:37.106 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 12:44:37.111 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:37.146 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.146 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 1534.8807ms
2025-08-07 12:44:37.148 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 12:44:37.156 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 12:44:37.166 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.183 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 12:44:37.191 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 12:44:37.199 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.212 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 12:44:37.220 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.227 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:44:37.227 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.249 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.250 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 73.072ms
2025-08-07 12:44:37.263 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:44:37.267 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.276 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 12:44:37.279 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.281 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 77.981ms
2025-08-07 12:44:37.294 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 249.7872ms
2025-08-07 12:44:37.295 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.305 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 12:44:37.309 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.326 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 250.387ms
2025-08-07 12:44:37.326 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.339 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.492 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.589 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.596 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.603 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.607 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.613 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:44:37.663 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.675 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 1391.3622ms
2025-08-07 12:44:37.679 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.680 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 12:44:37.681 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 12:44:37.693 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.697 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:37.701 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 2074.0834ms
2025-08-07 12:44:37.710 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.711 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 12:44:37.726 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.727 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 12:44:37.741 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.745 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 12:44:37.751 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.759 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.760 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.774 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.776 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.785 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.791 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.796 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.806 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.809 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.815 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.824 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.831 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.841 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.844 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:37.856 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:44:37.859 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:37.864 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:44:37.876 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 135.9864ms
2025-08-07 12:44:37.886 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 12:44:37.893 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 212.8158ms
2025-08-07 12:44:37.954 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:37.962 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:37.974 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:37.983 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:37.992 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.005 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.016 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.026 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.039 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.050 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.059 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.106 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.113 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:44:38.129 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 1819.9159ms
2025-08-07 12:44:38.133 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 12:44:38.134 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 12:44:38.137 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 2497.248ms
2025-08-07 12:44:38.143 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:44:38.154 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 12:44:38.159 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 12:44:38.169 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 12:44:38.181 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.194 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.202 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.214 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.223 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.233 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.245 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.254 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.269 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.282 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.297 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.308 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.323 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.331 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.341 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.352 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.362 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.372 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.379 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.390 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.398 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.407 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.439 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.458 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.480 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.491 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.509 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.522 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.530 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.540 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.553 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.562 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.576 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.588 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.599 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.610 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.624 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.640 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.655 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.664 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.674 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.685 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.693 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.705 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.712 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:44:38.722 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:44:38.731 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.740 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.749 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.758 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.771 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.778 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.789 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.797 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.807 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.817 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.826 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.840 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:44:38.846 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:44:38.852 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 688.0638ms
2025-08-07 12:44:38.855 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 12:44:38.857 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 723.1749ms
2025-08-07 12:45:27.268 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 12:45:27.268 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 12:45:27.278 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:45:27.279 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 12:45:27.283 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-07 12:45:27.286 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:45:27.290 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 22.5595ms
2025-08-07 12:45:27.296 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:45:27.306 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:45:27.309 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 40.8761ms
2025-08-07 12:45:27.325 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 12:45:27.327 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 48.7183ms
2025-08-07 12:45:27.330 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 46.4566ms
2025-08-07 12:45:27.342 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 12:45:27.351 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:45:27.362 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-07 12:45:27.373 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-07 12:45:27.380 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:45:27.385 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 12:45:27.395 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:45:27.404 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:45:27.409 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 12:45:27.411 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 12:45:27.414 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 12:45:27.416 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 12:45:27.418 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 12:45:27.429 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 12:45:27.432 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 12:45:27.491 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 12:45:27.500 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 12:45:27.503 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 12:45:27.521 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 12:45:27.524 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:45:27.572 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:27.601 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:45:27.602 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 152.8232ms
2025-08-07 12:45:27.636 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 180.8149ms
2025-08-07 12:45:27.650 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 12:45:27.650 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:27.656 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 12:45:27.662 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 300.1667ms
2025-08-07 12:45:27.675 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 301.7634ms
2025-08-07 12:45:27.679 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:27.797 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:27.801 +02:00 [INF] Executed DbCommand (255ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:45:27.817 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:27.824 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:45:27.842 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:27.849 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:45:27.866 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:45:27.868 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:27.881 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:45:27.899 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:27.906 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:45:27.916 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:27.926 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:45:27.933 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:27.998 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:45:28.017 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.026 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:45:28.049 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 625.3858ms
2025-08-07 12:45:28.056 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 12:45:28.057 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.065 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 738.9449ms
2025-08-07 12:45:28.094 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.120 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.136 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.153 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.167 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.183 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.203 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.232 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.257 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.284 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.316 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.346 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.368 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.383 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.397 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.408 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.420 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.435 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.472 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.503 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.540 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.574 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.614 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.635 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.652 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.667 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.683 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.697 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.726 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.752 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.782 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.806 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.845 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 12:45:28.882 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 12:45:28.924 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:28.936 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:28.951 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:28.984 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:29.004 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:29.024 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:29.047 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:29.068 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:29.091 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:29.114 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:29.130 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:29.140 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 12:45:29.148 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:45:29.151 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 1713.2943ms
2025-08-07 12:45:29.155 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 12:45:29.160 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 1817.5592ms
2025-08-07 12:46:37.596 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 12:46:37.605 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:46:37.609 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 12.893ms
2025-08-07 12:46:37.622 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 12:46:37.632 +02:00 [INF] CORS policy execution successful.
2025-08-07 12:46:37.638 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 12:46:37.642 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 12:46:37.714 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 12:46:37.756 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:46:37.765 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:46:37.777 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:46:37.792 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:46:37.809 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:46:37.825 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:46:37.851 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:46:37.899 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 12:46:37.937 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 12:46:37.965 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 316.4249ms
2025-08-07 12:46:37.975 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 12:46:37.992 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 369.9935ms
2025-08-07 13:00:26.376 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - null null
2025-08-07 13:00:26.382 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:00:26.382 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - 204 null null 6.0874ms
2025-08-07 13:00:26.385 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - application/json 19
2025-08-07 13:00:26.387 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:00:26.389 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:00:26.398 +02:00 [INF] Route matched with {action = "UpdateManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateManager(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.AdminController (backend).
2025-08-07 13:00:26.488 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 13:00:26.591 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int64), @p0='?' (DbType = Int64), @p1='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [managers] SET [created_by] = @p0, [department] = @p1
OUTPUT 1
WHERE [user_id] = @p2;
2025-08-07 13:00:26.675 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 13:00:26.690 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 13:00:26.691 +02:00 [INF] Executed action backend.Controllers.AdminController.UpdateManager (backend) in 288.4328ms
2025-08-07 13:00:26.693 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:00:26.701 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - 200 null application/json; charset=utf-8 315.8303ms
2025-08-07 13:01:28.793 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 13:01:28.825 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:01:28.843 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 50.0745ms
2025-08-07 13:01:28.876 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 13:01:28.899 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:01:28.914 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 13:01:28.935 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 13:01:29.057 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 13:01:29.132 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:01:29.158 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:01:29.658 +02:00 [INF] Executed DbCommand (186ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:01:29.774 +02:00 [INF] Executed DbCommand (104ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:01:29.791 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:01:29.840 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:01:29.916 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:01:29.950 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:01:29.989 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 13:01:30.000 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 1029.8799ms
2025-08-07 13:01:30.008 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 13:01:30.022 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 1145.4388ms
2025-08-07 13:03:03.886 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - null null
2025-08-07 13:03:03.889 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:03:03.890 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - 204 null null 4.048ms
2025-08-07 13:03:03.896 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - application/json 19
2025-08-07 13:03:03.902 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:03:03.904 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:03:03.909 +02:00 [INF] Route matched with {action = "UpdateManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateManager(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.AdminController (backend).
2025-08-07 13:03:03.966 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 13:03:03.977 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int64), @p0='?' (DbType = Int64), @p1='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [managers] SET [created_by] = @p0, [department] = @p1
OUTPUT 1
WHERE [user_id] = @p2;
2025-08-07 13:03:03.987 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 13:03:03.994 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 13:03:03.995 +02:00 [INF] Executed action backend.Controllers.AdminController.UpdateManager (backend) in 81.9023ms
2025-08-07 13:03:03.997 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:03:03.999 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - 200 null application/json; charset=utf-8 102.7236ms
2025-08-07 13:03:21.291 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - null null
2025-08-07 13:03:21.294 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:03:21.295 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - 204 null null 3.8677ms
2025-08-07 13:03:21.299 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - application/json 19
2025-08-07 13:03:21.302 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:03:21.306 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:03:21.308 +02:00 [INF] Route matched with {action = "UpdateManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateManager(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.AdminController (backend).
2025-08-07 13:03:21.317 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 13:03:21.329 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int64), @p0='?' (DbType = Int64), @p1='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [managers] SET [created_by] = @p0, [department] = @p1
OUTPUT 1
WHERE [user_id] = @p2;
2025-08-07 13:03:21.336 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 13:03:21.339 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 13:03:21.343 +02:00 [INF] Executed action backend.Controllers.AdminController.UpdateManager (backend) in 30.5485ms
2025-08-07 13:03:21.345 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:03:21.346 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - 200 null application/json; charset=utf-8 47.2277ms
2025-08-07 13:05:11.856 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - null null
2025-08-07 13:05:11.859 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:05:11.862 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - 204 null null 5.7976ms
2025-08-07 13:05:11.868 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - application/json 19
2025-08-07 13:05:11.872 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:05:11.874 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:05:11.878 +02:00 [INF] Route matched with {action = "UpdateManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateManager(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.AdminController (backend).
2025-08-07 13:05:11.961 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 13:05:11.980 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int64), @p0='?' (DbType = Int64), @p1='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [managers] SET [created_by] = @p0, [department] = @p1
OUTPUT 1
WHERE [user_id] = @p2;
2025-08-07 13:05:11.996 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 13:05:12.001 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 13:05:12.005 +02:00 [INF] Executed action backend.Controllers.AdminController.UpdateManager (backend) in 121.3331ms
2025-08-07 13:05:12.008 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:05:12.010 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - 200 null application/json; charset=utf-8 142.3313ms
2025-08-07 13:08:06.978 +02:00 [INF] Application is shutting down...
2025-08-07 13:15:24.927 +02:00 [INF] No migrations were found in assembly 'backend'. A migration needs to be added before the database can be updated.
2025-08-07 13:15:25.522 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 13:15:25.534 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 13:15:25.611 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 13:15:26.084 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 13:15:26.152 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 13:15:26.188 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 13:15:26.691 +02:00 [INF] Executed DbCommand (479ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 13:15:26.735 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 13:15:26.826 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 13:15:27.047 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 13:15:27.268 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 13:15:27.274 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 13:15:27.276 +02:00 [INF] Hosting environment: Development
2025-08-07 13:15:27.279 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 13:17:13.787 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 13:17:13.899 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 13:17:13.919 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:17:13.998 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 212.7094ms
2025-08-07 13:17:14.086 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 13:17:14.125 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:17:14.518 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 13:17:14.572 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 13:17:15.728 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 13:17:16.294 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:17:16.414 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:17:16.430 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:17:16.450 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:17:16.471 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:17:16.491 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:17:16.511 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:17:16.534 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 13:17:16.561 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 13:17:16.614 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 2024.7366ms
2025-08-07 13:17:16.623 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 13:17:16.636 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 2550.7992ms
2025-08-07 13:17:39.529 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - null null
2025-08-07 13:17:39.532 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:17:39.533 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - 204 null null 4.3155ms
2025-08-07 13:17:39.540 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - application/json 19
2025-08-07 13:17:39.549 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:17:39.565 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:17:39.594 +02:00 [INF] Route matched with {action = "UpdateManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateManager(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.AdminController (backend).
2025-08-07 13:17:39.714 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 13:17:39.795 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int64), @p0='?' (DbType = Int64), @p1='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [managers] SET [created_by] = @p0, [department] = @p1
OUTPUT 1
WHERE [user_id] = @p2;
2025-08-07 13:17:39.894 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 13:17:39.910 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 13:17:39.922 +02:00 [INF] Executed action backend.Controllers.AdminController.UpdateManager (backend) in 320.4064ms
2025-08-07 13:17:39.924 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:17:39.928 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - 200 null application/json; charset=utf-8 387.3139ms
2025-08-07 13:20:27.595 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - null null
2025-08-07 13:20:27.600 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:20:27.603 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/004 - 204 null null 6.7561ms
2025-08-07 13:20:27.613 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - application/json 19
2025-08-07 13:20:27.623 +02:00 [INF] CORS policy execution successful.
2025-08-07 13:20:27.676 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:20:27.683 +02:00 [INF] Route matched with {action = "UpdateManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateManager(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.AdminController (backend).
2025-08-07 13:20:27.788 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 13:20:27.817 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p2='?' (DbType = Int64), @p0='?' (DbType = Int64), @p1='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [managers] SET [created_by] = @p0, [department] = @p1
OUTPUT 1
WHERE [user_id] = @p2;
2025-08-07 13:20:27.865 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 13:20:27.872 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 13:20:27.875 +02:00 [INF] Executed action backend.Controllers.AdminController.UpdateManager (backend) in 184.2459ms
2025-08-07 13:20:27.881 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 13:20:27.885 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/admin/managers/004 - 200 null application/json; charset=utf-8 271.5751ms
2025-08-07 13:58:24.794 +02:00 [INF] No migrations were found in assembly 'backend'. A migration needs to be added before the database can be updated.
2025-08-07 13:58:25.208 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 13:58:25.234 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 13:58:25.315 +02:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 13:58:25.534 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 13:58:25.551 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 13:58:25.554 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 13:58:25.608 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 13:58:25.624 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 13:58:25.639 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 13:58:25.770 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 13:58:25.925 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 13:58:25.931 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 13:58:25.933 +02:00 [INF] Hosting environment: Development
2025-08-07 13:58:25.936 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 14:03:03.100 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-07 14:03:03.127 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 14:03:03.141 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:03.150 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 51.8336ms
2025-08-07 14:03:03.167 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 62
2025-08-07 14:03:03.185 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:03.275 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 14:03:03.290 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-07 14:03:03.338 +02:00 [INF] LOGIN REQUEST RECEIVED - workId: ADM001, email: admin@example.com, role: admin
2025-08-07 14:03:03.617 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
WHERE [u].[work_id] = @__workId_0
2025-08-07 14:03:03.755 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:03.767 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:03.769 +02:00 [INF] Authentication successful for user: ADM001
2025-08-07 14:03:03.857 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@p12='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 60) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10, [work_id] = @p11
OUTPUT 1
WHERE [Id] = @p12;
2025-08-07 14:03:03.873 +02:00 [INF] Login successful for user: ADM001, returning token
2025-08-07 14:03:03.880 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-07 14:03:03.896 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 600.7977ms
2025-08-07 14:03:03.901 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 14:03:03.909 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 742.1424ms
2025-08-07 14:03:07.960 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 14:03:07.968 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 14:03:07.981 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:07.973 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:07.982 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 14:03:07.985 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 16.3966ms
2025-08-07 14:03:08.052 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 14:03:07.988 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 27.579ms
2025-08-07 14:03:07.989 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 14:03:07.989 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 14:03:08.038 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:07.987 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-07 14:03:08.067 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:08.146 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 94.9519ms
2025-08-07 14:03:08.118 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:08.129 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:08.162 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 173.3911ms
2025-08-07 14:03:08.143 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:08.086 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - null null
2025-08-07 14:03:08.157 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 14:03:08.158 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 169.488ms
2025-08-07 14:03:08.132 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 149.514ms
2025-08-07 14:03:08.201 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 213.7368ms
2025-08-07 14:03:08.229 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:08.235 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:08.274 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-07 14:03:08.313 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 14:03:08.333 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-07 14:03:08.337 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?limit=10 - 204 null null 251.0186ms
2025-08-07 14:03:08.355 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:08.365 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:08.373 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:08.436 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 14:03:08.436 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 14:03:08.436 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 14:03:08.437 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 14:03:08.482 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 14:03:08.479 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 14:03:08.497 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:03:08.499 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:03:08.822 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 14:03:08.855 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:08.903 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:08.930 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:08.961 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.049 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.061 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.076 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 14:03:09.077 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.099 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 14:03:09.100 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.103 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 14:03:09.136 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.163 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.182 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.210 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.228 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.292 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.299 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.305 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:03:09.334 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.347 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:03:09.363 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.382 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.384 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 853.9998ms
2025-08-07 14:03:09.388 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - application/json null
2025-08-07 14:03:09.400 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 14:03:09.400 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 848.9449ms
2025-08-07 14:03:09.403 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications - application/json null
2025-08-07 14:03:09.407 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.412 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:09.417 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 1084.6297ms
2025-08-07 14:03:09.425 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 14:03:09.432 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:09.449 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.462 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 14:03:09.462 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 1187.9806ms
2025-08-07 14:03:09.464 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 14:03:09.474 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:03:09.479 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.489 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:03:09.506 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.509 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.526 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.536 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.543 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 14:03:09.544 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 14:03:09.550 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.558 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.577 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:03:09.579 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.580 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:03:09.591 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 78.9432ms
2025-08-07 14:03:09.610 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 14:03:09.602 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 104.7191ms
2025-08-07 14:03:09.603 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.592 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.617 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications - 200 null application/json; charset=utf-8 213.1324ms
2025-08-07 14:03:09.622 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 14:03:09.634 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.644 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.648 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?limit=10 - 200 null application/json; charset=utf-8 260.7248ms
2025-08-07 14:03:09.670 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.681 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.700 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:03:09.700 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.717 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.719 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 1215.9796ms
2025-08-07 14:03:09.722 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 14:03:09.727 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.728 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 14:03:09.735 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:09.744 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 1587.4455ms
2025-08-07 14:03:09.745 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.749 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 14:03:09.767 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 14:03:09.769 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.782 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 14:03:09.788 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.797 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.802 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.807 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.815 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.823 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.826 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.837 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.840 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.849 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.863 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.866 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.874 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.886 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.890 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.897 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:03:09.905 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.908 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:03:09.919 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 146.0121ms
2025-08-07 14:03:09.921 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.923 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 14:03:09.935 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 212.1389ms
2025-08-07 14:03:09.939 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.963 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:09.976 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:09.990 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.004 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.095 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.104 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.114 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.125 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.139 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.153 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.169 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.179 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.190 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.208 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.226 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.239 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:10.252 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:03:10.271 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 1773.956ms
2025-08-07 14:03:10.278 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 14:03:10.280 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 14:03:10.283 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 1969.6783ms
2025-08-07 14:03:10.293 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:10.306 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 14:03:10.310 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 14:03:10.324 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 14:03:10.338 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.355 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.368 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.380 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.392 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.405 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.426 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.442 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.458 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.473 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.488 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.510 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.522 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.550 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.571 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.599 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.611 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.629 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.644 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.658 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.677 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.692 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.708 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.722 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.738 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.757 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.775 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.792 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:10.809 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:10.990 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:11.003 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:11.012 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:11.020 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:11.042 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:11.055 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:11.073 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:11.095 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:11.106 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:11.121 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:11.133 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:11.144 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:11.158 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:11.171 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:11.191 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:11.205 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:11.220 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:11.234 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.252 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.269 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.282 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.294 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.314 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.331 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.344 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.356 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.371 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.386 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.405 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:11.416 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:03:11.422 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 1103.624ms
2025-08-07 14:03:11.427 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 14:03:11.434 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 1153.6673ms
2025-08-07 14:03:42.215 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 14:03:42.221 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:42.224 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 8.6927ms
2025-08-07 14:03:42.231 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 14:03:42.237 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:03:42.240 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 14:03:42.243 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 14:03:42.288 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 14:03:42.313 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.339 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.355 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.369 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.381 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.392 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.402 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.412 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.420 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.430 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.438 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.446 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.463 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.475 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.495 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.522 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.546 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.567 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.584 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.606 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.628 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.645 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.655 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.664 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.672 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.682 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.694 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.701 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.711 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.730 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.747 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.765 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.785 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.800 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.817 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.834 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.850 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.868 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.885 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.896 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.904 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.912 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.918 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.929 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.936 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 14:03:42.945 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 14:03:42.981 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.004 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.025 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.052 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.083 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.122 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.149 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.165 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.179 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.198 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.215 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.229 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 14:03:43.243 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:03:43.247 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 996.4715ms
2025-08-07 14:03:43.255 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 14:03:43.260 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 1029.6108ms
2025-08-07 14:04:09.900 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 14:04:09.912 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:04:09.917 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 16.7727ms
2025-08-07 14:04:09.942 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 14:04:09.961 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:04:09.971 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 14:04:09.975 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 14:04:10.024 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 14:04:10.073 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:04:10.086 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:04:10.100 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:04:10.134 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:04:10.177 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:04:10.196 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:04:10.218 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:04:10.238 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:04:10.248 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:04:10.253 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 265.9141ms
2025-08-07 14:04:10.256 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 14:04:10.260 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 317.2005ms
2025-08-07 14:04:14.683 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/031 - null null
2025-08-07 14:04:14.685 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:04:14.685 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/031 - 204 null null 2.3808ms
2025-08-07 14:04:14.688 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/admin/managers/031 - application/json 21
2025-08-07 14:04:14.690 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:04:14.691 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 14:04:14.695 +02:00 [INF] Route matched with {action = "UpdateManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateManager(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:04:14.731 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 14:04:14.780 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p2='?' (DbType = Int64), @p0='?' (DbType = Int64), @p1='?' (Size = 100) (DbType = AnsiString), @p15='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime), @p5='?' (Size = 255) (DbType = AnsiString), @p6='?' (Size = 100) (DbType = AnsiString), @p7='?' (DbType = DateTime), @p8='?' (Size = 100) (DbType = AnsiString), @p9='?' (Size = 50) (DbType = AnsiString), @p10='?' (Size = 60) (DbType = AnsiString), @p11='?' (Size = 20) (DbType = AnsiString), @p12='?' (Size = 4000), @p13='?' (Size = 20) (DbType = AnsiString), @p14='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [managers] SET [created_by] = @p0, [department] = @p1
OUTPUT 1
WHERE [user_id] = @p2;
UPDATE [users] SET [active] = @p3, [created_at] = @p4, [email] = @p5, [first_name] = @p6, [last_login] = @p7, [last_name] = @p8, [national_id] = @p9, [password_hash] = @p10, [phone_number] = @p11, [profile_image_url] = @p12, [role] = @p13, [work_id] = @p14
OUTPUT 1
WHERE [Id] = @p15;
2025-08-07 14:04:14.855 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 14:04:14.867 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 14:04:14.868 +02:00 [INF] Executed action backend.Controllers.AdminController.UpdateManager (backend) in 170.9562ms
2025-08-07 14:04:14.870 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.UpdateManager (backend)'
2025-08-07 14:04:14.872 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/admin/managers/031 - 200 null application/json; charset=utf-8 184.0908ms
2025-08-07 14:04:38.127 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?page=1&limit=10 - null null
2025-08-07 14:04:38.133 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:04:38.135 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?page=1&limit=10 - 204 null null 7.9871ms
2025-08-07 14:04:38.149 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?page=1&limit=10 - application/json null
2025-08-07 14:04:38.159 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:04:38.163 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 14:04:38.174 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:04:38.252 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 14:04:38.259 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:04:38.264 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 84.2374ms
2025-08-07 14:04:38.267 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 14:04:38.270 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?page=1&limit=10 - 200 null application/json; charset=utf-8 120.8557ms
2025-08-07 14:04:48.657 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?page=1&limit=10 - null null
2025-08-07 14:04:48.664 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:04:48.666 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/logs?page=1&limit=10 - 204 null null 8.7156ms
2025-08-07 14:04:48.675 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/logs?page=1&limit=10 - application/json null
2025-08-07 14:04:48.683 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:04:48.686 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 14:04:48.690 +02:00 [INF] Route matched with {action = "GetAuditLogsAdvanced", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetAuditLogsAdvanced(System.String, System.String, System.String, Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:04:48.751 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Details], [a].[entity_id], [a].[entity_type], [a].[event_type], [a].[Timestamp], [a].[user_id], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [audit_log] AS [a]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
ORDER BY [a].[Timestamp] DESC
2025-08-07 14:04:48.762 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`3[[System.Collections.Generic.List`1[[<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`4[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:04:48.768 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAuditLogsAdvanced (backend) in 70.1734ms
2025-08-07 14:04:48.773 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAuditLogsAdvanced (backend)'
2025-08-07 14:04:48.776 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/logs?page=1&limit=10 - 200 null application/json; charset=utf-8 101.3672ms
2025-08-07 14:05:09.535 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 14:05:09.552 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:05:09.557 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 21.8527ms
2025-08-07 14:05:09.582 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 14:05:09.597 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:05:09.605 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 14:05:09.638 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 14:05:09.693 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 14:05:09.735 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:05:09.742 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:05:09.752 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:05:09.761 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:05:09.769 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:05:09.780 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:05:09.789 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:05:09.914 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:05:09.930 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:05:09.939 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 289.4277ms
2025-08-07 14:05:09.947 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 14:05:09.953 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 371.5936ms
2025-08-07 14:05:16.412 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications?page=1&limit=10 - null null
2025-08-07 14:05:16.428 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:05:16.431 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications?page=1&limit=10 - 204 null null 19.5808ms
2025-08-07 14:05:16.448 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications?page=1&limit=10 - application/json null
2025-08-07 14:05:16.459 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:05:16.467 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 14:05:16.476 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:05:16.532 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 14:05:16.564 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:05:16.577 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 90.7109ms
2025-08-07 14:05:16.584 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 14:05:16.595 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications?page=1&limit=10 - 200 null application/json; charset=utf-8 146.8715ms
2025-08-07 14:08:17.241 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 14:08:17.250 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:08:17.253 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 12.1611ms
2025-08-07 14:08:17.268 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/managers - application/json null
2025-08-07 14:08:17.277 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:08:17.286 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 14:08:17.292 +02:00 [INF] Route matched with {action = "GetAllManagers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Manager.ManagerListItemDTO]]] GetAllManagers() on controller backend.Controllers.AdminController (backend).
2025-08-07 14:08:17.364 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
2025-08-07 14:08:17.389 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:08:17.400 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:08:17.406 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:08:17.413 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:08:17.420 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:08:17.430 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:08:17.438 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:08:17.452 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 14:08:17.460 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Manager.ManagerListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 14:08:17.465 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllManagers (backend) in 163.7838ms
2025-08-07 14:08:17.473 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllManagers (backend)'
2025-08-07 14:08:17.480 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/managers - 200 null application/json; charset=utf-8 212.2976ms
2025-08-07 14:09:34.464 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 14:09:34.468 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:09:34.469 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 4.2213ms
2025-08-07 14:09:34.482 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/admin/managers - application/json 147
2025-08-07 14:09:34.491 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:09:34.495 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.CreateManager (backend)'
2025-08-07 14:09:34.508 +02:00 [INF] Route matched with {action = "CreateManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerListItemDTO]] CreateManager(backend.DTOs.Manager.CreateManagerRequest) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:09:34.582 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-07 14:09:34.624 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:09:34.652 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[work_id] = @__workId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:09:34.699 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__phoneNumber_0='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[phone_number] = @__phoneNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:09:34.710 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__nationalId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[national_id] = @__nationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:09:34.790 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 8000) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([active], [created_at], [email], [first_name], [last_login], [last_name], [national_id], [password_hash], [phone_number], [profile_image_url], [role], [work_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-08-07 14:09:34.810 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'backend.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'prime_db.dbo.users', column 'password_hash'. Truncated value: 'AQAAAAIAAYagAAAAEDV5xJKnSBAVZlwDEUoYGYcQ66b9lTRtHzGApZoqKYG8'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b9ffc66e-53da-4611-8240-6ef9243c447c
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'prime_db.dbo.users', column 'password_hash'. Truncated value: 'AQAAAAIAAYagAAAAEDV5xJKnSBAVZlwDEUoYGYcQ66b9lTRtHzGApZoqKYG8'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b9ffc66e-53da-4611-8240-6ef9243c447c
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-07 14:09:34.821 +02:00 [ERR] Error creating manager: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'prime_db.dbo.users', column 'password_hash'. Truncated value: 'AQAAAAIAAYagAAAAEDV5xJKnSBAVZlwDEUoYGYcQ66b9lTRtHzGApZoqKYG8'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b9ffc66e-53da-4611-8240-6ef9243c447c
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at backend.Repositories.UserRepository.AddAsync(User user) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\UserRepository.cs:line 64
   at backend.Services.UserService.CreateUserAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, Role role, User createdBy) in C:\Users\Lamelo\RiderProject\backend\backend\Services\UserService.cs:line 64
   at backend.Services.ManagerService.CreateManagerAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, User admin) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 52
2025-08-07 14:09:34.837 +02:00 [INF] Executed action backend.Controllers.AdminController.CreateManager (backend) in 321.4147ms
2025-08-07 14:09:34.838 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.CreateManager (backend)'
2025-08-07 14:09:34.840 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Failed to create manager: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'prime_db.dbo.users', column 'password_hash'. Truncated value: 'AQAAAAIAAYagAAAAEDV5xJKnSBAVZlwDEUoYGYcQ66b9lTRtHzGApZoqKYG8'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b9ffc66e-53da-4611-8240-6ef9243c447c
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at backend.Repositories.UserRepository.AddAsync(User user) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\UserRepository.cs:line 64
   at backend.Services.UserService.CreateUserAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, Role role, User createdBy) in C:\Users\Lamelo\RiderProject\backend\backend\Services\UserService.cs:line 64
   at backend.Services.ManagerService.CreateManagerAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, User admin) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 52
   --- End of inner exception stack trace ---
   at backend.Services.ManagerService.CreateManagerAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, User admin) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 125
   at backend.Controllers.AdminController.CreateManager(CreateManagerRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 48
   at lambda_method863(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 14:09:34.863 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:09:34.867 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.InvalidOperationException: Failed to create manager: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'prime_db.dbo.users', column 'password_hash'. Truncated value: 'AQAAAAIAAYagAAAAEDV5xJKnSBAVZlwDEUoYGYcQ66b9lTRtHzGApZoqKYG8'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b9ffc66e-53da-4611-8240-6ef9243c447c
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at backend.Repositories.UserRepository.AddAsync(User user) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\UserRepository.cs:line 64
   at backend.Services.UserService.CreateUserAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, Role role, User createdBy) in C:\Users\Lamelo\RiderProject\backend\backend\Services\UserService.cs:line 64
   at backend.Services.ManagerService.CreateManagerAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, User admin) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 52
   --- End of inner exception stack trace ---
   at backend.Services.ManagerService.CreateManagerAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, User admin) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 125
   at backend.Controllers.AdminController.CreateManager(CreateManagerRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 48
   at lambda_method863(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 14:09:34.890 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/admin/managers - 500 null text/plain; charset=utf-8 408.2815ms
2025-08-07 14:09:34.896 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5238/api/admin/managers, Response status code: 500
2025-08-07 14:26:15.511 +02:00 [INF] Application is shutting down...
2025-08-07 14:42:00.611 +02:00 [INF] No migrations were found in assembly 'backend'. A migration needs to be added before the database can be updated.
2025-08-07 14:42:01.015 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:42:01.030 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 14:42:01.093 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 14:42:01.273 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 14:42:01.287 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:42:01.294 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 14:42:01.320 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 14:42:01.339 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 14:42:01.353 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 14:42:01.456 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 14:42:01.580 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 14:42:01.584 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 14:42:01.586 +02:00 [INF] Hosting environment: Development
2025-08-07 14:42:01.587 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 14:42:29.472 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 14:42:29.567 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 14:42:29.586 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:42:29.640 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 171.0558ms
2025-08-07 14:42:29.724 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/admin/managers - application/json 147
2025-08-07 14:42:29.759 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:42:30.019 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.CreateManager (backend)'
2025-08-07 14:42:30.058 +02:00 [INF] Route matched with {action = "CreateManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerListItemDTO]] CreateManager(backend.DTOs.Manager.CreateManagerRequest) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:42:30.953 +02:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-07 14:42:31.211 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:42:31.238 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[work_id] = @__workId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:42:31.296 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__phoneNumber_0='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[phone_number] = @__phoneNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:42:31.334 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__nationalId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[national_id] = @__nationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:42:31.684 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([active], [created_at], [email], [first_name], [last_login], [last_name], [national_id], [password_hash], [phone_number], [profile_image_url], [role], [work_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-08-07 14:42:31.746 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'backend.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'prime_db.dbo.users', column 'password_hash'. Truncated value: 'AQAAAAIAAYagAAAAEGp6885Al/B7uxoKPYnZ3wls9ufo0cX65/zzx0PMKm2f'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8c18762c-6089-4e6b-8f7d-44ec56297079
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'prime_db.dbo.users', column 'password_hash'. Truncated value: 'AQAAAAIAAYagAAAAEGp6885Al/B7uxoKPYnZ3wls9ufo0cX65/zzx0PMKm2f'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8c18762c-6089-4e6b-8f7d-44ec56297079
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-07 14:42:31.793 +02:00 [ERR] Error creating manager: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'prime_db.dbo.users', column 'password_hash'. Truncated value: 'AQAAAAIAAYagAAAAEGp6885Al/B7uxoKPYnZ3wls9ufo0cX65/zzx0PMKm2f'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8c18762c-6089-4e6b-8f7d-44ec56297079
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at backend.Repositories.UserRepository.AddAsync(User user) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\UserRepository.cs:line 64
   at backend.Services.UserService.CreateUserAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, Role role, User createdBy) in C:\Users\Lamelo\RiderProject\backend\backend\Services\UserService.cs:line 64
   at backend.Services.ManagerService.CreateManagerAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, User admin) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 52
2025-08-07 14:42:31.854 +02:00 [INF] Executed action backend.Controllers.AdminController.CreateManager (backend) in 1783.6583ms
2025-08-07 14:42:31.862 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.CreateManager (backend)'
2025-08-07 14:42:31.869 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Failed to create manager: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'prime_db.dbo.users', column 'password_hash'. Truncated value: 'AQAAAAIAAYagAAAAEGp6885Al/B7uxoKPYnZ3wls9ufo0cX65/zzx0PMKm2f'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8c18762c-6089-4e6b-8f7d-44ec56297079
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at backend.Repositories.UserRepository.AddAsync(User user) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\UserRepository.cs:line 64
   at backend.Services.UserService.CreateUserAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, Role role, User createdBy) in C:\Users\Lamelo\RiderProject\backend\backend\Services\UserService.cs:line 64
   at backend.Services.ManagerService.CreateManagerAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, User admin) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 52
   --- End of inner exception stack trace ---
   at backend.Services.ManagerService.CreateManagerAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, User admin) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 125
   at backend.Controllers.AdminController.CreateManager(CreateManagerRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 48
   at lambda_method37(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 14:42:31.972 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:42:31.982 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.InvalidOperationException: Failed to create manager: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'prime_db.dbo.users', column 'password_hash'. Truncated value: 'AQAAAAIAAYagAAAAEGp6885Al/B7uxoKPYnZ3wls9ufo0cX65/zzx0PMKm2f'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8c18762c-6089-4e6b-8f7d-44ec56297079
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at backend.Repositories.UserRepository.AddAsync(User user) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\UserRepository.cs:line 64
   at backend.Services.UserService.CreateUserAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, Role role, User createdBy) in C:\Users\Lamelo\RiderProject\backend\backend\Services\UserService.cs:line 64
   at backend.Services.ManagerService.CreateManagerAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, User admin) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 52
   --- End of inner exception stack trace ---
   at backend.Services.ManagerService.CreateManagerAsync(String firstName, String lastName, String phoneNumber, String nationalId, String email, String workId, String password, User admin) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 125
   at backend.Controllers.AdminController.CreateManager(CreateManagerRequest request) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 48
   at lambda_method37(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 14:42:32.078 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/admin/managers - 500 null text/plain; charset=utf-8 2353.2214ms
2025-08-07 14:42:32.092 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5238/api/admin/managers, Response status code: 500
2025-08-07 14:50:58.260 +02:00 [INF] Application is shutting down...
2025-08-07 14:55:33.237 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:55:33.321 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 14:55:33.366 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 14:55:33.606 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 14:55:33.655 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:55:33.664 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 14:55:33.681 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 14:55:33.701 +02:00 [INF] Applying migration '20250807125437_FixPasswordHashColumnSize'.
2025-08-07 14:55:33.780 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE users ALTER COLUMN password_hash VARCHAR(255) NOT NULL
2025-08-07 14:55:33.799 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250807125437_FixPasswordHashColumnSize', N'9.0.7');
2025-08-07 14:55:33.815 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 14:57:18.170 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:57:18.244 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 14:57:18.284 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 14:57:18.375 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 14:57:18.389 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:57:18.394 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 14:57:18.413 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 14:57:18.427 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 14:57:18.440 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 14:57:18.513 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 14:57:18.612 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 14:57:18.617 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 14:57:18.621 +02:00 [INF] Hosting environment: Development
2025-08-07 14:57:18.623 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 14:58:04.889 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - null null
2025-08-07 14:58:04.915 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 14:58:04.926 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:58:04.944 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers - 204 null null 52.9215ms
2025-08-07 14:58:04.987 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/admin/managers - application/json 147
2025-08-07 14:58:05.010 +02:00 [INF] CORS policy execution successful.
2025-08-07 14:58:05.219 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.CreateManager (backend)'
2025-08-07 14:58:05.237 +02:00 [INF] Route matched with {action = "CreateManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerListItemDTO]] CreateManager(backend.DTOs.Manager.CreateManagerRequest) on controller backend.Controllers.AdminController (backend).
2025-08-07 14:58:05.557 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-07 14:58:05.676 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:58:05.695 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[work_id] = @__workId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:58:05.716 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__phoneNumber_0='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[phone_number] = @__phoneNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:58:05.730 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__nationalId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[national_id] = @__nationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:58:05.895 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([active], [created_at], [email], [first_name], [last_login], [last_name], [national_id], [password_hash], [phone_number], [profile_image_url], [role], [work_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-08-07 14:58:05.982 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 14:58:06.009 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@UserId='?' (DbType = Int64), @CreatedBy='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO managers (user_id, created_by) VALUES (@UserId, @CreatedBy)
2025-08-07 14:58:06.048 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 14:58:06.081 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 14:58:06.093 +02:00 [INF] Executing ObjectResult, writing value of type 'backend.DTOs.Manager.ManagerListItemDTO'.
2025-08-07 14:58:06.118 +02:00 [INF] Executed action backend.Controllers.AdminController.CreateManager (backend) in 870.5088ms
2025-08-07 14:58:06.121 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.CreateManager (backend)'
2025-08-07 14:58:06.139 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/admin/managers - 201 null application/json; charset=utf-8 1152.0424ms
2025-08-07 15:00:49.801 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/031 - null null
2025-08-07 15:00:49.805 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:00:49.807 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/managers/031 - 204 null null 6.15ms
2025-08-07 15:00:49.816 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5238/api/admin/managers/031 - application/json null
2025-08-07 15:00:49.822 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:00:49.844 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.DeleteManager (backend)'
2025-08-07 15:00:49.893 +02:00 [INF] Route matched with {action = "DeleteManager", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteManager(Int64) on controller backend.Controllers.AdminController (backend).
2025-08-07 15:00:50.041 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:00:50.053 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 15:00:50.059 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:00:50.089 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [managers]
OUTPUT 1
WHERE [user_id] = @p0;
2025-08-07 15:00:50.114 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-07 15:00:50.158 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p12='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10, [work_id] = @p11
OUTPUT 1
WHERE [Id] = @p12;
2025-08-07 15:00:50.165 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 15:00:50.173 +02:00 [INF] Manager with ID 31 has been deleted and user deactivated
2025-08-07 15:00:50.179 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-07 15:00:50.181 +02:00 [INF] Executed action backend.Controllers.AdminController.DeleteManager (backend) in 281.5967ms
2025-08-07 15:00:50.184 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.DeleteManager (backend)'
2025-08-07 15:00:50.187 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5238/api/admin/managers/031 - 204 null null 370.9871ms
2025-08-07 15:01:01.300 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - null null
2025-08-07 15:01:01.311 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:01:01.314 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/users - 204 null null 13.2038ms
2025-08-07 15:01:01.325 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/users - application/json null
2025-08-07 15:01:01.333 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:01:01.362 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 15:01:01.378 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.UserDTO]]] GetAllUsers() on controller backend.Controllers.AdminController (backend).
2025-08-07 15:01:01.489 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
2025-08-07 15:01:01.615 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:01.655 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:01.680 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:01.700 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:01.723 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:01.743 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:01.757 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:01.770 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:01.791 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:01.806 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:01.833 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:01.895 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:01.948 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:01.997 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.017 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.028 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.035 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.048 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.055 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.065 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.097 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.124 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.158 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.193 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.225 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.247 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.306 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.642 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.669 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.689 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.708 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.729 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.743 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.756 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.763 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.777 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.789 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.806 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.815 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.838 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.863 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.887 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.907 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:02.934 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:02.964 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:03.000 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:03.030 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:01:03.068 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:01:03.207 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.224 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.244 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.258 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.272 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.290 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.299 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.306 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.315 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.322 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.389 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.423 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__userId_0
2025-08-07 15:01:03.433 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.UserDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 15:01:03.463 +02:00 [INF] Executed action backend.Controllers.AdminController.GetAllUsers (backend) in 2078.8331ms
2025-08-07 15:01:03.470 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetAllUsers (backend)'
2025-08-07 15:01:03.474 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/users - 200 null application/json; charset=utf-8 2148.9487ms
2025-08-07 15:07:12.702 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications?page=1&limit=10 - null null
2025-08-07 15:07:12.708 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:07:12.711 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications?page=1&limit=10 - 204 null null 9.1416ms
2025-08-07 15:07:12.722 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications?page=1&limit=10 - application/json null
2025-08-07 15:07:12.728 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:07:12.736 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 15:07:12.755 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 15:07:12.905 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 15:07:12.981 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 15:07:13.001 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 241.7487ms
2025-08-07 15:07:13.004 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 15:07:13.006 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications?page=1&limit=10 - 200 null application/json; charset=utf-8 284.0047ms
2025-08-07 15:07:54.134 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 15:07:54.141 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:07:54.143 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 9.2147ms
2025-08-07 15:07:54.155 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/admin/notifications - application/json 220
2025-08-07 15:07:54.163 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:07:54.208 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.SendNotification (backend)'
2025-08-07 15:07:54.233 +02:00 [INF] Route matched with {action = "SendNotification", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] SendNotification(System.Collections.Generic.Dictionary`2[System.String,System.String]) on controller backend.Controllers.AdminController (backend).
2025-08-07 15:07:54.309 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-07 15:07:54.325 +02:00 [INF] Executed action backend.Controllers.AdminController.SendNotification (backend) in 84.9386ms
2025-08-07 15:07:54.328 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.SendNotification (backend)'
2025-08-07 15:07:54.334 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Invalid category
   at backend.Services.NotificationService.SendNotificationAsync(Dictionary`2 body, User sender) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 153
   at backend.Controllers.AdminController.SendNotification(Dictionary`2 body) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 404
   at lambda_method796(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 15:07:54.386 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:07:54.391 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.ArgumentException: Invalid category
   at backend.Services.NotificationService.SendNotificationAsync(Dictionary`2 body, User sender) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 153
   at backend.Controllers.AdminController.SendNotification(Dictionary`2 body) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 404
   at lambda_method796(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 15:07:54.424 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/admin/notifications - 500 null text/plain; charset=utf-8 269.3079ms
2025-08-07 15:07:54.436 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5238/api/admin/notifications, Response status code: 500
2025-08-07 15:21:01.210 +02:00 [INF] Application is shutting down...
2025-08-07 15:22:05.665 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:22:05.754 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 15:22:05.820 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 15:22:05.950 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 15:22:05.975 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:22:05.987 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 15:22:06.004 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 15:22:06.022 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 15:22:06.041 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 15:22:06.153 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 15:22:06.280 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 15:22:06.285 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 15:22:06.287 +02:00 [INF] Hosting environment: Development
2025-08-07 15:22:06.290 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 15:23:17.401 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 15:23:17.458 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 15:23:17.467 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:23:17.492 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 92.1314ms
2025-08-07 15:23:17.534 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/admin/notifications - application/json 220
2025-08-07 15:23:17.555 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:23:17.706 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.SendNotification (backend)'
2025-08-07 15:23:17.728 +02:00 [INF] Route matched with {action = "SendNotification", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] SendNotification(System.Collections.Generic.Dictionary`2[System.String,System.String]) on controller backend.Controllers.AdminController (backend).
2025-08-07 15:23:18.115 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-07 15:23:18.235 +02:00 [INF] Executed action backend.Controllers.AdminController.SendNotification (backend) in 499.8183ms
2025-08-07 15:23:18.238 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.SendNotification (backend)'
2025-08-07 15:23:18.242 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Invalid Priority
   at backend.Services.NotificationService.SendNotificationAsync(Dictionary`2 body, User sender) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 155
   at backend.Controllers.AdminController.SendNotification(Dictionary`2 body) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 404
   at lambda_method37(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 15:23:18.280 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:23:18.291 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.ArgumentException: Invalid Priority
   at backend.Services.NotificationService.SendNotificationAsync(Dictionary`2 body, User sender) in C:\Users\Lamelo\RiderProject\backend\backend\Services\NotificationService.cs:line 155
   at backend.Controllers.AdminController.SendNotification(Dictionary`2 body) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AdminController.cs:line 404
   at lambda_method37(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 15:23:18.335 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/admin/notifications - 500 null text/plain; charset=utf-8 801.0857ms
2025-08-07 15:23:18.347 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5238/api/admin/notifications, Response status code: 500
2025-08-07 15:27:09.233 +02:00 [INF] Application is shutting down...
2025-08-07 15:27:54.591 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:27:54.656 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 15:27:54.703 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 15:27:54.810 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 15:27:54.826 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:27:54.832 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 15:27:54.848 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 15:27:54.867 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 15:27:54.887 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 15:27:54.974 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 15:27:55.064 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 15:27:55.070 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 15:27:55.073 +02:00 [INF] Hosting environment: Development
2025-08-07 15:27:55.076 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 15:35:46.326 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - null null
2025-08-07 15:35:46.397 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 15:35:46.409 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:35:46.425 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications - 204 null null 101.5215ms
2025-08-07 15:35:46.446 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/admin/notifications - application/json 220
2025-08-07 15:35:46.459 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:35:46.621 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.SendNotification (backend)'
2025-08-07 15:35:46.637 +02:00 [INF] Route matched with {action = "SendNotification", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] SendNotification(System.Collections.Generic.Dictionary`2[System.String,System.String]) on controller backend.Controllers.AdminController (backend).
2025-08-07 15:35:47.033 +02:00 [INF] Executed DbCommand (81ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-07 15:35:47.281 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (Size = 4000), @p2='?' (Size = 20) (DbType = AnsiString), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int64), @p5='?' (DbType = Int64), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [notifications] ([Category], [Message], [Priority], [read_status], [recipient_id], [sender_id], [sent_at], [Status], [Title], [via_email])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 15:35:47.349 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 15:35:47.362 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType10`11[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 15:35:47.383 +02:00 [INF] Executed action backend.Controllers.AdminController.SendNotification (backend) in 736.3257ms
2025-08-07 15:35:47.390 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.SendNotification (backend)'
2025-08-07 15:35:47.409 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/admin/notifications - 201 null application/json; charset=utf-8 962.6928ms
2025-08-07 15:35:47.420 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications?page=1&limit=10 - null null
2025-08-07 15:35:47.431 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:35:47.436 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/admin/notifications?page=1&limit=10 - 204 null null 16.0426ms
2025-08-07 15:35:47.452 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/admin/notifications?page=1&limit=10 - application/json null
2025-08-07 15:35:47.460 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:35:47.489 +02:00 [INF] Executing endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 15:35:47.502 +02:00 [INF] Route matched with {action = "GetNotifications", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetNotifications(Int32, Int32) on controller backend.Controllers.AdminController (backend).
2025-08-07 15:35:47.633 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
2025-08-07 15:35:47.687 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`3[[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType13`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType3`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 15:35:47.704 +02:00 [INF] Executed action backend.Controllers.AdminController.GetNotifications (backend) in 198.5266ms
2025-08-07 15:35:47.706 +02:00 [INF] Executed endpoint 'backend.Controllers.AdminController.GetNotifications (backend)'
2025-08-07 15:35:47.710 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/admin/notifications?page=1&limit=10 - 200 null application/json; charset=utf-8 257.8155ms
2025-08-07 15:40:40.589 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-07 15:40:40.602 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:40:40.606 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 16.9592ms
2025-08-07 15:40:40.623 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 66
2025-08-07 15:40:40.639 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:40:40.668 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 15:40:40.704 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-07 15:40:40.815 +02:00 [INF] LOGIN REQUEST RECEIVED - workId: MGR987, email: kevinekde@gmail.com, role: manager
2025-08-07 15:40:40.875 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
WHERE [u].[work_id] = @__workId_0
2025-08-07 15:40:40.923 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 15:40:40.948 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 15:40:40.972 +02:00 [INF] Authentication successful for user: MGR987
2025-08-07 15:40:41.026 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@p12='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10, [work_id] = @p11
OUTPUT 1
WHERE [Id] = @p12;
2025-08-07 15:40:41.042 +02:00 [INF] Login successful for user: MGR987, returning token
2025-08-07 15:40:41.045 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-07 15:40:41.053 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 342.1127ms
2025-08-07 15:40:41.058 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 15:40:41.061 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 437.7611ms
2025-08-07 15:40:48.381 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-07 15:40:48.386 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-07 15:40:48.401 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:40:48.410 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 28.5079ms
2025-08-07 15:40:48.412 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:40:48.420 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 34.3701ms
2025-08-07 15:40:48.421 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-07 15:40:48.440 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:40:48.470 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-07 15:40:48.504 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:40:48.659 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:40:48.759 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:40:48.882 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:40:49.003 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:40:49.017 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-07 15:40:49.049 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 539.9196ms
2025-08-07 15:40:49.055 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-07 15:40:49.065 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-07 15:40:49.082 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:40:49.086 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 664.2554ms
2025-08-07 15:40:49.126 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-07 15:40:49.167 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:40:49.349 +02:00 [INF] Executed DbCommand (84ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:40:49.400 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:40:49.555 +02:00 [INF] Executed DbCommand (122ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:40:49.684 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:40:49.697 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-07 15:40:49.702 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 480.2433ms
2025-08-07 15:40:49.709 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-07 15:40:49.718 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 662.5459ms
2025-08-07 15:47:42.140 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 15:47:42.148 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:47:42.152 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 11.5257ms
2025-08-07 15:47:42.167 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-07 15:47:42.175 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:47:42.180 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 15:47:42.196 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:47:42.348 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:47:42.422 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:47:42.433 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 15:47:42.446 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 245.2252ms
2025-08-07 15:47:42.454 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 15:47:42.460 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 293.8524ms
2025-08-07 15:47:58.562 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups - null null
2025-08-07 15:47:58.569 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:47:58.575 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups - 204 null null 12.5294ms
2025-08-07 15:47:58.579 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 15:47:58.595 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/groups - application/json null
2025-08-07 15:47:58.595 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:47:58.606 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:47:58.610 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 30.7917ms
2025-08-07 15:47:58.614 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetGroups (backend)'
2025-08-07 15:47:58.628 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-07 15:47:58.649 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:47:58.656 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 15:47:58.659 +02:00 [INF] Route matched with {action = "GetGroups", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]]] GetGroups() on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:47:58.659 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:47:58.776 +02:00 [INF] Executed DbCommand (97ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:47:58.782 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:47:58.879 +02:00 [INF] Executed DbCommand (81ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:47:58.883 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:47:58.893 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 15:47:58.900 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 15:47:58.910 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetGroups (backend) in 244.2499ms
2025-08-07 15:47:58.910 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 232.5511ms
2025-08-07 15:47:58.914 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetGroups (backend)'
2025-08-07 15:47:58.959 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 15:47:58.963 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/groups - 200 null application/json; charset=utf-8 368.6043ms
2025-08-07 15:47:58.967 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 339.4275ms
2025-08-07 15:48:10.544 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - null null
2025-08-07 15:48:10.552 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:48:10.556 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - 204 null null 12.3865ms
2025-08-07 15:48:10.571 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - application/json null
2025-08-07 15:48:10.582 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:48:10.601 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 15:48:10.645 +02:00 [INF] Route matched with {action = "GetManagerPerformance", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]] GetManagerPerformance(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:48:10.707 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:48:10.776 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:48:10.834 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:48:10.862 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 15:48:10.940 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerPerformance (backend) in 284.3966ms
2025-08-07 15:48:10.945 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 15:48:10.949 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - 200 null application/json; charset=utf-8 377.2463ms
2025-08-07 15:48:36.606 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - null null
2025-08-07 15:48:36.757 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:48:36.765 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - 204 null null 159.1378ms
2025-08-07 15:48:36.815 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - application/json null
2025-08-07 15:48:36.836 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:48:36.859 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 15:48:36.940 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:48:37.406 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:48:37.524 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:48:37.870 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:48:38.014 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 15:48:38.026 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 782.0077ms
2025-08-07 15:48:38.035 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 15:48:38.046 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - 200 null application/json; charset=utf-8 1230.7196ms
2025-08-07 15:48:56.296 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard/timeframe - null null
2025-08-07 15:48:56.302 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:48:56.303 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard/timeframe - 204 null null 7.0182ms
2025-08-07 15:48:56.315 +02:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5238/api/manager/dashboard/timeframe - application/json 39
2025-08-07 15:48:56.319 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:48:56.320 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend)'
2025-08-07 15:48:56.331 +02:00 [INF] Route matched with {action = "UpdateAttendanceTimeframe", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO+Timeframe]] UpdateAttendanceTimeframe(Timeframe) on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:48:56.390 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:48:56.440 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:48:56.552 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (DbType = Time), @p5='?' (DbType = Int64), @p6='?' (DbType = Time), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [attendance_timeframes] ([applies_to_all_agents], [break_duration], [created_at], [day_of_week], [end_time], [manager_id], [start_time], [updated_at])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-08-07 15:48:56.575 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 15:48:56.581 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO+Timeframe'.
2025-08-07 15:48:56.583 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend) in 246.0445ms
2025-08-07 15:48:56.584 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend)'
2025-08-07 15:48:56.585 +02:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5238/api/manager/dashboard/timeframe - 200 null application/json; charset=utf-8 270.7157ms
2025-08-07 15:48:56.592 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - null null
2025-08-07 15:48:56.595 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:48:56.596 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - 204 null null 3.8486ms
2025-08-07 15:48:56.605 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - application/json null
2025-08-07 15:48:56.613 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:48:56.619 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 15:48:56.623 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:48:56.629 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:48:56.658 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:48:56.665 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:48:56.745 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'backend.Data.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.Int16' to type 'System.Byte'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Byte()
   at Microsoft.Data.SqlClient.SqlDataReader.GetByte(Int32 i)
   at lambda_method836(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.Int16' to type 'System.Byte'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Byte()
   at Microsoft.Data.SqlClient.SqlDataReader.GetByte(Int32 i)
   at lambda_method836(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-07 15:48:56.753 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 15:48:56.755 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 128.8006ms
2025-08-07 15:48:56.761 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 15:48:56.763 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - 500 null application/json; charset=utf-8 157.362ms
2025-08-07 15:49:09.125 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-07 15:49:09.136 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:49:09.139 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 14.1032ms
2025-08-07 15:49:09.153 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-07 15:49:09.165 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:49:09.173 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-07 15:49:09.193 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:49:09.229 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-07 15:49:09.384 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-07 15:49:09.391 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 15:49:09.406 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 203.7901ms
2025-08-07 15:49:09.411 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-07 15:49:09.416 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 262.9265ms
2025-08-07 15:55:12.780 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - null null
2025-08-07 15:55:12.786 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:55:12.788 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - 204 null null 7.7224ms
2025-08-07 15:55:12.800 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - application/json null
2025-08-07 15:55:12.805 +02:00 [INF] CORS policy execution successful.
2025-08-07 15:55:12.809 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 15:55:12.813 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 15:55:12.953 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 15:55:12.975 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:55:13.004 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 15:55:13.024 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'backend.Data.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.Int16' to type 'System.Byte'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Byte()
   at Microsoft.Data.SqlClient.SqlDataReader.GetByte(Int32 i)
   at lambda_method836(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.Int16' to type 'System.Byte'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Byte()
   at Microsoft.Data.SqlClient.SqlDataReader.GetByte(Int32 i)
   at lambda_method836(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-07 15:55:13.038 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 15:55:13.043 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 219.0464ms
2025-08-07 15:55:13.054 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 15:55:13.060 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - 500 null application/json; charset=utf-8 260.0524ms
2025-08-07 16:01:38.933 +02:00 [INF] Application is shutting down...
2025-08-07 16:05:03.161 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:05:03.236 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 16:05:03.321 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 16:05:03.474 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 16:05:03.498 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:05:03.506 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 16:05:03.535 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 16:05:03.553 +02:00 [INF] Applying migration '20250807140230_FixAttendanceTimeframeDayOfWeekType'.
2025-08-07 16:05:03.777 +02:00 [INF] Executed DbCommand (173ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[attendance_timeframes]') AND [c].[name] = N'day_of_week');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [attendance_timeframes] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [attendance_timeframes] ALTER COLUMN [day_of_week] smallint NOT NULL;
2025-08-07 16:05:03.790 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250807140230_FixAttendanceTimeframeDayOfWeekType', N'9.0.7');
2025-08-07 16:05:03.805 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 16:06:00.647 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:06:00.738 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 16:06:00.810 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 16:06:00.937 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 16:06:00.955 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:06:00.965 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 16:06:00.993 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 16:06:01.020 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 16:06:01.043 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 16:06:01.160 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 16:06:01.299 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 16:06:01.304 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 16:06:01.307 +02:00 [INF] Hosting environment: Development
2025-08-07 16:06:01.309 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 16:06:14.643 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - null null
2025-08-07 16:06:14.727 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 16:06:14.736 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:06:14.753 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - 204 null null 113.2342ms
2025-08-07 16:06:14.773 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - application/json null
2025-08-07 16:06:14.787 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:06:15.063 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 16:06:15.100 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 16:06:16.160 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 16:06:16.458 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 16:06:16.595 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 16:06:16.679 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 16:06:16.742 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 1624.5133ms
2025-08-07 16:06:16.745 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 16:06:16.761 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - 200 null application/json; charset=utf-8 1988.1746ms
2025-08-07 16:06:52.048 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard/timeframe - null null
2025-08-07 16:06:52.053 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:06:52.055 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard/timeframe - 204 null null 7.0312ms
2025-08-07 16:06:52.061 +02:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5238/api/manager/dashboard/timeframe - application/json 39
2025-08-07 16:06:52.073 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:06:52.086 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend)'
2025-08-07 16:06:52.115 +02:00 [INF] Route matched with {action = "UpdateAttendanceTimeframe", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO+Timeframe]] UpdateAttendanceTimeframe(Timeframe) on controller backend.Controllers.ManagerController (backend).
2025-08-07 16:06:52.308 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 16:06:52.327 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 16:06:52.333 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 16:06:52.482 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@p8='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int16), @p4='?' (DbType = Time), @p5='?' (DbType = Int64), @p6='?' (DbType = Time), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [attendance_timeframes] SET [applies_to_all_agents] = @p0, [break_duration] = @p1, [created_at] = @p2, [day_of_week] = @p3, [end_time] = @p4, [manager_id] = @p5, [start_time] = @p6, [updated_at] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-08-07 16:06:52.601 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 16:06:52.620 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO+Timeframe'.
2025-08-07 16:06:52.628 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend) in 505.4386ms
2025-08-07 16:06:52.632 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAttendanceTimeframe (backend)'
2025-08-07 16:06:52.635 +02:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5238/api/manager/dashboard/timeframe - 200 null application/json; charset=utf-8 573.7231ms
2025-08-07 16:06:52.645 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - null null
2025-08-07 16:06:52.649 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:06:52.651 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - 204 null null 6.0874ms
2025-08-07 16:06:52.658 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - application/json null
2025-08-07 16:06:52.663 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:06:52.682 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 16:06:52.691 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 16:06:52.765 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 16:06:52.805 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 16:06:52.844 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 16:06:52.857 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 16:06:52.864 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 165.413ms
2025-08-07 16:06:52.872 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 16:06:52.880 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - 200 null application/json; charset=utf-8 221.2032ms
2025-08-07 16:07:04.010 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 16:07:04.029 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:07:04.032 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 21.4064ms
2025-08-07 16:07:04.051 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-07 16:07:04.077 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:07:04.087 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 16:07:04.131 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-07 16:07:04.222 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 16:07:04.267 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 16:07:04.280 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 16:07:04.299 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 157.4153ms
2025-08-07 16:07:04.304 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 16:07:04.309 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 256.9547ms
2025-08-07 16:07:53.644 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 16:07:53.649 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:07:53.651 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 6.5759ms
2025-08-07 16:07:53.662 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/agents - application/json 220
2025-08-07 16:07:53.669 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:07:53.674 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.CreateAgent (backend)'
2025-08-07 16:07:53.686 +02:00 [INF] Route matched with {action = "CreateAgent", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateAgent(backend.DTOs.Agent.CreateAgentRequest) on controller backend.Controllers.ManagerController (backend).
2025-08-07 16:07:53.789 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 16:07:53.874 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 16:07:53.889 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[work_id] = @__workId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 16:07:53.908 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__phoneNumber_0='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[phone_number] = @__phoneNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 16:07:53.919 +02:00 [INF] Creating agent: firstName=knc, lastName=mutabaruka, email=knc@gmail.com, workId=AGT987, agentType="SALES", sector=General
2025-08-07 16:07:53.928 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 16:07:53.933 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[work_id] = @__workId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 16:07:53.938 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__phoneNumber_0='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[phone_number] = @__phoneNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 16:07:53.953 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__nationalId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[national_id] = @__nationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 16:07:54.098 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([active], [created_at], [email], [first_name], [last_login], [last_name], [national_id], [password_hash], [phone_number], [profile_image_url], [role], [work_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-08-07 16:07:54.114 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 16:07:54.120 +02:00 [INF] Creating agent with user ID: 36
2025-08-07 16:07:54.150 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@UserId='?' (DbType = Int64), @ManagerId='?' (DbType = Int64), @AgentType='?' (Size = 5), @Sector='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO agents (user_id, manager_id, agent_type, sector) VALUES (@UserId, @ManagerId, @AgentType, @Sector)
2025-08-07 16:07:54.192 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 16:07:54.227 +02:00 [INF] Agent created successfully with ID: 36
2025-08-07 16:07:54.253 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 16:07:54.261 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 16:07:54.269 +02:00 [INF] Executed action backend.Controllers.ManagerController.CreateAgent (backend) in 578.7772ms
2025-08-07 16:07:54.271 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.CreateAgent (backend)'
2025-08-07 16:07:54.275 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 611.8724ms
2025-08-07 16:09:42.700 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - null null
2025-08-07 16:09:42.703 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:09:42.706 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - 204 null null 6.8558ms
2025-08-07 16:09:42.716 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - application/json 225
2025-08-07 16:09:42.722 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:09:42.727 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 16:09:42.746 +02:00 [INF] Route matched with {action = "UpdateAgent", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateAgent(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 16:09:42.841 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 16:09:42.912 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 16:09:42.939 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 16:09:42.966 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAgent (backend) in 213.1346ms
2025-08-07 16:09:42.970 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 16:09:42.978 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.Text.Json.JsonElement' to type 'System.String'.
   at backend.Services.AgentService.UpdateAgentAsync(Int64 id, Dictionary`2 updateFields) in C:\Users\Lamelo\RiderProject\backend\backend\Services\AgentService.cs:line 254
   at backend.Controllers.ManagerController.UpdateAgent(Int64 id, Dictionary`2 updateRequest) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 220
   at lambda_method782(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 16:09:43.038 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:09:43.042 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.InvalidCastException: Unable to cast object of type 'System.Text.Json.JsonElement' to type 'System.String'.
   at backend.Services.AgentService.UpdateAgentAsync(Int64 id, Dictionary`2 updateFields) in C:\Users\Lamelo\RiderProject\backend\backend\Services\AgentService.cs:line 254
   at backend.Controllers.ManagerController.UpdateAgent(Int64 id, Dictionary`2 updateRequest) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 220
   at lambda_method782(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 16:09:43.070 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - 500 null text/plain; charset=utf-8 354.2181ms
2025-08-07 16:09:43.076 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: PUT http://localhost:5238/api/manager/agents/036, Response status code: 500
2025-08-07 16:23:38.205 +02:00 [INF] Application is shutting down...
2025-08-07 16:26:48.409 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:26:48.491 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 16:26:48.544 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 16:26:48.671 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 16:26:48.685 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:26:48.692 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 16:26:48.746 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 16:26:48.766 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 16:26:48.776 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 16:26:48.884 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 16:26:49.017 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 16:26:49.022 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 16:26:49.024 +02:00 [INF] Hosting environment: Development
2025-08-07 16:26:49.027 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 16:27:50.354 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - null null
2025-08-07 16:27:50.408 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 16:27:50.428 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:27:50.451 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - 204 null null 100.5183ms
2025-08-07 16:27:50.479 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - application/json 225
2025-08-07 16:27:50.495 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:27:50.681 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 16:27:50.710 +02:00 [INF] Route matched with {action = "UpdateAgent", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateAgent(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 16:27:51.413 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 16:27:51.668 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 16:27:51.739 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 16:27:51.926 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@p4='?' (DbType = Int64), @p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agents] SET [agent_type] = @p0, [group_id] = @p1, [manager_id] = @p2, [Sector] = @p3
OUTPUT 1
WHERE [user_id] = @p4;
2025-08-07 16:27:52.062 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 16:27:52.141 +02:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[AgentId] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 16:27:52.170 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'backend.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AgentId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:85174f61-8e5f-4838-8ac7-6cadc447645b
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AgentId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:85174f61-8e5f-4838-8ac7-6cadc447645b
Error Number:207,State:1,Class:16
2025-08-07 16:27:52.196 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAgent (backend) in 1476.0639ms
2025-08-07 16:27:52.205 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 16:27:52.214 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AgentId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at backend.Repositories.ClientsCollectedRepository.CountByAgentAndDateRangeAsync(Agent agent, DateTime startDate, DateTime endDate) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\ClientsCollectedRepository.cs:line 80
   at backend.Services.ClientsCollectedService.CountClientsByAgentAndDateRangeAsync(Agent agent, DateTime start, DateTime end) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ClientsCollectedService.cs:line 83
   at backend.Services.AgentService.CountClientsByAgentAndDateRangeAsync(Agent agent, DateTime startDateTime, DateTime endDateTime) in C:\Users\Lamelo\RiderProject\backend\backend\Services\AgentService.cs:line 385
   at backend.Controllers.ManagerController.UpdateAgent(Int64 id, Dictionary`2 updateRequest) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 231
   at lambda_method37(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:85174f61-8e5f-4838-8ac7-6cadc447645b
Error Number:207,State:1,Class:16
2025-08-07 16:27:52.276 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:27:52.285 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AgentId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at backend.Repositories.ClientsCollectedRepository.CountByAgentAndDateRangeAsync(Agent agent, DateTime startDate, DateTime endDate) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\ClientsCollectedRepository.cs:line 80
   at backend.Services.ClientsCollectedService.CountClientsByAgentAndDateRangeAsync(Agent agent, DateTime start, DateTime end) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ClientsCollectedService.cs:line 83
   at backend.Services.AgentService.CountClientsByAgentAndDateRangeAsync(Agent agent, DateTime startDateTime, DateTime endDateTime) in C:\Users\Lamelo\RiderProject\backend\backend\Services\AgentService.cs:line 385
   at backend.Controllers.ManagerController.UpdateAgent(Int64 id, Dictionary`2 updateRequest) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 231
   at lambda_method37(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:85174f61-8e5f-4838-8ac7-6cadc447645b
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 16:27:52.342 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - 500 null text/plain; charset=utf-8 1863.2018ms
2025-08-07 16:27:52.353 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: PUT http://localhost:5238/api/manager/agents/036, Response status code: 500
2025-08-07 16:29:20.827 +02:00 [INF] Application is shutting down...
2025-08-07 16:47:11.316 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:47:11.369 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 16:47:11.442 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 16:47:11.585 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 16:47:11.602 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:47:11.611 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 16:47:11.635 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 16:47:11.654 +02:00 [INF] Applying migration '20250807144429_FixClientsCollectedColumnMapping'.
2025-08-07 16:47:11.731 +02:00 [ERR] Failed executing DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [clients_collected] DROP CONSTRAINT [FK_clients_collected_agents_AgentId];
2025-08-07 16:47:58.427 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:47:58.502 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 16:47:58.544 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 16:49:54.363 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:49:54.472 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 16:49:54.513 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 16:51:54.005 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:51:54.078 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 16:51:54.139 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 16:51:54.282 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 16:51:54.304 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:51:54.316 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 16:51:54.340 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 16:51:54.367 +02:00 [INF] Applying migration '20250807145045_AddClientsCollectedColumnMappings'.
2025-08-07 16:51:54.402 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250807145045_AddClientsCollectedColumnMappings', N'9.0.7');
2025-08-07 16:51:54.433 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 16:56:41.678 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:56:41.716 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 16:56:41.745 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 16:56:41.815 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 16:56:41.827 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 16:56:41.831 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 16:56:41.843 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 16:56:41.854 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 16:56:41.860 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 16:56:41.917 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 16:56:41.996 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 16:56:41.998 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 16:56:42.000 +02:00 [INF] Hosting environment: Development
2025-08-07 16:56:42.000 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 16:57:24.673 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - null null
2025-08-07 16:57:24.726 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 16:57:24.731 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:57:24.761 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - 204 null null 92.8026ms
2025-08-07 16:57:24.796 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - application/json 225
2025-08-07 16:57:24.833 +02:00 [INF] CORS policy execution successful.
2025-08-07 16:57:25.020 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 16:57:25.045 +02:00 [INF] Route matched with {action = "UpdateAgent", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateAgent(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 16:57:25.603 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 16:57:25.811 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 16:57:25.851 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 16:57:25.983 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p4='?' (DbType = Int64), @p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agents] SET [agent_type] = @p0, [group_id] = @p1, [manager_id] = @p2, [Sector] = @p3
OUTPUT 1
WHERE [user_id] = @p4;
2025-08-07 16:57:26.065 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 16:57:26.142 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 16:57:26.203 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 16:57:26.217 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 16:57:26.242 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAgent (backend) in 1184.7734ms
2025-08-07 16:57:26.246 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 16:57:26.257 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - 200 null application/json; charset=utf-8 1461.149ms
2025-08-07 17:06:21.881 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 17:06:21.886 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:06:21.888 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 7.0408ms
2025-08-07 17:06:21.896 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/agents - application/json 228
2025-08-07 17:06:21.912 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:06:21.930 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.CreateAgent (backend)'
2025-08-07 17:06:21.969 +02:00 [INF] Route matched with {action = "CreateAgent", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateAgent(backend.DTOs.Agent.CreateAgentRequest) on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:06:22.218 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:06:22.269 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 17:06:22.286 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[work_id] = @__workId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 17:06:22.311 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__phoneNumber_0='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[phone_number] = @__phoneNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 17:06:22.321 +02:00 [INF] Creating agent: firstName=lucky, lastName=kagabo, email=kagabolucky11@gmail.com, workId=AGT100, agentType="SALES", sector=General
2025-08-07 17:06:22.328 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 17:06:22.336 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[work_id] = @__workId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 17:06:22.342 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__phoneNumber_0='?' (Size = 20) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[phone_number] = @__phoneNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 17:06:22.355 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__nationalId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [users] AS [u]
        WHERE [u].[national_id] = @__nationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 17:06:22.459 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([active], [created_at], [email], [first_name], [last_login], [last_name], [national_id], [password_hash], [phone_number], [profile_image_url], [role], [work_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-08-07 17:06:22.473 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:06:22.480 +02:00 [INF] Creating agent with user ID: 37
2025-08-07 17:06:22.510 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@UserId='?' (DbType = Int64), @ManagerId='?' (DbType = Int64), @AgentType='?' (Size = 5), @Sector='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO agents (user_id, manager_id, agent_type, sector) VALUES (@UserId, @ManagerId, @AgentType, @Sector)
2025-08-07 17:06:22.529 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:06:22.534 +02:00 [INF] Agent created successfully with ID: 37
2025-08-07 17:06:22.538 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:06:22.546 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 17:06:22.549 +02:00 [INF] Executed action backend.Controllers.ManagerController.CreateAgent (backend) in 566.8135ms
2025-08-07 17:06:22.552 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.CreateAgent (backend)'
2025-08-07 17:06:22.554 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 658.1502ms
2025-08-07 17:06:33.749 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - null null
2025-08-07 17:06:33.754 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:06:33.755 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - 204 null null 6.0944ms
2025-08-07 17:06:33.760 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - application/json 225
2025-08-07 17:06:33.766 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:06:33.778 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 17:06:33.786 +02:00 [INF] Route matched with {action = "UpdateAgent", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateAgent(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:06:33.844 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:06:33.858 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:06:33.872 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:06:33.895 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int64), @p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agents] SET [agent_type] = @p0, [group_id] = @p1, [manager_id] = @p2, [Sector] = @p3
OUTPUT 1
WHERE [user_id] = @p4;
2025-08-07 17:06:33.910 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:06:33.927 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 17:06:33.954 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 17:06:33.960 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 17:06:33.961 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAgent (backend) in 169.8769ms
2025-08-07 17:06:33.965 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 17:06:33.973 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - 200 null application/json; charset=utf-8 212.8275ms
2025-08-07 17:18:19.675 +02:00 [INF] Application is shutting down...
2025-08-07 17:18:30.192 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 17:18:30.432 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 17:18:30.494 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 17:18:30.622 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 17:18:30.649 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 17:18:30.664 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 17:18:30.690 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 17:18:30.712 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 17:18:30.729 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 17:18:30.853 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 17:18:30.982 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 17:18:30.987 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 17:18:30.992 +02:00 [INF] Hosting environment: Development
2025-08-07 17:18:30.997 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 17:25:20.454 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/037 - null null
2025-08-07 17:25:20.534 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 17:25:20.543 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:25:20.563 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/037 - 204 null null 110.3769ms
2025-08-07 17:25:20.588 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/manager/agents/037 - application/json 233
2025-08-07 17:25:20.604 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:25:20.802 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 17:25:20.852 +02:00 [INF] Route matched with {action = "UpdateAgent", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateAgent(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:25:21.751 +02:00 [INF] Executed DbCommand (88ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:25:22.569 +02:00 [INF] Executed DbCommand (547ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:25:22.885 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:25:22.904 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAgent (backend) in 2043.3733ms
2025-08-07 17:25:22.912 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 17:25:22.920 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Requested value 'individual' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.Parse[TEnum](String value, Boolean ignoreCase)
   at System.Enum.Parse[TEnum](String value)
   at backend.Services.AgentService.UpdateAgentAsync(Int64 id, Dictionary`2 updateFields) in C:\Users\Lamelo\RiderProject\backend\backend\Services\AgentService.cs:line 232
   at backend.Controllers.ManagerController.UpdateAgent(Int64 id, Dictionary`2 updateRequest) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 220
   at lambda_method37(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 17:25:22.999 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:25:23.010 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.ArgumentException: Requested value 'individual' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.Parse[TEnum](String value, Boolean ignoreCase)
   at System.Enum.Parse[TEnum](String value)
   at backend.Services.AgentService.UpdateAgentAsync(Int64 id, Dictionary`2 updateFields) in C:\Users\Lamelo\RiderProject\backend\backend\Services\AgentService.cs:line 232
   at backend.Controllers.ManagerController.UpdateAgent(Int64 id, Dictionary`2 updateRequest) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 220
   at lambda_method37(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 17:25:23.066 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/manager/agents/037 - 500 null text/plain; charset=utf-8 2475.5299ms
2025-08-07 17:25:23.079 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: PUT http://localhost:5238/api/manager/agents/037, Response status code: 500
2025-08-07 17:46:08.864 +02:00 [INF] Application is shutting down...
2025-08-07 17:46:50.394 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 17:46:50.554 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 17:46:50.924 +02:00 [INF] Executed DbCommand (223ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 17:46:51.121 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 17:46:51.140 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 17:46:51.151 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 17:46:51.216 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 17:46:51.269 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 17:46:51.366 +02:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 17:46:51.544 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 17:46:51.878 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 17:46:51.884 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 17:46:51.886 +02:00 [INF] Hosting environment: Development
2025-08-07 17:46:51.889 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 17:48:46.874 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - null null
2025-08-07 17:48:46.925 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 17:48:46.934 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:48:46.957 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - 204 null null 84.3381ms
2025-08-07 17:48:46.976 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - application/json 225
2025-08-07 17:48:46.991 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:48:47.296 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 17:48:47.329 +02:00 [INF] Route matched with {action = "UpdateAgent", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateAgent(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:48:48.039 +02:00 [INF] Executed DbCommand (84ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:48:48.318 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:48:48.390 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:48:48.582 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p4='?' (DbType = Int64), @p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agents] SET [agent_type] = @p0, [group_id] = @p1, [manager_id] = @p2, [Sector] = @p3
OUTPUT 1
WHERE [user_id] = @p4;
2025-08-07 17:48:48.722 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:48:48.801 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 17:48:48.893 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 17:48:48.909 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 17:48:48.946 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAgent (backend) in 1607.0316ms
2025-08-07 17:48:48.953 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 17:48:48.972 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - 200 null application/json; charset=utf-8 1996.4244ms
2025-08-07 17:48:59.641 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - null null
2025-08-07 17:48:59.649 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:48:59.652 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - 204 null null 11.1821ms
2025-08-07 17:48:59.660 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - application/json 220
2025-08-07 17:48:59.666 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:48:59.682 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 17:48:59.687 +02:00 [INF] Route matched with {action = "UpdateAgent", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateAgent(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:48:59.844 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:49:02.346 +02:00 [INF] Executed DbCommand (2,496ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:49:02.533 +02:00 [INF] Executed DbCommand (88ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:49:02.573 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p4='?' (DbType = Int64), @p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agents] SET [agent_type] = @p0, [group_id] = @p1, [manager_id] = @p2, [Sector] = @p3
OUTPUT 1
WHERE [user_id] = @p4;
2025-08-07 17:49:02.635 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:49:02.674 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 17:49:02.715 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 17:49:02.731 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 17:49:02.735 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAgent (backend) in 3037.2071ms
2025-08-07 17:49:02.765 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 17:49:03.023 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - 200 null application/json; charset=utf-8 3360.5054ms
2025-08-07 17:49:12.912 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - null null
2025-08-07 17:49:12.917 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:49:12.919 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents/036 - 204 null null 6.7644ms
2025-08-07 17:49:12.926 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - application/json 225
2025-08-07 17:49:12.933 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:49:13.006 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 17:49:13.043 +02:00 [INF] Route matched with {action = "UpdateAgent", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.UserDTO]] UpdateAgent(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Object]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:49:13.129 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:49:13.261 +02:00 [INF] Executed DbCommand (121ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:49:13.286 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:49:13.304 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p4='?' (DbType = Int64), @p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agents] SET [agent_type] = @p0, [group_id] = @p1, [manager_id] = @p2, [Sector] = @p3
OUTPUT 1
WHERE [user_id] = @p4;
2025-08-07 17:49:13.321 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:49:13.336 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 17:49:13.361 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 17:49:13.366 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.UserDTO'.
2025-08-07 17:49:13.369 +02:00 [INF] Executed action backend.Controllers.ManagerController.UpdateAgent (backend) in 316.217ms
2025-08-07 17:49:13.372 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.UpdateAgent (backend)'
2025-08-07 17:49:13.378 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/manager/agents/036 - 200 null application/json; charset=utf-8 452.0699ms
2025-08-07 17:49:22.715 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups - null null
2025-08-07 17:49:22.743 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:49:22.744 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 17:49:22.748 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups - 204 null null 33.0578ms
2025-08-07 17:49:22.768 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:49:22.796 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/groups - application/json null
2025-08-07 17:49:22.800 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 55.8513ms
2025-08-07 17:49:22.841 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:49:22.853 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-07 17:49:22.881 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:49:22.885 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetGroups (backend)'
2025-08-07 17:49:22.891 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 17:49:22.928 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:49:22.928 +02:00 [INF] Route matched with {action = "GetGroups", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]]] GetGroups() on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:49:23.033 +02:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:49:23.070 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:49:23.535 +02:00 [INF] Executed DbCommand (315ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 17:49:23.562 +02:00 [INF] Executed DbCommand (280ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 17:49:23.600 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 17:49:23.618 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 17:49:23.671 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetGroups (backend) in 727.4344ms
2025-08-07 17:49:23.692 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetGroups (backend)'
2025-08-07 17:49:23.707 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/groups - 200 null application/json; charset=utf-8 911.4157ms
2025-08-07 17:49:23.734 +02:00 [INF] Executed DbCommand (82ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 17:49:23.807 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 17:49:23.871 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 17:49:23.882 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 17:49:23.909 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 971.9456ms
2025-08-07 17:49:23.915 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 17:49:23.920 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 1066.5693ms
2025-08-07 17:51:47.449 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups - null null
2025-08-07 17:51:47.454 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:51:47.455 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups - 204 null null 5.3004ms
2025-08-07 17:51:47.459 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/groups - application/json 20
2025-08-07 17:51:47.464 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:51:47.469 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.CreateGroup (backend)'
2025-08-07 17:51:47.480 +02:00 [INF] Route matched with {action = "CreateGroup", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateGroup(System.Collections.Generic.Dictionary`2[System.String,System.String]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:51:47.530 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:51:47.550 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 17:51:47.627 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [agent_groups] AS [a]
        WHERE [a].[manager_id] = @__manager_UserId_0 AND [a].[Name] = @__name_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 17:51:47.665 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [agent_groups] ([created_at], [description], [leader_id], [manager_id], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-08-07 17:51:47.679 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:51:47.687 +02:00 [INF] Executing ObjectResult, writing value of type 'backend.DTOs.Group.GroupDetailDTO'.
2025-08-07 17:51:47.692 +02:00 [INF] Executed action backend.Controllers.ManagerController.CreateGroup (backend) in 205.2851ms
2025-08-07 17:51:47.694 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.CreateGroup (backend)'
2025-08-07 17:51:47.696 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/groups - 201 null application/json; charset=utf-8 236.3504ms
2025-08-07 17:51:55.242 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups/017/agents - null null
2025-08-07 17:51:55.251 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:51:55.254 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups/017/agents - 204 null null 11.9603ms
2025-08-07 17:51:55.258 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/groups/017/agents - application/json 20
2025-08-07 17:51:55.264 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:51:55.268 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.AddAgentsToGroup (backend)'
2025-08-07 17:51:55.279 +02:00 [INF] Route matched with {action = "AddAgentsToGroup", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddAgentsToGroup(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Collections.Generic.List`1[System.String]]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:51:55.308 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:51:55.368 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[Id] = @__id_0
2025-08-07 17:51:55.388 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:51:55.398 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[Id] = @__id_0
2025-08-07 17:51:55.403 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:51:55.407 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:51:55.423 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int64), @p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agents] SET [agent_type] = @p0, [group_id] = @p1, [manager_id] = @p2, [Sector] = @p3
OUTPUT 1
WHERE [user_id] = @p4;
2025-08-07 17:51:55.435 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:51:55.443 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agent_groups] SET [created_at] = @p0, [description] = @p1, [leader_id] = @p2, [manager_id] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-08-07 17:51:55.453 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:51:55.459 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[Id] = @__id_0
2025-08-07 17:51:55.467 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 17:51:55.480 +02:00 [INF] Executed action backend.Controllers.ManagerController.AddAgentsToGroup (backend) in 190.7021ms
2025-08-07 17:51:55.485 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.AddAgentsToGroup (backend)'
2025-08-07 17:51:55.487 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/groups/017/agents - 200 null application/json; charset=utf-8 229.0925ms
2025-08-07 17:52:04.697 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups/17/agents/37 - null null
2025-08-07 17:52:04.700 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:52:04.704 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups/17/agents/37 - 204 null null 6.8157ms
2025-08-07 17:52:04.709 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5238/api/manager/groups/17/agents/37 - application/json null
2025-08-07 17:52:04.715 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:52:04.718 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.RemoveAgentFromGroup (backend)'
2025-08-07 17:52:04.731 +02:00 [INF] Route matched with {action = "RemoveAgentFromGroup", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] RemoveAgentFromGroup(Int64, Int64) on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:52:04.806 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:52:04.825 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[Id] = @__id_0
2025-08-07 17:52:04.846 +02:00 [INF] Attempting to remove agent 37 from group 17
2025-08-07 17:52:04.851 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[Id] = @__id_0
2025-08-07 17:52:04.864 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:52:04.873 +02:00 [INF] Group agents before: 37
2025-08-07 17:52:04.877 +02:00 [INF] Agent's current group: 17
2025-08-07 17:52:04.879 +02:00 [INF] Group agents after removal: 
2025-08-07 17:52:04.881 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 17:52:04.892 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int64), @p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agents] SET [agent_type] = @p0, [group_id] = @p1, [manager_id] = @p2, [Sector] = @p3
OUTPUT 1
WHERE [user_id] = @p4;
2025-08-07 17:52:04.897 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:52:04.900 +02:00 [INF] Agent 37 group set to null and updated
2025-08-07 17:52:04.904 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agent_groups] SET [created_at] = @p0, [description] = @p1, [leader_id] = @p2, [manager_id] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-08-07 17:52:04.910 +02:00 [INF] Group 17 saved after agent removal
2025-08-07 17:52:04.912 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 17:52:04.915 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 17:52:04.917 +02:00 [INF] Executed action backend.Controllers.ManagerController.RemoveAgentFromGroup (backend) in 118.82ms
2025-08-07 17:52:04.919 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.RemoveAgentFromGroup (backend)'
2025-08-07 17:52:04.922 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5238/api/manager/groups/17/agents/37 - 200 null application/json; charset=utf-8 212.4403ms
2025-08-07 17:52:59.646 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - null null
2025-08-07 17:52:59.665 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:52:59.667 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - 204 null null 21.4454ms
2025-08-07 17:52:59.679 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - application/json null
2025-08-07 17:52:59.686 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:52:59.692 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 17:52:59.723 +02:00 [INF] Route matched with {action = "GetManagerPerformance", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]] GetManagerPerformance(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 17:52:59.799 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 17:52:59.975 +02:00 [INF] Executed DbCommand (158ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 17:53:00.007 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 17:53:00.154 +02:00 [ERR] Failed executing DbCommand (18ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[PayingAmount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 17:53:00.185 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'backend.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PayingAmount'.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:2be4f13d-68d3-4704-9753-2c839dfd5009
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PayingAmount'.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:2be4f13d-68d3-4704-9753-2c839dfd5009
Error Number:207,State:1,Class:16
2025-08-07 17:53:00.202 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerPerformance (backend) in 472.0058ms
2025-08-07 17:53:00.205 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 17:53:00.213 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PayingAmount'.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at backend.Repositories.ClientRepository.GetByAgentAndCreatedAtBetweenAsync(Agent agent, DateTime startDate, DateTime endDate) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\ClientRepository.cs:line 67
   at backend.Services.ClientService.GetClientsByAgentAndDateRangeAsync(Agent agent, DateTime startDate, DateTime endDate) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ClientService.cs:line 106
   at backend.Services.ManagerService.GetPerformanceOverviewAsync(Manager manager, String period) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 240
   at backend.Controllers.ManagerController.GetManagerPerformance(String period) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 907
   at lambda_method880(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:2be4f13d-68d3-4704-9753-2c839dfd5009
Error Number:207,State:1,Class:16
2025-08-07 17:53:00.272 +02:00 [INF] CORS policy execution successful.
2025-08-07 17:53:00.281 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PayingAmount'.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at backend.Repositories.ClientRepository.GetByAgentAndCreatedAtBetweenAsync(Agent agent, DateTime startDate, DateTime endDate) in C:\Users\Lamelo\RiderProject\backend\backend\Repositories\ClientRepository.cs:line 67
   at backend.Services.ClientService.GetClientsByAgentAndDateRangeAsync(Agent agent, DateTime startDate, DateTime endDate) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ClientService.cs:line 106
   at backend.Services.ManagerService.GetPerformanceOverviewAsync(Manager manager, String period) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 240
   at backend.Controllers.ManagerController.GetManagerPerformance(String period) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 907
   at lambda_method880(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:2be4f13d-68d3-4704-9753-2c839dfd5009
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 17:53:00.335 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - 500 null text/plain; charset=utf-8 656.0841ms
2025-08-07 17:53:00.351 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5238/api/manager/performance, Response status code: 500
2025-08-07 18:09:32.683 +02:00 [INF] Application is shutting down...
2025-08-07 18:22:05.341 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 18:22:05.438 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 18:22:05.523 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 18:22:05.650 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 18:22:05.663 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 18:22:05.671 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 18:22:05.741 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 18:22:05.759 +02:00 [INF] Applying migration '20250807162018_FixClientColumnMappings'.
2025-08-07 18:22:06.641 +02:00 [ERR] Failed executing DbCommand (836ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[clients].[PayingAmount]', N'paying_amount', 'COLUMN';
2025-08-07 18:24:14.676 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 18:24:14.920 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 18:24:15.027 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 18:31:28.056 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 18:31:28.120 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 18:31:28.162 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 18:31:28.255 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 18:31:28.269 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 18:31:28.276 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 18:31:28.293 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 18:31:28.317 +02:00 [INF] Applying migration '20250807163019_AddClientColumnMappings'.
2025-08-07 18:31:29.615 +02:00 [ERR] Failed executing DbCommand (1,269ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[clients].[PayingAmount]', N'paying_amount', 'COLUMN';
2025-08-07 18:31:29.735 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 18:36:17.880 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 18:36:18.004 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 18:36:18.067 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 19:28:27.447 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 19:28:27.574 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 19:28:27.687 +02:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 19:28:27.854 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 19:28:27.880 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 19:28:27.890 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 19:28:27.979 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 19:28:28.010 +02:00 [INF] Applying migration '20250807172202_AddClientColumnMappings'.
2025-08-07 19:28:28.987 +02:00 [ERR] Failed executing DbCommand (901ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[clients].[PayingAmount]', N'paying_amount', 'COLUMN';
2025-08-07 19:28:29.104 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 19:32:29.204 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 19:32:29.322 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 19:32:29.459 +02:00 [INF] Executed DbCommand (123ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 19:32:29.678 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 19:32:29.727 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 19:32:29.750 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 19:32:29.806 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 19:32:29.839 +02:00 [INF] Applying migration '20250807172202_AddClientColumnMappings'.
2025-08-07 19:32:29.907 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250807172202_AddClientColumnMappings', N'9.0.7');
2025-08-07 19:32:29.941 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 19:33:06.823 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 19:33:06.909 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 19:33:06.952 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 19:33:07.089 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 19:33:07.108 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 19:33:07.117 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 19:33:07.142 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 19:33:07.162 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 19:33:07.195 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 19:33:07.329 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 19:33:07.491 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 19:33:07.495 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 19:33:07.498 +02:00 [INF] Hosting environment: Development
2025-08-07 19:33:07.501 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 19:33:33.033 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - null null
2025-08-07 19:33:33.246 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 19:33:33.462 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:33:33.508 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - 204 null null 482.8208ms
2025-08-07 19:33:33.634 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - application/json null
2025-08-07 19:33:33.740 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:33:34.160 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 19:33:34.248 +02:00 [INF] Route matched with {action = "GetManagerPerformance", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]] GetManagerPerformance(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:33:35.232 +02:00 [INF] Executed DbCommand (102ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:33:35.561 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:33:35.746 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:33:35.863 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:33:35.885 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:33:35.970 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:33:35.992 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:33:36.015 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerPerformance (backend) in 1754.7926ms
2025-08-07 19:33:36.021 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 19:33:36.028 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Operation is not valid due to the current state of the object.
   at backend.Services.ManagerService.GetPerformanceOverviewAsync(Manager manager, String period) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 301
   at backend.Controllers.ManagerController.GetManagerPerformance(String period) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 907
   at lambda_method37(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 19:33:36.086 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:33:36.092 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.InvalidOperationException: Operation is not valid due to the current state of the object.
   at backend.Services.ManagerService.GetPerformanceOverviewAsync(Manager manager, String period) in C:\Users\Lamelo\RiderProject\backend\backend\Services\ManagerService.cs:line 301
   at backend.Controllers.ManagerController.GetManagerPerformance(String period) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\ManagerController.cs:line 907
   at lambda_method37(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 19:33:36.136 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - 500 null text/plain; charset=utf-8 2501.567ms
2025-08-07 19:33:36.154 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5238/api/manager/performance, Response status code: 500
2025-08-07 19:35:47.427 +02:00 [INF] Application is shutting down...
2025-08-07 19:36:03.726 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 19:36:03.792 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 19:36:03.837 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 19:36:03.978 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 19:36:03.993 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 19:36:03.998 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 19:36:04.012 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 19:36:04.029 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 19:36:04.044 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 19:36:04.131 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 19:36:04.251 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 19:36:04.257 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 19:36:04.258 +02:00 [INF] Hosting environment: Development
2025-08-07 19:36:04.260 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 19:36:48.658 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - null null
2025-08-07 19:36:48.889 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 19:36:48.984 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:36:49.063 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - 204 null null 415.1143ms
2025-08-07 19:36:49.118 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - application/json null
2025-08-07 19:36:49.179 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:36:49.578 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 19:36:49.639 +02:00 [INF] Route matched with {action = "GetManagerPerformance", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]] GetManagerPerformance(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:36:51.160 +02:00 [INF] Executed DbCommand (134ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:36:51.718 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:36:51.988 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:36:52.137 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:36:52.160 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:36:52.488 +02:00 [INF] Executed DbCommand (239ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:36:52.517 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:36:52.555 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:36:52.637 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerPerformance (backend) in 2978.5901ms
2025-08-07 19:36:52.642 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 19:36:52.654 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - 200 null application/json; charset=utf-8 3536.0279ms
2025-08-07 19:37:46.008 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 19:37:46.023 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:37:46.027 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 18.953ms
2025-08-07 19:37:46.072 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-07 19:37:46.105 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:37:46.162 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:37:46.214 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:37:46.464 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:37:46.548 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:37:46.724 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:37:46.780 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:37:46.845 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:37:46.930 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:37:46.966 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 19:37:47.034 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 788.3102ms
2025-08-07 19:37:47.087 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:37:47.094 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 1027.5336ms
2025-08-07 19:37:54.142 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups - null null
2025-08-07 19:37:54.153 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 19:37:54.155 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:37:54.166 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:37:54.167 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups - 204 null null 25.1651ms
2025-08-07 19:37:54.170 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 17.1311ms
2025-08-07 19:37:54.186 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-07 19:37:54.194 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/groups - application/json null
2025-08-07 19:37:54.212 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:37:54.220 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:37:54.248 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetGroups (backend)'
2025-08-07 19:37:54.250 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:37:54.283 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:37:54.308 +02:00 [INF] Route matched with {action = "GetGroups", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]]] GetGroups() on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:37:54.403 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:37:54.419 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:37:54.455 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:37:54.496 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:37:54.535 +02:00 [INF] Executed DbCommand (113ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:37:54.535 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:37:54.550 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:37:54.558 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetGroups (backend) in 234.0051ms
2025-08-07 19:37:54.559 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:37:54.567 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetGroups (backend)'
2025-08-07 19:37:54.587 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/groups - 200 null application/json; charset=utf-8 393.2685ms
2025-08-07 19:37:54.588 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:37:54.620 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 19:37:54.633 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 338.7968ms
2025-08-07 19:37:54.664 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:37:54.669 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 482.8076ms
2025-08-07 19:37:59.731 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - null null
2025-08-07 19:37:59.736 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:37:59.738 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - 204 null null 6.7294ms
2025-08-07 19:37:59.748 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - application/json null
2025-08-07 19:37:59.755 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:37:59.765 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 19:37:59.788 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:37:59.847 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:37:59.865 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:37:59.884 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:37:59.897 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:37:59.976 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:38:00.083 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:38:00.092 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:38:00.098 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:38:00.102 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 300.5069ms
2025-08-07 19:38:00.105 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 19:38:00.111 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - 200 null application/json; charset=utf-8 363.2024ms
2025-08-07 19:38:17.115 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - null null
2025-08-07 19:38:17.123 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:38:17.128 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/notifications - 204 null null 12.8067ms
2025-08-07 19:38:17.139 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/notifications - application/json null
2025-08-07 19:38:17.147 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:38:17.150 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-07 19:38:17.171 +02:00 [INF] Route matched with {action = "GetManagerNotifications", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetManagerNotifications(Int32, Int32) on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:38:17.314 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [m].[user_id], [m].[created_by], [m].[department]
FROM [users] AS [u]
LEFT JOIN [agents] AS [a] ON [u].[Id] = [a].[user_id]
LEFT JOIN [managers] AS [m] ON [u].[Id] = [m].[user_id]
WHERE [u].[Id] = @__id_0
2025-08-07 19:38:17.405 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-07 19:38:17.416 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:38:17.429 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerNotifications (backend) in 246.5107ms
2025-08-07 19:38:17.434 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerNotifications (backend)'
2025-08-07 19:38:17.438 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/notifications - 200 null application/json; charset=utf-8 299.0667ms
2025-08-07 19:38:49.360 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - null null
2025-08-07 19:38:49.380 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:38:49.389 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/dashboard - 204 null null 28.5815ms
2025-08-07 19:38:49.466 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - application/json null
2025-08-07 19:38:49.583 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:38:49.595 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-07 19:38:49.647 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Manager.ManagerDashboardDTO]] GetDashboard() on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:38:49.744 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:38:49.830 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:38:49.963 +02:00 [INF] Executed DbCommand (112ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:38:50.120 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:38:50.296 +02:00 [INF] Executed DbCommand (126ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:38:50.343 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:38:50.497 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:38:51.412 +02:00 [INF] Executed DbCommand (146ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:38:51.437 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Manager.ManagerDashboardDTO'.
2025-08-07 19:38:51.510 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetDashboard (backend) in 1836.5789ms
2025-08-07 19:38:51.551 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetDashboard (backend)'
2025-08-07 19:38:51.557 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/dashboard - 200 null application/json; charset=utf-8 2091.056ms
2025-08-07 19:39:01.534 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - null null
2025-08-07 19:39:01.546 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:39:01.548 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - 204 null null 13.8776ms
2025-08-07 19:39:01.560 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - application/json null
2025-08-07 19:39:01.567 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:39:01.581 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 19:39:01.586 +02:00 [INF] Route matched with {action = "GetManagerPerformance", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]] GetManagerPerformance(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:39:01.625 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:39:01.670 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:39:01.712 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:39:01.747 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:39:01.763 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:39:01.817 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:39:01.898 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:39:01.910 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:39:01.914 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerPerformance (backend) in 319.7031ms
2025-08-07 19:39:01.918 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 19:39:01.922 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - 200 null application/json; charset=utf-8 362.2606ms
2025-08-07 19:39:33.759 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - null null
2025-08-07 19:39:33.773 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:39:33.775 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/attendance?date=2025-08-07 - 204 null null 16.3919ms
2025-08-07 19:39:33.837 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - application/json null
2025-08-07 19:39:33.871 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:39:33.888 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 19:39:33.910 +02:00 [INF] Route matched with {action = "GetAttendanceDashboard", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceDashboard(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:39:33.937 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:39:34.257 +02:00 [INF] Executed DbCommand (305ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:39:34.289 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:39:34.359 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:39:34.603 +02:00 [INF] Executed DbCommand (230ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:39:34.660 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:39:34.798 +02:00 [INF] Executed DbCommand (129ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:39:34.804 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:39:34.808 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAttendanceDashboard (backend) in 889.4746ms
2025-08-07 19:39:34.813 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAttendanceDashboard (backend)'
2025-08-07 19:39:34.816 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/attendance?date=2025-08-07 - 200 null application/json; charset=utf-8 979.7718ms
2025-08-07 19:39:56.648 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - null null
2025-08-07 19:39:56.662 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:39:56.666 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - 204 null null 17.6853ms
2025-08-07 19:39:56.690 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - application/json null
2025-08-07 19:39:56.698 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:39:56.702 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 19:39:56.707 +02:00 [INF] Route matched with {action = "GetManagerPerformance", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]] GetManagerPerformance(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:39:56.775 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:39:57.539 +02:00 [INF] Executed DbCommand (732ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:39:57.582 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:39:57.625 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:39:57.651 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:39:57.693 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:39:57.708 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:39:57.718 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:39:57.722 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerPerformance (backend) in 1005.7401ms
2025-08-07 19:39:57.729 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 19:39:57.734 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - 200 null application/json; charset=utf-8 1043.9743ms
2025-08-07 19:40:28.207 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 19:40:28.223 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:40:28.229 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 22.3991ms
2025-08-07 19:40:28.245 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-07 19:40:28.554 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:40:28.966 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:40:29.197 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:40:29.592 +02:00 [INF] Executed DbCommand (164ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:40:29.660 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:40:29.776 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:40:29.897 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:40:29.981 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:40:30.277 +02:00 [INF] Executed DbCommand (184ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:40:30.300 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 19:40:30.314 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 904.075ms
2025-08-07 19:40:30.350 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:40:30.357 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 2111.6005ms
2025-08-07 19:40:55.264 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups - null null
2025-08-07 19:40:55.275 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 19:40:55.277 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:40:55.344 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:40:55.354 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups - 204 null null 89.773ms
2025-08-07 19:40:55.358 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 82.9151ms
2025-08-07 19:40:55.387 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/groups - application/json null
2025-08-07 19:40:55.404 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-07 19:40:55.423 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:40:55.438 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:40:55.453 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetGroups (backend)'
2025-08-07 19:40:55.461 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:40:55.465 +02:00 [INF] Route matched with {action = "GetGroups", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]]] GetGroups() on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:40:55.474 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:40:55.560 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:40:55.570 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:40:55.684 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:40:55.685 +02:00 [INF] Executed DbCommand (81ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:40:55.702 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:40:55.727 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetGroups (backend) in 241.868ms
2025-08-07 19:40:55.741 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:40:55.747 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetGroups (backend)'
2025-08-07 19:40:55.768 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/groups - 200 null application/json; charset=utf-8 381.0109ms
2025-08-07 19:40:56.162 +02:00 [INF] Executed DbCommand (396ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:40:56.191 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:40:56.207 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:40:56.221 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 19:40:56.229 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 737.842ms
2025-08-07 19:40:56.234 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:40:56.241 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 836.9405ms
2025-08-07 19:41:06.122 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups/017/agents - null null
2025-08-07 19:41:06.126 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:41:06.128 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/groups/017/agents - 204 null null 5.6082ms
2025-08-07 19:41:06.135 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/manager/groups/017/agents - application/json 20
2025-08-07 19:41:06.142 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:41:06.144 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.AddAgentsToGroup (backend)'
2025-08-07 19:41:06.164 +02:00 [INF] Route matched with {action = "AddAgentsToGroup", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddAgentsToGroup(Int64, System.Collections.Generic.Dictionary`2[System.String,System.Collections.Generic.List`1[System.String]]) on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:41:06.250 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:41:06.327 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[Id] = @__id_0
2025-08-07 19:41:06.385 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:41:06.404 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[Id] = @__id_0
2025-08-07 19:41:06.413 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:41:06.419 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:41:06.632 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p4='?' (DbType = Int64), @p0='?' (Size = 20) (DbType = AnsiString), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (Size = 100) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agents] SET [agent_type] = @p0, [group_id] = @p1, [manager_id] = @p2, [Sector] = @p3
OUTPUT 1
WHERE [user_id] = @p4;
2025-08-07 19:41:06.743 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 19:41:06.782 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p5='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [agent_groups] SET [created_at] = @p0, [description] = @p1, [leader_id] = @p2, [manager_id] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-08-07 19:41:06.805 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [audit_log] ([Details], [entity_id], [entity_type], [event_type], [Timestamp], [user_id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-07 19:41:06.847 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[Id] = @__id_0
2025-08-07 19:41:06.873 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:41:06.882 +02:00 [INF] Executed action backend.Controllers.ManagerController.AddAgentsToGroup (backend) in 713.8348ms
2025-08-07 19:41:06.888 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.AddAgentsToGroup (backend)'
2025-08-07 19:41:06.891 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/manager/groups/017/agents - 200 null application/json; charset=utf-8 756.4157ms
2025-08-07 19:46:24.165 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 19:46:24.177 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:46:24.181 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 16.3006ms
2025-08-07 19:46:24.195 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-07 19:46:24.210 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:46:24.215 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:46:24.220 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:46:24.421 +02:00 [INF] Executed DbCommand (115ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:46:24.526 +02:00 [INF] Executed DbCommand (94ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:46:24.561 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:46:24.632 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:46:24.669 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:46:24.706 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:46:24.728 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 19:46:24.748 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 519.4141ms
2025-08-07 19:46:24.754 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:46:24.783 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 587.7222ms
2025-08-07 19:46:31.646 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - null null
2025-08-07 19:46:31.664 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:46:31.667 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/performance?period=monthly - 204 null null 21.0478ms
2025-08-07 19:46:31.757 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - application/json null
2025-08-07 19:46:31.770 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:46:31.902 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 19:46:31.908 +02:00 [INF] Route matched with {action = "GetManagerPerformance", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.Dictionary`2[System.String,System.Object]]] GetManagerPerformance(System.String) on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:46:31.921 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:46:31.952 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:46:32.008 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:46:32.143 +02:00 [INF] Executed DbCommand (104ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:46:32.155 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:46:32.164 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:46:32.175 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:46:32.192 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:46:32.197 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetManagerPerformance (backend) in 282.9082ms
2025-08-07 19:46:32.205 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetManagerPerformance (backend)'
2025-08-07 19:46:32.210 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/performance?period=monthly - 200 null application/json; charset=utf-8 453.1247ms
2025-08-07 19:46:47.615 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - null null
2025-08-07 19:46:47.626 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:46:47.630 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/manager/agents - 204 null null 15.2163ms
2025-08-07 19:46:47.642 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/manager/agents - application/json null
2025-08-07 19:46:47.650 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:46:47.659 +02:00 [INF] Executing endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:46:47.669 +02:00 [INF] Route matched with {action = "GetAgents", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[backend.DTOs.Agent.AgentListItemDTO]]] GetAgents() on controller backend.Controllers.ManagerController (backend).
2025-08-07 19:46:47.696 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [managers] AS [m]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
INNER JOIN [users] AS [u0] ON [m].[created_by] = [u0].[Id]
WHERE [m].[user_id] = @__id_0
2025-08-07 19:46:47.764 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:46:47.818 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:46:47.880 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:46:47.910 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients_collected] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[collected_at] >= @__startDate_1 AND [c].[collected_at] <= @__endDate_2
2025-08-07 19:46:47.929 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:46:47.944 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[backend.DTOs.Agent.AgentListItemDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 19:46:47.949 +02:00 [INF] Executed action backend.Controllers.ManagerController.GetAgents (backend) in 267.5965ms
2025-08-07 19:46:47.967 +02:00 [INF] Executed endpoint 'backend.Controllers.ManagerController.GetAgents (backend)'
2025-08-07 19:46:47.980 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/manager/agents - 200 null application/json; charset=utf-8 337.8506ms
2025-08-07 19:48:11.869 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-07 19:48:11.875 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:11.877 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 8.152ms
2025-08-07 19:48:11.882 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 68
2025-08-07 19:48:11.892 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:11.899 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 19:48:11.962 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-07 19:48:12.031 +02:00 [INF] LOGIN REQUEST RECEIVED - workId: AGT100, email: kagabolucky11@gmail.com, role: agent
2025-08-07 19:48:12.089 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
WHERE [u].[work_id] = @__workId_0
2025-08-07 19:48:12.137 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 19:48:12.156 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 19:48:12.160 +02:00 [INF] Authentication successful for user: AGT100
2025-08-07 19:48:12.199 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p12='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10, [work_id] = @p11
OUTPUT 1
WHERE [Id] = @p12;
2025-08-07 19:48:12.249 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:12.260 +02:00 [INF] Login successful for user: AGT100, returning token
2025-08-07 19:48:12.262 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-07 19:48:12.266 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 296.3496ms
2025-08-07 19:48:12.270 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 19:48:12.271 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 389.2137ms
2025-08-07 19:48:20.537 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-07 19:48:20.551 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:20.553 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 16.7249ms
2025-08-07 19:48:20.731 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 68
2025-08-07 19:48:20.759 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:20.787 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 19:48:20.804 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-07 19:48:20.881 +02:00 [INF] LOGIN REQUEST RECEIVED - workId: AGT100, email: kagabolucky11@gmail.com, role: agent
2025-08-07 19:48:20.989 +02:00 [INF] Executed DbCommand (71ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
WHERE [u].[work_id] = @__workId_0
2025-08-07 19:48:21.032 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 19:48:21.087 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 19:48:21.332 +02:00 [INF] Authentication successful for user: AGT100
2025-08-07 19:48:21.468 +02:00 [INF] Executed DbCommand (108ms) [Parameters=[@p12='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10, [work_id] = @p11
OUTPUT 1
WHERE [Id] = @p12;
2025-08-07 19:48:21.647 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:21.660 +02:00 [INF] Login successful for user: AGT100, returning token
2025-08-07 19:48:21.709 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-07 19:48:21.762 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 921.3397ms
2025-08-07 19:48:21.792 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 19:48:21.814 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 1083.1782ms
2025-08-07 19:48:23.086 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-07 19:48:23.098 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:23.100 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-07 19:48:23.101 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 14.4754ms
2025-08-07 19:48:23.101 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-07 19:48:23.102 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 19:48:23.103 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 19:48:23.103 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-07 19:48:23.114 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:23.122 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-07 19:48:23.137 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:23.150 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:23.157 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:23.177 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:23.179 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 78.8983ms
2025-08-07 19:48:23.190 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:23.197 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 95.8049ms
2025-08-07 19:48:23.206 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 103.4316ms
2025-08-07 19:48:23.208 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 105.1695ms
2025-08-07 19:48:23.213 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 109.8926ms
2025-08-07 19:48:23.237 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-07 19:48:23.254 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-07 19:48:23.454 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:48:23.464 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:23.487 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:23.487 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:23.500 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 19:48:23.544 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:23.620 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:23.685 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:23.706 +02:00 [INF] Executed DbCommand (146ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:23.887 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:23.890 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:23.949 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:23.952 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:23.973 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:48:24.156 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:24.165 +02:00 [INF] Executed DbCommand (93ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:24.185 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 493.0158ms
2025-08-07 19:48:24.193 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-07 19:48:24.231 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 19:48:24.253 +02:00 [INF] Executed DbCommand (155ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:24.282 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:24.294 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 19:48:24.301 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 1064.2741ms
2025-08-07 19:48:24.390 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:24.398 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 19:48:24.484 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 759.6769ms
2025-08-07 19:48:24.484 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:24.489 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:48:24.491 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:24.535 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:24.547 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 1093.0447ms
2025-08-07 19:48:24.556 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:24.621 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:24.832 +02:00 [INF] Executed DbCommand (395ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:24.857 +02:00 [INF] Executed DbCommand (196ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:24.870 +02:00 [INF] Executed DbCommand (343ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:24.983 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:25.007 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:25.017 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:25.018 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:48:25.053 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:25.071 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:25.080 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:25.123 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:25.132 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:25.133 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 611.3161ms
2025-08-07 19:48:25.138 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 480.776ms
2025-08-07 19:48:25.176 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 19:48:25.189 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:25.216 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 726.4347ms
2025-08-07 19:48:25.207 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 1014.4582ms
2025-08-07 19:48:25.219 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:25.284 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:25.532 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:25.602 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:25.787 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:25.864 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.127 +02:00 [INF] Executed DbCommand (148ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.230 +02:00 [INF] Executed DbCommand (93ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.255 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.278 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.288 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.304 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.327 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.371 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.400 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.434 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.471 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.504 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.519 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.534 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.553 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.569 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.581 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.611 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.657 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.804 +02:00 [INF] Executed DbCommand (103ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:26.908 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 19:48:26.921 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-07 19:48:26.985 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 3470.7608ms
2025-08-07 19:48:26.992 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-07 19:48:27.003 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-07 19:48:27.010 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:27.013 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 3891.2267ms
2025-08-07 19:48:27.017 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-07 19:48:27.041 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:48:27.044 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:27.050 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:27.073 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:27.083 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:27.133 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:27.186 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:27.414 +02:00 [INF] Executed DbCommand (162ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:27.468 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:27.479 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:27.485 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 388.8457ms
2025-08-07 19:48:27.517 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:27.524 +02:00 [INF] Executed DbCommand (336ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:27.526 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 485.0762ms
2025-08-07 19:48:27.584 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:48:27.598 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:27.602 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:27.636 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:27.642 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:27.657 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 19:48:27.727 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:27.732 +02:00 [INF] Executed DbCommand (64ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:27.798 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:27.831 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:27.911 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.031 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.052 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.071 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.082 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.105 +02:00 [INF] Executed DbCommand (309ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:28.193 +02:00 [INF] Executed DbCommand (73ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.279 +02:00 [INF] Executed DbCommand (72ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:28.285 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.298 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:28.314 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 658.9912ms
2025-08-07 19:48:28.316 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.319 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:28.360 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.369 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 785.1144ms
2025-08-07 19:48:28.446 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.502 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.560 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.596 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.619 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.677 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.703 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.732 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.752 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.776 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.798 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.814 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.822 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.834 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.847 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.858 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.872 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.883 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.907 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:48:28.937 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 19:48:28.949 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-07 19:48:28.953 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 1895.1114ms
2025-08-07 19:48:28.963 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-07 19:48:28.968 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 1976.1652ms
2025-08-07 19:48:28.982 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 19:48:28.997 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:29.001 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 18.5109ms
2025-08-07 19:48:29.019 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:48:29.036 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:29.041 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:29.046 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:29.131 +02:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:29.335 +02:00 [INF] Executed DbCommand (141ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:29.359 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:29.366 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:29.370 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 316.959ms
2025-08-07 19:48:29.374 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:29.378 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 358.1062ms
2025-08-07 19:48:29.387 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:48:29.395 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:29.399 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:29.403 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:29.433 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:29.494 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:29.535 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:29.555 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:29.560 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 149.822ms
2025-08-07 19:48:29.564 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:29.567 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 180.0122ms
2025-08-07 19:48:48.082 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 19:48:48.098 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 19:48:48.109 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:48.186 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 103.9431ms
2025-08-07 19:48:48.170 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:48.397 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 299.1345ms
2025-08-07 19:48:48.386 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:48:48.436 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:48.455 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:48.469 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:48.614 +02:00 [INF] Executed DbCommand (94ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:48.845 +02:00 [INF] Executed DbCommand (210ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:48.920 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:48.948 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:48.957 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 454.9732ms
2025-08-07 19:48:48.960 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:48:48.978 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:49.017 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:49.050 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 664.3657ms
2025-08-07 19:48:49.069 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:49.761 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/history - null null
2025-08-07 19:48:49.954 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:50.402 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:50.598 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/history - 204 null null 836.9671ms
2025-08-07 19:48:50.813 +02:00 [INF] Executed DbCommand (216ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:50.851 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/history - null null
2025-08-07 19:48:50.901 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:50.932 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceHistory (backend)'
2025-08-07 19:48:51.184 +02:00 [INF] Route matched with {action = "GetAttendanceHistory", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceHistory() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:51.480 +02:00 [INF] Executed DbCommand (114ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:51.489 +02:00 [INF] Executed DbCommand (605ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:51.626 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:51.636 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:48:51.684 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:51.702 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:51.724 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceHistory (backend) in 373.0164ms
2025-08-07 19:48:51.761 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 1176.9577ms
2025-08-07 19:48:51.813 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:48:51.802 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceHistory (backend)'
2025-08-07 19:48:51.819 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 2858.9103ms
2025-08-07 19:48:51.832 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/history - 200 null application/json; charset=utf-8 980.9603ms
2025-08-07 19:48:51.877 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-07 19:48:51.898 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:51.912 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 35.6454ms
2025-08-07 19:48:51.983 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-07 19:48:52.108 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:48:52.118 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 19:48:52.130 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:48:52.206 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:48:52.237 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:48:52.316 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:48:52.400 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 262.4162ms
2025-08-07 19:48:52.422 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 19:48:52.460 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 476.1827ms
2025-08-07 19:50:53.550 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/clients - null null
2025-08-07 19:50:53.557 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 19:50:53.571 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:50:53.578 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:50:53.583 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 26.6837ms
2025-08-07 19:50:53.583 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/clients - 204 null null 34.2922ms
2025-08-07 19:50:53.600 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:50:53.626 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/clients - application/json null
2025-08-07 19:50:53.660 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:50:53.680 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:50:53.766 +02:00 [INF] Executing endpoint 'backend.Controllers.ClientController.GetAllClients (backend)'
2025-08-07 19:50:53.766 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:50:53.812 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:50:53.883 +02:00 [INF] Route matched with {action = "GetAllClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Client.ClientDTO]]] GetAllClients() on controller backend.Controllers.ClientController (backend).
2025-08-07 19:50:54.097 +02:00 [INF] Executed DbCommand (186ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:50:54.098 +02:00 [INF] Executed DbCommand (134ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:50:54.211 +02:00 [INF] Executed DbCommand (95ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:50:54.227 +02:00 [INF] Executed DbCommand (103ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 19:50:54.248 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[backend.Models.Client, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[backend.DTOs.Client.ClientDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 19:50:54.427 +02:00 [INF] Executed action backend.Controllers.ClientController.GetAllClients (backend) in 492.8504ms
2025-08-07 19:50:54.432 +02:00 [INF] Executed endpoint 'backend.Controllers.ClientController.GetAllClients (backend)'
2025-08-07 19:50:54.437 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/clients - 200 null application/json; charset=utf-8 810.9679ms
2025-08-07 19:50:54.790 +02:00 [INF] Executed DbCommand (563ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:50:54.799 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:50:54.808 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 942.7223ms
2025-08-07 19:50:54.822 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:50:54.861 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 1260.8217ms
2025-08-07 19:51:14.648 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=weekly - null null
2025-08-07 19:51:14.658 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 19:51:14.677 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:51:14.689 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:51:14.691 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=weekly - 204 null null 43.4512ms
2025-08-07 19:51:14.694 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 35.8101ms
2025-08-07 19:51:14.710 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:51:14.724 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=weekly - null null
2025-08-07 19:51:14.742 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:51:14.775 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:51:14.781 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:51:14.788 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-07 19:51:14.796 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:51:14.887 +02:00 [INF] Route matched with {action = "GetPerformance", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetPerformance(System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller backend.Controllers.AgentController (backend).
2025-08-07 19:51:15.272 +02:00 [INF] Executed DbCommand (310ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:51:15.276 +02:00 [INF] Executed DbCommand (410ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:51:15.302 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:51:15.338 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:51:15.349 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:15.387 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:15.397 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:51:15.416 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:51:15.419 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:15.424 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 564.2595ms
2025-08-07 19:51:15.441 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:15.448 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:51:15.478 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:15.498 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 787.5812ms
2025-08-07 19:51:15.594 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:15.630 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:15.663 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:16.075 +02:00 [INF] Executed DbCommand (151ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:16.785 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:51:16.823 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:16.859 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:16.899 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:16.919 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:16.929 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:16.946 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:16.963 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:16.983 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:17.013 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:17.119 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentPerformanceDTO'.
2025-08-07 19:51:17.214 +02:00 [INF] Executed action backend.Controllers.AgentController.GetPerformance (backend) in 2302.1036ms
2025-08-07 19:51:17.228 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-07 19:51:17.238 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=weekly - 200 null application/json; charset=utf-8 2513.2223ms
2025-08-07 19:51:38.045 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/group-performance?period=weekly - null null
2025-08-07 19:51:38.045 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 19:51:38.063 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:51:38.185 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:51:38.188 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/group-performance?period=weekly - 204 null null 143.0495ms
2025-08-07 19:51:38.190 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 144.9176ms
2025-08-07 19:51:38.228 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 19:51:38.245 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/group-performance?period=weekly - null null
2025-08-07 19:51:38.274 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:51:38.294 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:51:38.303 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:51:38.304 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetGroupPerformance (backend)'
2025-08-07 19:51:38.311 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:51:38.386 +02:00 [INF] Route matched with {action = "GetGroupPerformance", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetGroupPerformance() on controller backend.Controllers.AgentController (backend).
2025-08-07 19:51:38.513 +02:00 [INF] Executed DbCommand (124ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:51:38.528 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 19:51:38.625 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:51:38.653 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 19:51:38.663 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 19:51:38.680 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 19:51:38.694 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 313.795ms
2025-08-07 19:51:38.704 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 19:51:38.711 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 482.9259ms
2025-08-07 19:51:38.737 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 19:51:38.830 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 19:51:38.941 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.125 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.343 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.421 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.461 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 19:51:39.534 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.641 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.662 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.693 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.779 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.831 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.878 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.920 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:39.961 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.090 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.169 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.239 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.346 +02:00 [INF] Executed DbCommand (73ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.407 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.504 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.636 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.674 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.721 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.864 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.944 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:40.985 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:41.175 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:41.211 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:41.227 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:41.513 +02:00 [INF] Executed DbCommand (192ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:41.777 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:41.926 +02:00 [INF] Executed DbCommand (105ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:41.956 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:41.975 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:41.999 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:42.022 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 19:51:42.108 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 19:51:42.141 +02:00 [INF] Executed action backend.Controllers.AgentController.GetGroupPerformance (backend) in 3720.2331ms
2025-08-07 19:51:42.148 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetGroupPerformance (backend)'
2025-08-07 19:51:42.171 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Operation is not valid due to the current state of the object.
   at backend.Controllers.AgentController.BuildGroupPerformanceDto(Group group) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AgentController.cs:line 654
   at backend.Controllers.AgentController.GetGroupPerformance() in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AgentController.cs:line 264
   at lambda_method1265(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 19:51:42.407 +02:00 [INF] CORS policy execution successful.
2025-08-07 19:51:42.419 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The exception handler configured on ExceptionHandlerOptions produced a 404 status response. This InvalidOperationException containing the original exception was thrown since this is often due to a misconfigured ExceptionHandlingPath. If the exception handler is expected to return 404 status responses then set AllowStatusCode404Response to true.
 ---> System.InvalidOperationException: Operation is not valid due to the current state of the object.
   at backend.Controllers.AgentController.BuildGroupPerformanceDto(Group group) in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AgentController.cs:line 654
   at backend.Controllers.AgentController.GetGroupPerformance() in C:\Users\Lamelo\RiderProject\backend\backend\Controllers\AgentController.cs:line 264
   at lambda_method1265(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at backend.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Lamelo\RiderProject\backend\backend\Middleware\RateLimitingMiddleware.cs:line 82
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 19:51:42.504 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/group-performance?period=weekly - 500 null text/plain; charset=utf-8 4258.727ms
2025-08-07 19:51:42.530 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5238/api/agent/group-performance, Response status code: 500
2025-08-07 19:57:09.457 +02:00 [INF] Application is shutting down...
2025-08-07 19:58:17.948 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 19:58:18.068 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-07 19:58:18.210 +02:00 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-07 19:58:18.395 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-07 19:58:18.426 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 19:58:18.440 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-07 19:58:18.528 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 19:58:18.557 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 19:58:18.606 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-07 19:58:18.790 +02:00 [INF] User profile is available. Using 'C:\Users\Lamelo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 19:58:18.955 +02:00 [INF] Now listening on: http://localhost:5238
2025-08-07 19:58:18.960 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 19:58:18.962 +02:00 [INF] Hosting environment: Development
2025-08-07 19:58:18.964 +02:00 [INF] Content root path: C:\Users\Lamelo\RiderProject\backend\backend
2025-08-07 20:02:09.317 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:02:09.321 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/group-performance?period=weekly - null null
2025-08-07 20:02:09.516 +02:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 20:02:09.539 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:02:09.539 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:02:09.623 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 283.3518ms
2025-08-07 20:02:09.623 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/group-performance?period=weekly - 204 null null 286.1024ms
2025-08-07 20:02:09.776 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/group-performance?period=weekly - null null
2025-08-07 20:02:09.809 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:02:09.890 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:02:09.922 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:02:10.498 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:02:10.498 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetGroupPerformance (backend)'
2025-08-07 20:02:10.579 +02:00 [INF] Route matched with {action = "GetGroupPerformance", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetGroupPerformance() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:02:10.579 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:02:11.909 +02:00 [INF] Executed DbCommand (167ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:02:11.909 +02:00 [INF] Executed DbCommand (149ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:02:12.329 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:02:12.347 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:02:12.449 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:02:12.479 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:02:12.495 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[created_at], [a].[description], [a].[leader_id], [a].[manager_id], [a].[Name], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [agent_groups] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
LEFT JOIN [agents] AS [a0] ON [a].[leader_id] = [a0].[user_id]
LEFT JOIN [users] AS [u0] ON [a0].[user_id] = [u0].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 20:02:12.533 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:02:12.548 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 1917.8525ms
2025-08-07 20:02:12.559 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:02:12.586 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 2777.1362ms
2025-08-07 20:02:12.852 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:12.882 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.000 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.015 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.037 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:02:13.055 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.093 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.160 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.230 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.250 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.262 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.272 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.288 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.305 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.323 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.360 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.396 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.446 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.471 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.499 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.510 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.520 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.532 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.543 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.556 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.570 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.582 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.639 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.733 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.766 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.774 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.789 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.800 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.812 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.822 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.837 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:02:13.946 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:02:13.966 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.GroupPerformanceDTO'.
2025-08-07 20:02:14.052 +02:00 [INF] Executed action backend.Controllers.AgentController.GetGroupPerformance (backend) in 3460.9596ms
2025-08-07 20:02:14.060 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetGroupPerformance (backend)'
2025-08-07 20:02:14.064 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/group-performance?period=weekly - 200 null application/json; charset=utf-8 4287.8887ms
2025-08-07 20:02:52.476 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:02:52.493 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:02:52.500 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 25.4868ms
2025-08-07 20:02:52.532 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:02:52.565 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:02:52.668 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:02:52.699 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:02:52.715 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - null null
2025-08-07 20:02:53.362 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:02:53.427 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - 204 null null 711.14ms
2025-08-07 20:02:53.548 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/notifications - application/json null
2025-08-07 20:02:53.649 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:02:53.669 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-07 20:02:53.716 +02:00 [INF] Route matched with {action = "GetAgentNotifications", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAgentNotifications() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:02:53.858 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:02:53.861 +02:00 [INF] Executed DbCommand (89ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:02:53.899 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:02:53.980 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:02:53.999 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:02:54.005 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 1087.031ms
2025-08-07 20:02:54.010 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:02:54.014 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 1482.692ms
2025-08-07 20:02:54.125 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-07 20:02:54.142 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType16`1[[System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:02:54.170 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAgentNotifications (backend) in 444.35ms
2025-08-07 20:02:54.181 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-07 20:02:54.190 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/notifications - 200 null application/json; charset=utf-8 645.6386ms
2025-08-07 20:03:21.781 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - null null
2025-08-07 20:03:21.791 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:21.793 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/auth/login - 204 null null 11.5018ms
2025-08-07 20:03:21.802 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/auth/login - application/json 58
2025-08-07 20:03:21.815 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:21.823 +02:00 [INF] Executing endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 20:03:21.882 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend.DTOs.Auth.AuthResponse]] Login(backend.DTOs.Auth.AuthRequest) on controller backend.Controllers.AuthController (backend).
2025-08-07 20:03:21.990 +02:00 [INF] LOGIN REQUEST RECEIVED - workId: AGT987, email: knc@gmail.com, role: agent
2025-08-07 20:03:22.051 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__workId_0='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [users] AS [u]
WHERE [u].[work_id] = @__workId_0
2025-08-07 20:03:22.144 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector]
FROM [agents] AS [a]
WHERE [a].[user_id] = @__p_0
2025-08-07 20:03:22.171 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[user_id], [m].[created_by], [m].[department]
FROM [managers] AS [m]
WHERE [m].[user_id] = @__p_0
2025-08-07 20:03:22.185 +02:00 [INF] Authentication successful for user: AGT987
2025-08-07 20:03:22.380 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@p12='?' (DbType = Int64), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (Size = 255) (DbType = AnsiString), @p3='?' (Size = 100) (DbType = AnsiString), @p4='?' (DbType = DateTime), @p5='?' (Size = 100) (DbType = AnsiString), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (Size = 255) (DbType = AnsiString), @p8='?' (Size = 20) (DbType = AnsiString), @p9='?' (Size = 4000), @p10='?' (Size = 20) (DbType = AnsiString), @p11='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [active] = @p0, [created_at] = @p1, [email] = @p2, [first_name] = @p3, [last_login] = @p4, [last_name] = @p5, [national_id] = @p6, [password_hash] = @p7, [phone_number] = @p8, [profile_image_url] = @p9, [role] = @p10, [work_id] = @p11
OUTPUT 1
WHERE [Id] = @p12;
2025-08-07 20:03:22.448 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:22.453 +02:00 [INF] Login successful for user: AGT987, returning token
2025-08-07 20:03:22.455 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Auth.AuthResponse'.
2025-08-07 20:03:22.462 +02:00 [INF] Executed action backend.Controllers.AuthController.Login (backend) in 565.435ms
2025-08-07 20:03:22.464 +02:00 [INF] Executed endpoint 'backend.Controllers.AuthController.Login (backend)'
2025-08-07 20:03:22.466 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/auth/login - 200 null application/json; charset=utf-8 663.6294ms
2025-08-07 20:03:23.774 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-07 20:03:23.781 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-07 20:03:23.798 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-07 20:03:23.798 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:03:23.802 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-07 20:03:23.806 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:03:23.962 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:25.012 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:25.784 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:25.803 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:25.825 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:26.080 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:26.100 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 2325.33ms
2025-08-07 20:03:26.112 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 2331.2052ms
2025-08-07 20:03:26.257 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 2459.2476ms
2025-08-07 20:03:26.357 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 2558.7136ms
2025-08-07 20:03:26.377 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 2574.9688ms
2025-08-07 20:03:26.409 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 2602.5931ms
2025-08-07 20:03:26.607 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-07 20:03:26.633 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-07 20:03:26.726 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:03:26.918 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:26.941 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:26.980 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:26.996 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-07 20:03:27.007 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 20:03:27.054 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:27.108 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:27.121 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:27.133 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:27.444 +02:00 [INF] Executed DbCommand (304ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:27.446 +02:00 [INF] Executed DbCommand (257ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:28.007 +02:00 [INF] Executed DbCommand (444ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:28.058 +02:00 [INF] Executed DbCommand (156ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:28.276 +02:00 [INF] Executed DbCommand (193ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:28.425 +02:00 [INF] Executed DbCommand (222ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:28.840 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:28.913 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 1776.7981ms
2025-08-07 20:03:28.935 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:03:29.088 +02:00 [INF] Executed DbCommand (546ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:29.185 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:29.354 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:29.528 +02:00 [INF] Executed DbCommand (429ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 20:03:29.563 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 2836.8877ms
2025-08-07 20:03:29.593 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:29.778 +02:00 [INF] Executed DbCommand (221ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:03:29.939 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:30.131 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:30.170 +02:00 [INF] Executed DbCommand (210ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:30.568 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 3325.6414ms
2025-08-07 20:03:30.589 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-07 20:03:30.877 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 20:03:30.905 +02:00 [INF] Executed DbCommand (130ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:31.170 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:31.211 +02:00 [INF] Executed DbCommand (902ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:31.217 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 4584.4827ms
2025-08-07 20:03:31.352 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 20:03:31.382 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:31.439 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:31.505 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:31.589 +02:00 [INF] Executed DbCommand (201ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:31.657 +02:00 [INF] Executed DbCommand (156ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:31.718 +02:00 [INF] Executed DbCommand (81ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:31.871 +02:00 [INF] Executed DbCommand (136ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:31.971 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:31.980 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:32.013 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:32.022 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 1722.7861ms
2025-08-07 20:03:32.024 +02:00 [INF] Executed DbCommand (238ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 20:03:32.155 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:32.230 +02:00 [INF] Executed DbCommand (116ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:32.335 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:32.342 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 3407.5152ms
2025-08-07 20:03:32.457 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 962.8301ms
2025-08-07 20:03:32.486 +02:00 [INF] Executed DbCommand (75ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:32.616 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 20:03:32.814 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 2224.4286ms
2025-08-07 20:03:32.889 +02:00 [INF] Executed DbCommand (117ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:33.241 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:33.470 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:33.487 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:33.500 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:33.516 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:33.540 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:33.639 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:33.770 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:33.832 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:33.913 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:34.022 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:34.208 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:34.249 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:34.388 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:34.549 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:34.735 +02:00 [INF] Executed DbCommand (96ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:34.758 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:34.794 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:34.856 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:34.995 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:35.040 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:35.095 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:03:35.235 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-07 20:03:35.331 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 8171.6993ms
2025-08-07 20:03:35.340 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-07 20:03:35.347 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-07 20:03:35.352 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 8744.9485ms
2025-08-07 20:03:35.365 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:35.409 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-07 20:03:35.413 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:35.524 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:35.647 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:35.783 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:03:35.798 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:35.801 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 17.9346ms
2025-08-07 20:03:35.834 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:03:35.889 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:35.903 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:35.921 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:35.923 +02:00 [INF] Executed DbCommand (235ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.003 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:03:36.021 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:36.052 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.087 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.133 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.215 +02:00 [INF] Executed DbCommand (155ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:36.246 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.485 +02:00 [INF] Executed DbCommand (166ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.597 +02:00 [INF] Executed DbCommand (100ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.600 +02:00 [INF] Executed DbCommand (348ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:36.611 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.625 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:36.641 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 691.0144ms
2025-08-07 20:03:36.647 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:36.648 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.650 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 815.9316ms
2025-08-07 20:03:36.675 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.695 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:03:36.701 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.704 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:36.726 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:36.732 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:36.733 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.770 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.783 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:36.791 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.822 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.845 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.845 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:36.860 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:36.886 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.110 +02:00 [INF] Executed DbCommand (196ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.136 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.156 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.161 +02:00 [INF] Executed DbCommand (297ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:37.176 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:37.179 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.181 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 441.0586ms
2025-08-07 20:03:37.196 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:37.203 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 508.3845ms
2025-08-07 20:03:37.210 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.329 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.404 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.457 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.513 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.583 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.630 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.734 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:37.846 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:38.004 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:03:38.087 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:03:38.180 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-07 20:03:38.217 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 2765.002ms
2025-08-07 20:03:38.264 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-07 20:03:38.280 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 2932.5134ms
2025-08-07 20:03:38.535 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:03:38.594 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:38.606 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:38.612 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:38.769 +02:00 [INF] Executed DbCommand (142ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:38.811 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:38.977 +02:00 [INF] Executed DbCommand (151ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:38.991 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:38.998 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 373.8131ms
2025-08-07 20:03:39.005 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:39.010 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 474.8913ms
2025-08-07 20:03:39.043 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:03:39.052 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:39.062 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:39.068 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:39.118 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:39.164 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:39.285 +02:00 [INF] Executed DbCommand (111ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:39.304 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:39.318 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 240.95ms
2025-08-07 20:03:39.336 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:39.351 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 307.9125ms
2025-08-07 20:03:55.682 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:03:55.691 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:55.694 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:03:55.697 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 15.4726ms
2025-08-07 20:03:55.705 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:55.716 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:03:55.719 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 25.1572ms
2025-08-07 20:03:55.733 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:55.747 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:55.751 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:55.810 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:55.852 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:56.058 +02:00 [INF] Executed DbCommand (180ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:56.066 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:56.070 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 310.2477ms
2025-08-07 20:03:56.072 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:03:56.076 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:56.088 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:56.094 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 377.9921ms
2025-08-07 20:03:56.098 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:56.112 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:56.163 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:56.224 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:56.468 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/history - null null
2025-08-07 20:03:56.477 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:56.480 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/history - 204 null null 12.133ms
2025-08-07 20:03:56.494 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/history - null null
2025-08-07 20:03:56.509 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:56.530 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceHistory (backend)'
2025-08-07 20:03:56.594 +02:00 [INF] Route matched with {action = "GetAttendanceHistory", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceHistory() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:56.676 +02:00 [INF] Executed DbCommand (413ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:56.753 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:56.784 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 664.2413ms
2025-08-07 20:03:56.795 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:56.804 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:03:56.850 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 777.6966ms
2025-08-07 20:03:56.910 +02:00 [INF] Executed DbCommand (64ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:03:56.978 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:57.033 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceHistory (backend) in 353.9644ms
2025-08-07 20:03:57.056 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceHistory (backend)'
2025-08-07 20:03:57.070 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/history - 200 null application/json; charset=utf-8 575.6412ms
2025-08-07 20:03:57.119 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-07 20:03:57.141 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:57.143 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 24.1725ms
2025-08-07 20:03:57.176 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-07 20:03:57.201 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:03:57.212 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 20:03:57.233 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:03:57.301 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:03:57.380 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 20:03:57.405 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:03:57.420 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 173.8908ms
2025-08-07 20:03:57.462 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 20:03:57.486 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 309.9888ms
2025-08-07 20:04:08.504 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/clients - null null
2025-08-07 20:04:08.506 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:04:08.519 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:08.523 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:08.526 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/clients - 204 null null 21.3994ms
2025-08-07 20:04:08.528 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 21.7145ms
2025-08-07 20:04:08.541 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:04:08.553 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/clients - application/json null
2025-08-07 20:04:08.561 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:08.582 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:08.593 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:08.602 +02:00 [INF] Executing endpoint 'backend.Controllers.ClientController.GetAllClients (backend)'
2025-08-07 20:04:08.605 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:04:08.642 +02:00 [INF] Route matched with {action = "GetAllClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend.DTOs.Client.ClientDTO]]] GetAllClients() on controller backend.Controllers.ClientController (backend).
2025-08-07 20:04:08.707 +02:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:08.742 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:08.796 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:08.801 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:04:09.039 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:09.040 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[backend.Models.Client, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[backend.DTOs.Client.ClientDTO, backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-07 20:04:09.106 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:04:09.122 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 494.2145ms
2025-08-07 20:04:09.137 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:09.152 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 610.8635ms
2025-08-07 20:04:09.219 +02:00 [INF] Executed action backend.Controllers.ClientController.GetAllClients (backend) in 561.3989ms
2025-08-07 20:04:09.224 +02:00 [INF] Executed endpoint 'backend.Controllers.ClientController.GetAllClients (backend)'
2025-08-07 20:04:09.230 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/clients - 200 null application/json; charset=utf-8 676.7125ms
2025-08-07 20:04:17.481 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=weekly - null null
2025-08-07 20:04:17.485 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:04:17.499 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:17.514 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:17.516 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/performance?period=weekly - 204 null null 34.9385ms
2025-08-07 20:04:17.519 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 33.7126ms
2025-08-07 20:04:17.582 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=weekly - null null
2025-08-07 20:04:17.600 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:04:17.613 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:17.624 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:17.629 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-07 20:04:17.632 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:17.645 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:04:17.666 +02:00 [INF] Route matched with {action = "GetPerformance", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetPerformance(System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller backend.Controllers.AgentController (backend).
2025-08-07 20:04:17.700 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:17.754 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:17.793 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:17.941 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:18.123 +02:00 [INF] Executed DbCommand (168ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.130 +02:00 [INF] Executed DbCommand (297ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:18.364 +02:00 [INF] Executed DbCommand (96ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.386 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:04:18.420 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 759.7973ms
2025-08-07 20:04:18.433 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:18.439 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.440 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 840.4622ms
2025-08-07 20:04:18.464 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.552 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.614 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.666 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.686 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.701 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.724 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDate_1 AND [a].[Timestamp] <= @__endDate_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:18.758 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.787 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.819 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.856 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.908 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.928 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.947 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:18.969 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:19.005 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:19.030 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentPerformanceDTO'.
2025-08-07 20:04:19.078 +02:00 [INF] Executed action backend.Controllers.AgentController.GetPerformance (backend) in 1404.2595ms
2025-08-07 20:04:19.088 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetPerformance (backend)'
2025-08-07 20:04:19.094 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/performance?period=weekly - 200 null application/json; charset=utf-8 1511.9078ms
2025-08-07 20:04:27.776 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:04:27.787 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:27.790 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 13.7336ms
2025-08-07 20:04:27.803 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:04:27.818 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:27.825 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:27.829 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:04:27.910 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:27.984 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - null null
2025-08-07 20:04:27.990 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:27.997 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:28.022 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/notifications - 204 null null 37.5697ms
2025-08-07 20:04:28.050 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/notifications - application/json null
2025-08-07 20:04:28.061 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:28.072 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-07 20:04:28.082 +02:00 [INF] Route matched with {action = "GetAgentNotifications", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAgentNotifications() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:04:28.330 +02:00 [INF] Executed DbCommand (221ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:28.330 +02:00 [INF] Executed DbCommand (310ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:28.358 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:04:28.365 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 527.361ms
2025-08-07 20:04:28.375 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:28.392 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 588.88ms
2025-08-07 20:04:28.500 +02:00 [INF] Executed DbCommand (157ms) [Parameters=[@__recipient_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Category], [n].[Message], [n].[Priority], [n].[read_status], [n].[recipient_id], [n].[sender_id], [n].[sent_at], [n].[Status], [n].[Title], [n].[via_email], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [u0].[Id], [u0].[active], [u0].[created_at], [u0].[email], [u0].[first_name], [u0].[last_login], [u0].[last_name], [u0].[national_id], [u0].[password_hash], [u0].[phone_number], [u0].[profile_image_url], [u0].[role], [u0].[work_id]
FROM [notifications] AS [n]
INNER JOIN [users] AS [u] ON [n].[sender_id] = [u].[Id]
LEFT JOIN [users] AS [u0] ON [n].[recipient_id] = [u0].[Id]
WHERE [n].[recipient_id] = @__recipient_Id_0
ORDER BY [n].[sent_at] DESC
2025-08-07 20:04:28.510 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType16`1[[System.Collections.Generic.List`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:04:28.516 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAgentNotifications (backend) in 417.9479ms
2025-08-07 20:04:28.521 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAgentNotifications (backend)'
2025-08-07 20:04:28.525 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/notifications - 200 null application/json; charset=utf-8 474.7325ms
2025-08-07 20:04:42.609 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - null null
2025-08-07 20:04:42.610 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - null null
2025-08-07 20:04:42.616 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:04:42.680 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:42.688 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:42.696 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:42.698 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/timeframe - 204 null null 89.3838ms
2025-08-07 20:04:42.701 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/dashboard - 204 null null 90.3567ms
2025-08-07 20:04:42.703 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 86.7296ms
2025-08-07 20:04:43.017 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - application/json null
2025-08-07 20:04:44.075 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:04:44.398 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - application/json null
2025-08-07 20:04:44.630 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:45.458 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:46.092 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:46.225 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-07 20:04:46.276 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:46.623 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 20:04:46.836 +02:00 [INF] Route matched with {action = "GetDashboard", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDashboard() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:04:46.945 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:04:46.970 +02:00 [INF] Route matched with {action = "GetAttendanceTimeframe", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceTimeframe() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:04:47.488 +02:00 [INF] Executed DbCommand (396ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:47.501 +02:00 [INF] Executed DbCommand (129ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:47.511 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:47.702 +02:00 [INF] Executed DbCommand (187ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:47.731 +02:00 [INF] Executed DbCommand (151ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:48.057 +02:00 [INF] Executed DbCommand (272ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.109 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [clients] AS [c]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:04:48.126 +02:00 [INF] Executed DbCommand (203ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:48.137 +02:00 [INF] Executed DbCommand (380ms) [Parameters=[@__manager_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[applies_to_all_agents], [a].[break_duration], [a].[created_at], [a].[day_of_week], [a].[end_time], [a].[manager_id], [a].[start_time], [a].[updated_at], [m].[user_id], [m].[created_by], [m].[department], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance_timeframes] AS [a]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
INNER JOIN [users] AS [u] ON [m].[user_id] = [u].[Id]
WHERE [a].[manager_id] = @__manager_UserId_0
2025-08-07 20:04:48.221 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.222 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:04:48.246 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:04:48.260 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 900.3492ms
2025-08-07 20:04:48.262 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.266 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceTimeframe (backend) in 770.9944ms
2025-08-07 20:04:48.271 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:48.285 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.285 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceTimeframe (backend)'
2025-08-07 20:04:48.288 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 4212.6384ms
2025-08-07 20:04:48.305 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.310 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/timeframe - 200 null application/json; charset=utf-8 3912.0463ms
2025-08-07 20:04:48.525 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.538 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.551 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.568 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.598 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.636 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.701 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.740 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.923 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:48.980 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.014 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.047 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.058 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.074 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.089 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.131 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.173 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.204 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.231 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.260 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.281 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.294 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.312 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.322 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.337 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.362 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.399 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0 AND [c].[created_at] >= @__startDate_1 AND [c].[created_at] <= @__endDate_2
2025-08-07 20:04:49.440 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Active], [c].[agent_id], [c].[collected_at], [c].[collected_by_name], [c].[contract_years], [c].[created_at], [c].[date_of_birth], [c].[Email], [c].[full_name], [c].[insurance_type], [c].[Location], [c].[national_id], [c].[paying_amount], [c].[paying_method], [c].[phone_number], [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [clients] AS [c]
LEFT JOIN [agents] AS [a] ON [c].[agent_id] = [a].[user_id]
LEFT JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
WHERE [c].[agent_id] = @__agent_UserId_0
2025-08-07 20:04:49.455 +02:00 [INF] Executing OkObjectResult, writing value of type 'backend.DTOs.Agent.AgentDashboardDTO'.
2025-08-07 20:04:49.463 +02:00 [INF] Executed action backend.Controllers.AgentController.GetDashboard (backend) in 2393.7329ms
2025-08-07 20:04:49.476 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetDashboard (backend)'
2025-08-07 20:04:49.483 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/dashboard - 200 null application/json; charset=utf-8 6465.904ms
2025-08-07 20:04:49.519 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - null null
2025-08-07 20:04:49.531 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:49.533 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/agent/attendance/status - 204 null null 14.035ms
2025-08-07 20:04:49.540 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:04:49.546 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:49.553 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:49.558 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:04:49.650 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:49.696 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:49.747 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:49.774 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:04:49.783 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 215.0513ms
2025-08-07 20:04:49.802 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:49.808 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 267.1957ms
2025-08-07 20:04:49.838 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - application/json null
2025-08-07 20:04:49.852 +02:00 [INF] CORS policy execution successful.
2025-08-07 20:04:49.859 +02:00 [INF] Executing endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:49.864 +02:00 [INF] Route matched with {action = "GetAttendanceStatus", controller = "Agent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAttendanceStatus() on controller backend.Controllers.AgentController (backend).
2025-08-07 20:04:49.925 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[user_id], [a].[agent_type], [a].[group_id], [a].[manager_id], [a].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id], [m].[user_id], [m].[created_by], [m].[department], [a0].[Id], [a0].[created_at], [a0].[description], [a0].[leader_id], [a0].[manager_id], [a0].[Name]
FROM [agents] AS [a]
INNER JOIN [users] AS [u] ON [a].[user_id] = [u].[Id]
INNER JOIN [managers] AS [m] ON [a].[manager_id] = [m].[user_id]
LEFT JOIN [agent_groups] AS [a0] ON [a].[group_id] = [a0].[Id]
WHERE [a].[user_id] = @__id_0
2025-08-07 20:04:50.025 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64), @__startDateTime_1='?' (DbType = DateTime2), @__endDateTime_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0 AND [a].[Timestamp] >= @__startDateTime_1 AND [a].[Timestamp] <= @__endDateTime_2
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:50.084 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__agent_UserId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[agent_id], [a].[Location], [a].[Sector], [a].[Timestamp], [a0].[user_id], [a0].[agent_type], [a0].[group_id], [a0].[manager_id], [a0].[Sector], [u].[Id], [u].[active], [u].[created_at], [u].[email], [u].[first_name], [u].[last_login], [u].[last_name], [u].[national_id], [u].[password_hash], [u].[phone_number], [u].[profile_image_url], [u].[role], [u].[work_id]
FROM [attendance] AS [a]
INNER JOIN [agents] AS [a0] ON [a].[agent_id] = [a0].[user_id]
INNER JOIN [users] AS [u] ON [a0].[user_id] = [u].[Id]
WHERE [a].[agent_id] = @__agent_UserId_0
ORDER BY [a].[Timestamp] DESC
2025-08-07 20:04:50.100 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-07 20:04:50.106 +02:00 [INF] Executed action backend.Controllers.AgentController.GetAttendanceStatus (backend) in 229.3436ms
2025-08-07 20:04:50.111 +02:00 [INF] Executed endpoint 'backend.Controllers.AgentController.GetAttendanceStatus (backend)'
2025-08-07 20:04:50.118 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/agent/attendance/status - 200 null application/json; charset=utf-8 280.8998ms
2025-08-07 20:04:54.049 +02:00 [INF] Application is shutting down...
